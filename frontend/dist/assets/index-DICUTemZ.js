import{r as l,a as Da,U as Pa,b as qe,M as Ce,L as pt,A as $e,c as H,E as Hs,d as Tt,P as Le,S as Ve,B as ft,e as is,T as Ae,X as Me,f as Se,g as Oe,D as We,h as gt,F as Fe,C as Ie,i as Qe,j as os,k as fs,l as Ye,m as Dt,n as Te,o as Zt,p as cs,q as es,s as Ta,t as Ft,u as He,v as _e,w as Ze,x as ds,y as pe,z as ye,G as $t,H as Be,I as Fa,J as $a,K as lt,N as Lt,O as ts,R as qs,Q as bs,V as La,W as Ot,Y as et,Z as tt,_ as At,$ as us,a0 as gs,a1 as js,a2 as bt,a3 as Vs,a4 as Oa,a5 as Ns,a6 as Ia,a7 as Ba,a8 as Ua,a9 as za}from"./vendor-react-BVKm-cO1.js";import{g as ae}from"./vendor-gsap-C8pce-KX.js";import{S as Ha,P as qa,W as Va,B as ws,C as Kt,a as St,b as Ma,A as vs,c as Wa,V as Xe,L as Ka,d as Ja,R as Ga,e as ys,f as Xa}from"./vendor-three-Bbr_mF-p.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Ms={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=l,Qa=Symbol.for("react.element"),Za=Symbol.for("react.fragment"),er=Object.prototype.hasOwnProperty,tr=Ya.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sr={key:!0,ref:!0,__self:!0,__source:!0};function Ws(t,s,a){var r,n={},i=null,o=null;a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(r in s)er.call(s,r)&&!sr.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:Qa,type:t,key:i,ref:o,props:n,_owner:tr.current}}It.Fragment=Za;It.jsx=Ws;It.jsxs=Ws;Ms.exports=It;var e=Ms.exports,ss={},Ss=Da;ss.createRoot=Ss.createRoot,ss.hydrateRoot=Ss.hydrateRoot;function Ks(t,s){return function(){return t.apply(s,arguments)}}const{toString:ar}=Object.prototype,{getPrototypeOf:xs}=Object,{iterator:Bt,toStringTag:Js}=Symbol,Ut=(t=>s=>{const a=ar.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Re=t=>(t=t.toLowerCase(),s=>Ut(s)===t),zt=t=>s=>typeof s===t,{isArray:dt}=Array,ct=zt("undefined");function jt(t){return t!==null&&!ct(t)&&t.constructor!==null&&!ct(t.constructor)&&be(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Gs=Re("ArrayBuffer");function rr(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Gs(t.buffer),s}const lr=zt("string"),be=zt("function"),Xs=zt("number"),Nt=t=>t!==null&&typeof t=="object",nr=t=>t===!0||t===!1,_t=t=>{if(Ut(t)!=="object")return!1;const s=xs(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Js in t)&&!(Bt in t)},ir=t=>{if(!Nt(t)||jt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},or=Re("Date"),cr=Re("File"),dr=Re("Blob"),ur=Re("FileList"),xr=t=>Nt(t)&&be(t.pipe),mr=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||be(t.append)&&((s=Ut(t))==="formdata"||s==="object"&&be(t.toString)&&t.toString()==="[object FormData]"))},hr=Re("URLSearchParams"),[pr,fr,br,gr]=["ReadableStream","Request","Response","Headers"].map(Re),jr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wt(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),dt(t))for(r=0,n=t.length;r<n;r++)s.call(null,t[r],r,t);else{if(jt(t))return;const i=a?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],s.call(null,t[c],c,t)}}function Ys(t,s){if(jt(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,n;for(;r-- >0;)if(n=a[r],s===n.toLowerCase())return n;return null}const at=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qs=t=>!ct(t)&&t!==at;function as(){const{caseless:t,skipUndefined:s}=Qs(this)&&this||{},a={},r=(n,i)=>{const o=t&&Ys(a,i)||i;_t(a[o])&&_t(n)?a[o]=as(a[o],n):_t(n)?a[o]=as({},n):dt(n)?a[o]=n.slice():(!s||!ct(n))&&(a[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&wt(arguments[n],r);return a}const Nr=(t,s,a,{allOwnKeys:r}={})=>(wt(s,(n,i)=>{a&&be(n)?t[i]=Ks(n,a):t[i]=n},{allOwnKeys:r}),t),wr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vr=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},yr=(t,s,a,r)=>{let n,i,o;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!r||r(o,t,s))&&!c[o]&&(s[o]=t[o],c[o]=!0);t=a!==!1&&xs(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},Sr=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},kr=t=>{if(!t)return null;if(dt(t))return t;let s=t.length;if(!Xs(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},Cr=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&xs(Uint8Array)),Ar=(t,s)=>{const r=(t&&t[Bt]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},_r=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},Rr=Re("HTMLFormElement"),Er=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),ks=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),Dr=Re("RegExp"),Zs=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};wt(a,(n,i)=>{let o;(o=s(n,i,t))!==!1&&(r[i]=o||n)}),Object.defineProperties(t,r)},Pr=t=>{Zs(t,(s,a)=>{if(be(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(be(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Tr=(t,s)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return dt(t)?r(t):r(String(t).split(s)),a},Fr=()=>{},$r=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Lr(t){return!!(t&&be(t.append)&&t[Js]==="FormData"&&t[Bt])}const Or=t=>{const s=new Array(10),a=(r,n)=>{if(Nt(r)){if(s.indexOf(r)>=0)return;if(jt(r))return r;if(!("toJSON"in r)){s[n]=r;const i=dt(r)?[]:{};return wt(r,(o,c)=>{const f=a(o,n+1);!ct(f)&&(i[c]=f)}),s[n]=void 0,i}}return r};return a(t,0)},Ir=Re("AsyncFunction"),Br=t=>t&&(Nt(t)||be(t))&&be(t.then)&&be(t.catch),ea=((t,s)=>t?setImmediate:s?((a,r)=>(at.addEventListener("message",({source:n,data:i})=>{n===at&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),at.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",be(at.postMessage)),Ur=typeof queueMicrotask<"u"?queueMicrotask.bind(at):typeof process<"u"&&process.nextTick||ea,zr=t=>t!=null&&be(t[Bt]),E={isArray:dt,isArrayBuffer:Gs,isBuffer:jt,isFormData:mr,isArrayBufferView:rr,isString:lr,isNumber:Xs,isBoolean:nr,isObject:Nt,isPlainObject:_t,isEmptyObject:ir,isReadableStream:pr,isRequest:fr,isResponse:br,isHeaders:gr,isUndefined:ct,isDate:or,isFile:cr,isBlob:dr,isRegExp:Dr,isFunction:be,isStream:xr,isURLSearchParams:hr,isTypedArray:Cr,isFileList:ur,forEach:wt,merge:as,extend:Nr,trim:jr,stripBOM:wr,inherits:vr,toFlatObject:yr,kindOf:Ut,kindOfTest:Re,endsWith:Sr,toArray:kr,forEachEntry:Ar,matchAll:_r,isHTMLForm:Rr,hasOwnProperty:ks,hasOwnProp:ks,reduceDescriptors:Zs,freezeMethods:Pr,toObjectSet:Tr,toCamelCase:Er,noop:Fr,toFiniteNumber:$r,findKey:Ys,global:at,isContextDefined:Qs,isSpecCompliantForm:Lr,toJSONObject:Or,isAsyncFn:Ir,isThenable:Br,setImmediate:ea,asap:Ur,isIterable:zr};function Z(t,s,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}E.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.status}}});const ta=Z.prototype,sa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sa[t]={value:t}});Object.defineProperties(Z,sa);Object.defineProperty(ta,"isAxiosError",{value:!0});Z.from=(t,s,a,r,n,i)=>{const o=Object.create(ta);E.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return Z.call(o,c,f,a,r,n),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const Hr=null;function rs(t){return E.isPlainObject(t)||E.isArray(t)}function aa(t){return E.endsWith(t,"[]")?t.slice(0,-2):t}function Cs(t,s,a){return t?t.concat(s).map(function(n,i){return n=aa(n),!a&&i?"["+n+"]":n}).join(a?".":""):s}function qr(t){return E.isArray(t)&&!t.some(rs)}const Vr=E.toFlatObject(E,{},null,function(s){return/^is[A-Z]/.test(s)});function Ht(t,s,a){if(!E.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=E.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,p){return!E.isUndefined(p[j])});const r=a.metaTokens,n=a.visitor||d,i=a.dots,o=a.indexes,f=(a.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(s);if(!E.isFunction(n))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(E.isDate(x))return x.toISOString();if(E.isBoolean(x))return x.toString();if(!f&&E.isBlob(x))throw new Z("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(x)||E.isTypedArray(x)?f&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,j,p){let v=x;if(x&&!p&&typeof x=="object"){if(E.endsWith(j,"{}"))j=r?j:j.slice(0,-2),x=JSON.stringify(x);else if(E.isArray(x)&&qr(x)||(E.isFileList(x)||E.endsWith(j,"[]"))&&(v=E.toArray(x)))return j=aa(j),v.forEach(function(N,w){!(E.isUndefined(N)||N===null)&&s.append(o===!0?Cs([j],w,i):o===null?j:j+"[]",u(N))}),!1}return rs(x)?!0:(s.append(Cs(p,j,i),u(x)),!1)}const h=[],m=Object.assign(Vr,{defaultVisitor:d,convertValue:u,isVisitable:rs});function b(x,j){if(!E.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+j.join("."));h.push(x),E.forEach(x,function(v,S){(!(E.isUndefined(v)||v===null)&&n.call(s,v,E.isString(S)?S.trim():S,j,m))===!0&&b(v,j?j.concat(S):[S])}),h.pop()}}if(!E.isObject(t))throw new TypeError("data must be an object");return b(t),s}function As(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function ms(t,s){this._pairs=[],t&&Ht(t,this,s)}const ra=ms.prototype;ra.append=function(s,a){this._pairs.push([s,a])};ra.toString=function(s){const a=s?function(r){return s.call(this,r,As)}:As;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function Mr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function la(t,s,a){if(!s)return t;const r=a&&a.encode||Mr;E.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(s,a):i=E.isURLSearchParams(s)?s.toString():new ms(s,a).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class _s{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){E.forEach(this.handlers,function(r){r!==null&&s(r)})}}const na={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr=typeof URLSearchParams<"u"?URLSearchParams:ms,Kr=typeof FormData<"u"?FormData:null,Jr=typeof Blob<"u"?Blob:null,Gr={isBrowser:!0,classes:{URLSearchParams:Wr,FormData:Kr,Blob:Jr},protocols:["http","https","file","blob","url","data"]},hs=typeof window<"u"&&typeof document<"u",ls=typeof navigator=="object"&&navigator||void 0,Xr=hs&&(!ls||["ReactNative","NativeScript","NS"].indexOf(ls.product)<0),Yr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qr=hs&&window.location.href||"http://localhost",Zr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hs,hasStandardBrowserEnv:Xr,hasStandardBrowserWebWorkerEnv:Yr,navigator:ls,origin:Qr},Symbol.toStringTag,{value:"Module"})),he={...Zr,...Gr};function el(t,s){return Ht(t,new he.classes.URLSearchParams,{visitor:function(a,r,n,i){return he.isNode&&E.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function tl(t){return E.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function sl(t){const s={},a=Object.keys(t);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],s[i]=t[i];return s}function ia(t){function s(a,r,n,i){let o=a[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),f=i>=a.length;return o=!o&&E.isArray(n)?n.length:o,f?(E.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!c):((!n[o]||!E.isObject(n[o]))&&(n[o]=[]),s(a,r,n[o],i)&&E.isArray(n[o])&&(n[o]=sl(n[o])),!c)}if(E.isFormData(t)&&E.isFunction(t.entries)){const a={};return E.forEachEntry(t,(r,n)=>{s(tl(r),n,a,0)}),a}return null}function al(t,s,a){if(E.isString(t))try{return(s||JSON.parse)(t),E.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const vt={transitional:na,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=E.isObject(s);if(i&&E.isHTMLForm(s)&&(s=new FormData(s)),E.isFormData(s))return n?JSON.stringify(ia(s)):s;if(E.isArrayBuffer(s)||E.isBuffer(s)||E.isStream(s)||E.isFile(s)||E.isBlob(s)||E.isReadableStream(s))return s;if(E.isArrayBufferView(s))return s.buffer;if(E.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return el(s,this.formSerializer).toString();if((c=E.isFileList(s))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Ht(c?{"files[]":s}:s,f&&new f,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),al(s)):s}],transformResponse:[function(s){const a=this.transitional||vt.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(E.isResponse(s)||E.isReadableStream(s))return s;if(s&&E.isString(s)&&(r&&!this.responseType||n)){const o=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Z.from(c,Z.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};E.forEach(["delete","get","head","post","put","patch"],t=>{vt.headers[t]={}});const rl=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ll=t=>{const s={};let a,r,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),a=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!a||s[a]&&rl[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},Rs=Symbol("internals");function mt(t){return t&&String(t).trim().toLowerCase()}function Rt(t){return t===!1||t==null?t:E.isArray(t)?t.map(Rt):String(t)}function nl(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const il=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Jt(t,s,a,r,n){if(E.isFunction(r))return r.call(this,s,a);if(n&&(s=a),!!E.isString(s)){if(E.isString(r))return s.indexOf(r)!==-1;if(E.isRegExp(r))return r.test(s)}}function ol(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function cl(t,s){const a=E.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(n,i,o){return this[r].call(this,s,n,i,o)},configurable:!0})})}let ge=class{constructor(s){s&&this.set(s)}set(s,a,r){const n=this;function i(c,f,u){const d=mt(f);if(!d)throw new Error("header name must be a non-empty string");const h=E.findKey(n,d);(!h||n[h]===void 0||u===!0||u===void 0&&n[h]!==!1)&&(n[h||f]=Rt(c))}const o=(c,f)=>E.forEach(c,(u,d)=>i(u,d,f));if(E.isPlainObject(s)||s instanceof this.constructor)o(s,a);else if(E.isString(s)&&(s=s.trim())&&!il(s))o(ll(s),a);else if(E.isObject(s)&&E.isIterable(s)){let c={},f,u;for(const d of s){if(!E.isArray(d))throw TypeError("Object iterator must return a key-value pair");c[u=d[0]]=(f=c[u])?E.isArray(f)?[...f,d[1]]:[f,d[1]]:d[1]}o(c,a)}else s!=null&&i(a,s,r);return this}get(s,a){if(s=mt(s),s){const r=E.findKey(this,s);if(r){const n=this[r];if(!a)return n;if(a===!0)return nl(n);if(E.isFunction(a))return a.call(this,n,r);if(E.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=mt(s),s){const r=E.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||Jt(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let n=!1;function i(o){if(o=mt(o),o){const c=E.findKey(r,o);c&&(!a||Jt(r,r[c],c,a))&&(delete r[c],n=!0)}}return E.isArray(s)?s.forEach(i):i(s),n}clear(s){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!s||Jt(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const a=this,r={};return E.forEach(this,(n,i)=>{const o=E.findKey(r,i);if(o){a[o]=Rt(n),delete a[i];return}const c=s?ol(i):String(i).trim();c!==i&&delete a[i],a[c]=Rt(n),r[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return E.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=s&&E.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(n=>r.set(n)),r}static accessor(s){const r=(this[Rs]=this[Rs]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=mt(o);r[c]||(cl(n,o),r[c]=!0)}return E.isArray(s)?s.forEach(i):i(s),this}};ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.reduceDescriptors(ge.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});E.freezeMethods(ge);function Gt(t,s){const a=this||vt,r=s||a,n=ge.from(r.headers);let i=r.data;return E.forEach(t,function(c){i=c.call(a,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function oa(t){return!!(t&&t.__CANCEL__)}function ut(t,s,a){Z.call(this,t??"canceled",Z.ERR_CANCELED,s,a),this.name="CanceledError"}E.inherits(ut,Z,{__CANCEL__:!0});function ca(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new Z("Request failed with status code "+a.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function dl(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function ul(t,s){t=t||10;const a=new Array(t),r=new Array(t);let n=0,i=0,o;return s=s!==void 0?s:1e3,function(f){const u=Date.now(),d=r[i];o||(o=u),a[n]=f,r[n]=u;let h=i,m=0;for(;h!==n;)m+=a[h++],h=h%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),u-o<s)return;const b=d&&u-d;return b?Math.round(m*1e3/b):void 0}}function xl(t,s){let a=0,r=1e3/s,n,i;const o=(u,d=Date.now())=>{a=d,n=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-a;h>=r?o(u,d):(n=u,i||(i=setTimeout(()=>{i=null,o(n)},r-h)))},()=>n&&o(n)]}const Pt=(t,s,a=3)=>{let r=0;const n=ul(50,250);return xl(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,f=o-r,u=n(f),d=o<=c;r=o;const h={loaded:o,total:c,progress:c?o/c:void 0,bytes:f,rate:u||void 0,estimated:u&&c&&d?(c-o)/u:void 0,event:i,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(h)},a)},Es=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},Ds=t=>(...s)=>E.asap(()=>t(...s)),ml=he.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,he.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(he.origin),he.navigator&&/(msie|trident)/i.test(he.navigator.userAgent)):()=>!0,hl=he.hasStandardBrowserEnv?{write(t,s,a,r,n,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(s)}`];E.isNumber(a)&&c.push(`expires=${new Date(a).toUTCString()}`),E.isString(r)&&c.push(`path=${r}`),E.isString(n)&&c.push(`domain=${n}`),i===!0&&c.push("secure"),E.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function pl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function fl(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function da(t,s,a){let r=!pl(s);return t&&(r||a==!1)?fl(t,s):s}const Ps=t=>t instanceof ge?{...t}:t;function nt(t,s){s=s||{};const a={};function r(u,d,h,m){return E.isPlainObject(u)&&E.isPlainObject(d)?E.merge.call({caseless:m},u,d):E.isPlainObject(d)?E.merge({},d):E.isArray(d)?d.slice():d}function n(u,d,h,m){if(E.isUndefined(d)){if(!E.isUndefined(u))return r(void 0,u,h,m)}else return r(u,d,h,m)}function i(u,d){if(!E.isUndefined(d))return r(void 0,d)}function o(u,d){if(E.isUndefined(d)){if(!E.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function c(u,d,h){if(h in s)return r(u,d);if(h in t)return r(void 0,u)}const f={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,d,h)=>n(Ps(u),Ps(d),h,!0)};return E.forEach(Object.keys({...t,...s}),function(d){const h=f[d]||n,m=h(t[d],s[d],d);E.isUndefined(m)&&h!==c||(a[d]=m)}),a}const ua=t=>{const s=nt({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=s;if(s.headers=o=ge.from(o),s.url=la(da(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),E.isFormData(a)){if(he.hasStandardBrowserEnv||he.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(E.isFunction(a.getHeaders)){const f=a.getHeaders(),u=["content-type","content-length"];Object.entries(f).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(he.hasStandardBrowserEnv&&(r&&E.isFunction(r)&&(r=r(s)),r||r!==!1&&ml(s.url))){const f=n&&i&&hl.read(i);f&&o.set(n,f)}return s},bl=typeof XMLHttpRequest<"u",gl=bl&&function(t){return new Promise(function(a,r){const n=ua(t);let i=n.data;const o=ge.from(n.headers).normalize();let{responseType:c,onUploadProgress:f,onDownloadProgress:u}=n,d,h,m,b,x;function j(){b&&b(),x&&x(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let p=new XMLHttpRequest;p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout;function v(){if(!p)return;const N=ge.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),g={data:!c||c==="text"||c==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:N,config:t,request:p};ca(function(A){a(A),j()},function(A){r(A),j()},g),p=null}"onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(v)},p.onabort=function(){p&&(r(new Z("Request aborted",Z.ECONNABORTED,t,p)),p=null)},p.onerror=function(w){const g=w&&w.message?w.message:"Network Error",C=new Z(g,Z.ERR_NETWORK,t,p);C.event=w||null,r(C),p=null},p.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||na;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),r(new Z(w,g.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,t,p)),p=null},i===void 0&&o.setContentType(null),"setRequestHeader"in p&&E.forEach(o.toJSON(),function(w,g){p.setRequestHeader(g,w)}),E.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),c&&c!=="json"&&(p.responseType=n.responseType),u&&([m,x]=Pt(u,!0),p.addEventListener("progress",m)),f&&p.upload&&([h,b]=Pt(f),p.upload.addEventListener("progress",h),p.upload.addEventListener("loadend",b)),(n.cancelToken||n.signal)&&(d=N=>{p&&(r(!N||N.type?new ut(null,t,p):N),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const S=dl(n.url);if(S&&he.protocols.indexOf(S)===-1){r(new Z("Unsupported protocol "+S+":",Z.ERR_BAD_REQUEST,t));return}p.send(i||null)})},jl=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,n;const i=function(u){if(!n){n=!0,c();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Z?d:new ut(d instanceof Error?d.message:d))}};let o=s&&setTimeout(()=>{o=null,i(new Z(`timeout ${s} of ms exceeded`,Z.ETIMEDOUT))},s);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:f}=r;return f.unsubscribe=()=>E.asap(c),f}},Nl=function*(t,s){let a=t.byteLength;if(a<s){yield t;return}let r=0,n;for(;r<a;)n=r+s,yield t.slice(r,n),r=n},wl=async function*(t,s){for await(const a of vl(t))yield*Nl(a,s)},vl=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},Ts=(t,s,a,r)=>{const n=wl(t,s);let i=0,o,c=f=>{o||(o=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:u,value:d}=await n.next();if(u){c(),f.close();return}let h=d.byteLength;if(a){let m=i+=h;a(m)}f.enqueue(new Uint8Array(d))}catch(u){throw c(u),u}},cancel(f){return c(f),n.return()}},{highWaterMark:2})},Fs=64*1024,{isFunction:kt}=E,yl=(({Request:t,Response:s})=>({Request:t,Response:s}))(E.global),{ReadableStream:$s,TextEncoder:Ls}=E.global,Os=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Sl=t=>{t=E.merge.call({skipUndefined:!0},yl,t);const{fetch:s,Request:a,Response:r}=t,n=s?kt(s):typeof fetch=="function",i=kt(a),o=kt(r);if(!n)return!1;const c=n&&kt($s),f=n&&(typeof Ls=="function"?(x=>j=>x.encode(j))(new Ls):async x=>new Uint8Array(await new a(x).arrayBuffer())),u=i&&c&&Os(()=>{let x=!1;const j=new a(he.origin,{body:new $s,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!j}),d=o&&c&&Os(()=>E.isReadableStream(new r("").body)),h={stream:d&&(x=>x.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!h[x]&&(h[x]=(j,p)=>{let v=j&&j[x];if(v)return v.call(j);throw new Z(`Response type '${x}' is not supported`,Z.ERR_NOT_SUPPORT,p)})});const m=async x=>{if(x==null)return 0;if(E.isBlob(x))return x.size;if(E.isSpecCompliantForm(x))return(await new a(he.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(E.isArrayBufferView(x)||E.isArrayBuffer(x))return x.byteLength;if(E.isURLSearchParams(x)&&(x=x+""),E.isString(x))return(await f(x)).byteLength},b=async(x,j)=>{const p=E.toFiniteNumber(x.getContentLength());return p??m(j)};return async x=>{let{url:j,method:p,data:v,signal:S,cancelToken:N,timeout:w,onDownloadProgress:g,onUploadProgress:C,responseType:A,headers:k,withCredentials:T="same-origin",fetchOptions:y}=ua(x),$=s||fetch;A=A?(A+"").toLowerCase():"text";let D=jl([S,N&&N.toAbortSignal()],w),q=null;const _=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let M;try{if(C&&u&&p!=="get"&&p!=="head"&&(M=await b(k,v))!==0){let z=new a(j,{method:"POST",body:v,duplex:"half"}),W;if(E.isFormData(v)&&(W=z.headers.get("content-type"))&&k.setContentType(W),z.body){const[X,Y]=Es(M,Pt(Ds(C)));v=Ts(z.body,Fs,X,Y)}}E.isString(T)||(T=T?"include":"omit");const O=i&&"credentials"in a.prototype,I={...y,signal:D,method:p.toUpperCase(),headers:k.normalize().toJSON(),body:v,duplex:"half",credentials:O?T:void 0};q=i&&new a(j,I);let R=await(i?$(q,y):$(j,I));const L=d&&(A==="stream"||A==="response");if(d&&(g||L&&_)){const z={};["status","statusText","headers"].forEach(ue=>{z[ue]=R[ue]});const W=E.toFiniteNumber(R.headers.get("content-length")),[X,Y]=g&&Es(W,Pt(Ds(g),!0))||[];R=new r(Ts(R.body,Fs,X,()=>{Y&&Y(),_&&_()}),z)}A=A||"text";let U=await h[E.findKey(h,A)||"text"](R,x);return!L&&_&&_(),await new Promise((z,W)=>{ca(z,W,{data:U,headers:ge.from(R.headers),status:R.status,statusText:R.statusText,config:x,request:q})})}catch(O){throw _&&_(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,x,q),{cause:O.cause||O}):Z.from(O,O&&O.code,x,q)}}},kl=new Map,xa=t=>{let s=t&&t.env||{};const{fetch:a,Request:r,Response:n}=s,i=[r,n,a];let o=i.length,c=o,f,u,d=kl;for(;c--;)f=i[c],u=d.get(f),u===void 0&&d.set(f,u=c?new Map:Sl(s)),d=u;return u};xa();const ps={http:Hr,xhr:gl,fetch:{get:xa}};E.forEach(ps,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Is=t=>`- ${t}`,Cl=t=>E.isFunction(t)||t===null||t===!1;function Al(t,s){t=E.isArray(t)?t:[t];const{length:a}=t;let r,n;const i={};for(let o=0;o<a;o++){r=t[o];let c;if(n=r,!Cl(r)&&(n=ps[(c=String(r)).toLowerCase()],n===void 0))throw new Z(`Unknown adapter '${c}'`);if(n&&(E.isFunction(n)||(n=n.get(s))))break;i[c||"#"+o]=n}if(!n){const o=Object.entries(i).map(([f,u])=>`adapter ${f} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=a?o.length>1?`since :
`+o.map(Is).join(`
`):" "+Is(o[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const ma={getAdapter:Al,adapters:ps};function Xt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ut(null,t)}function Bs(t){return Xt(t),t.headers=ge.from(t.headers),t.data=Gt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ma.getAdapter(t.adapter||vt.adapter,t)(t).then(function(r){return Xt(t),r.data=Gt.call(t,t.transformResponse,r),r.headers=ge.from(r.headers),r},function(r){return oa(r)||(Xt(t),r&&r.response&&(r.response.data=Gt.call(t,t.transformResponse,r.response),r.response.headers=ge.from(r.response.headers))),Promise.reject(r)})}const ha="1.13.1",qt={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{qt[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Us={};qt.transitional=function(s,a,r){function n(i,o){return"[Axios v"+ha+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(s===!1)throw new Z(n(o," has been removed"+(a?" in "+a:"")),Z.ERR_DEPRECATED);return a&&!Us[o]&&(Us[o]=!0,console.warn(n(o," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(i,o,c):!0}};qt.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function _l(t,s,a){if(typeof t!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],o=s[i];if(o){const c=t[i],f=c===void 0||o(c,i,t);if(f!==!0)throw new Z("option "+i+" must be "+f,Z.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Z("Unknown option "+i,Z.ERR_BAD_OPTION)}}const Et={assertOptions:_l,validators:qt},Pe=Et.validators;let rt=class{constructor(s){this.defaults=s||{},this.interceptors={request:new _s,response:new _s}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=nt(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&Et.assertOptions(r,{silentJSONParsing:Pe.transitional(Pe.boolean),forcedJSONParsing:Pe.transitional(Pe.boolean),clarifyTimeoutError:Pe.transitional(Pe.boolean)},!1),n!=null&&(E.isFunction(n)?a.paramsSerializer={serialize:n}:Et.assertOptions(n,{encode:Pe.function,serialize:Pe.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Et.assertOptions(a,{baseUrl:Pe.spelling("baseURL"),withXsrfToken:Pe.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&E.merge(i.common,i[a.method]);i&&E.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),a.headers=ge.concat(o,i);const c=[];let f=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(a)===!1||(f=f&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let d,h=0,m;if(!f){const x=[Bs.bind(this),void 0];for(x.unshift(...c),x.push(...u),m=x.length,d=Promise.resolve(a);h<m;)d=d.then(x[h++],x[h++]);return d}m=c.length;let b=a;for(;h<m;){const x=c[h++],j=c[h++];try{b=x(b)}catch(p){j.call(this,p);break}}try{d=Bs.call(this,b)}catch(x){return Promise.reject(x)}for(h=0,m=u.length;h<m;)d=d.then(u[h++],u[h++]);return d}getUri(s){s=nt(this.defaults,s);const a=da(s.baseURL,s.url,s.allowAbsoluteUrls);return la(a,s.params,s.paramsSerializer)}};E.forEach(["delete","get","head","options"],function(s){rt.prototype[s]=function(a,r){return this.request(nt(r||{},{method:s,url:a,data:(r||{}).data}))}});E.forEach(["post","put","patch"],function(s){function a(r){return function(i,o,c){return this.request(nt(c||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}rt.prototype[s]=a(),rt.prototype[s+"Form"]=a(!0)});let Rl=class pa{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},s(function(i,o,c){r.reason||(r.reason=new ut(i,o,c),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new pa(function(n){s=n}),cancel:s}}};function El(t){return function(a){return t.apply(null,a)}}function Dl(t){return E.isObject(t)&&t.isAxiosError===!0}const ns={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ns).forEach(([t,s])=>{ns[s]=t});function fa(t){const s=new rt(t),a=Ks(rt.prototype.request,s);return E.extend(a,rt.prototype,s,{allOwnKeys:!0}),E.extend(a,s,null,{allOwnKeys:!0}),a.create=function(n){return fa(nt(t,n))},a}const ie=fa(vt);ie.Axios=rt;ie.CanceledError=ut;ie.CancelToken=Rl;ie.isCancel=oa;ie.VERSION=ha;ie.toFormData=Ht;ie.AxiosError=Z;ie.Cancel=ie.CanceledError;ie.all=function(s){return Promise.all(s)};ie.spread=El;ie.isAxiosError=Dl;ie.mergeConfig=nt;ie.AxiosHeaders=ge;ie.formToJSON=t=>ia(E.isHTMLForm(t)?new FormData(t):t);ie.getAdapter=ma.getAdapter;ie.HttpStatusCode=ns;ie.default=ie;const{Axios:Vn,AxiosError:Mn,CanceledError:Wn,isCancel:Kn,CancelToken:Jn,VERSION:Gn,all:Xn,Cancel:Yn,isAxiosError:Qn,spread:Zn,toFormData:ei,AxiosHeaders:ti,HttpStatusCode:si,formToJSON:ai,getAdapter:ri,mergeConfig:li}=ie,Pl="https://authorities-joy-justice-path.trycloudflare.com",G=ie.create({baseURL:Pl,withCredentials:!1});G.interceptors.request.use(t=>{const s=localStorage.getItem("noteorbit_token");return s&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));G.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("noteorbit_user"),localStorage.removeItem("noteorbit_token")),Promise.reject(t)});const ot=t=>{t?localStorage.setItem("noteorbit_token",t):localStorage.removeItem("noteorbit_token")},ba=async(t,s="signup")=>G.post("/auth/send-otp",{email:t,mode:s}),Tl=async(t,s)=>G.post("/auth/verify-otp",{email:t,otp:s}),Fl=async(t,s,a)=>G.post("/auth/reset-password",{email:t,otp:s,new_password:a}),$l=()=>{const t=l.useRef(null);return l.useLayoutEffect(()=>{if(!t.current)return;const s=t.current,a=new Ha,r=new qa(55,window.innerWidth/window.innerHeight,.1,100);r.position.z=60;const n=new Va({alpha:!0,antialias:!0});n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),s.appendChild(n.domElement),n.domElement.style.position="absolute",n.domElement.style.top="0",n.domElement.style.left="0",n.domElement.style.width="100%",n.domElement.style.height="100%";const i=800,o=22,c=4.5,f=new ws,u=new Float32Array(i*3),d=new Float32Array(i*3),h=new Float32Array(i*3),m=new Float32Array(i),b=new Kt(3900150);new Kt(1096065);const x=new Kt(16436245),j=Math.PI*(3-Math.sqrt(5));for(let _=0;_<i;_++){const M=1-_/(i-1)*2,O=Math.sqrt(1-M*M),I=j*_,R=Math.cos(I)*O,L=Math.sin(I)*O,U=_*3;d[U]=R*o,d[U+1]=M*o,d[U+2]=L*o,u[U]=d[U],u[U+1]=d[U+1],u[U+2]=d[U+2],h[U]=b.r,h[U+1]=b.g,h[U+2]=b.b,m[_]=1}f.setAttribute("position",new St(u,3)),f.setAttribute("color",new St(h,3)),f.setAttribute("size",new St(m,1));const p=new Ma({transparent:!0,depthWrite:!1,blending:vs,uniforms:{uTime:{value:0}},vertexShader:`
        attribute vec3 color;
        attribute float size;
        varying vec3 vColor;
        varying float vAlpha;
        void main() {
          vColor = color;
          vec4 mv = modelViewMatrix * vec4(position, 1.0);
          gl_PointSize = (12.0 * size) * (1.0 / -mv.z); // Visible dots
          gl_Position = projectionMatrix * mv;
          vAlpha = smoothstep(50.0, 10.0, -mv.z);
        }
      `,fragmentShader:`
        varying vec3 vColor;
        varying float vAlpha;
        void main() {
          float d = distance(gl_PointCoord, vec2(0.5));
          if (d > 0.5) discard;
          float a = smoothstep(0.5, 0.4, d); // Sharp, techy circles
          gl_FragColor = vec4(vColor, a * vAlpha);
        }
      `}),v=new Wa(f,p);a.add(v);const S=[];for(let _=0;_<i;_++){const M=_*3,O=new Xe(d[M],d[M+1],d[M+2]);let I=0;for(let R=_+1;R<i;R++){const L=R*3,U=new Xe(d[L],d[L+1],d[L+2]);if(O.distanceTo(U)<c&&(S.push(_,R),I++),I>=3)break}}const N=new ws,w=new Float32Array(S.length*3);N.setAttribute("position",new St(w,3));const g=new Ka({color:3900150,transparent:!0,opacity:.2,blending:vs}),C=new Ja(N,g);a.add(C);const A=new Xa(0,0),k=new Ga;new ys(new Xe(0,0,1),0);const T=_=>{A.x=_.clientX/window.innerWidth*2-1,A.y=-(_.clientY/window.innerHeight)*2+1};window.addEventListener("mousemove",T);let y,$=0;const D=()=>{y=requestAnimationFrame(D),$+=.005;const _=.002;v.rotation.y+=_,C.rotation.y+=_,v.rotation.x=Math.sin($*.5)*.1,C.rotation.x=Math.sin($*.5)*.1,k.setFromCamera(A,r);const M=new Xe;k.ray.intersectPlane(new ys(new Xe(0,0,1),0),M),new Xe(A.x*30,A.y*30,10);const O=f.attributes.position.array,I=f.attributes.color.array,R=N.attributes.position.array;for(let L=0;L<i;L++){const U=L*3,z=new Xe(d[U],d[U+1],d[U+2]);z.applyEuler(v.rotation);let W=0;const X=z.x,Y=z.y,ue=X-A.x*25,le=Y-A.y*25,me=Math.sqrt(ue*ue+le*le);me<8&&z.z>0&&(W=(1-me/8)*8);const xe=new Xe(d[U],d[U+1],d[U+2]).normalize().multiplyScalar(o+W);O[U]+=(xe.x-O[U])*.1,O[U+1]+=(xe.y-O[U+1])*.1,O[U+2]+=(xe.z-O[U+2])*.1,W>1?(I[U]=x.r,I[U+1]=x.g,I[U+2]=x.b):(I[U]+=(b.r-I[U])*.05,I[U+1]+=(b.g-I[U+1])*.05,I[U+2]+=(b.b-I[U+2])*.05)}for(let L=0;L<S.length;L+=2){const U=S[L],z=S[L+1],W=U*3,X=z*3,Y=L*3;R[Y]=O[W],R[Y+1]=O[W+1],R[Y+2]=O[W+2],R[Y+3]=O[X],R[Y+4]=O[X+1],R[Y+5]=O[X+2]}f.attributes.position.needsUpdate=!0,f.attributes.color.needsUpdate=!0,N.attributes.position.needsUpdate=!0,n.render(a,r)};D();const q=()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",q),()=>{window.removeEventListener("mousemove",T),window.removeEventListener("resize",q),cancelAnimationFrame(y),s.contains(n.domElement)&&s.removeChild(n.domElement),f.dispose(),p.dispose(),N.dispose(),g.dispose(),n.dispose()}},[]),e.jsx("div",{ref:t,className:"fixed inset-0 w-full h-full z-[-1] pointer-events-none"})},zs=({icon:t,className:s="",type:a="text",...r})=>{const[n,i]=l.useState(!1),o=a==="password",c=o?n?"text":"password":a;return e.jsxs("div",{className:"relative group",children:[t&&e.jsx(t,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-400 transition-colors"}),e.jsx("input",{...r,type:c,className:`w-full bg-slate-800/50 backdrop-blur-xl text-white placeholder-gray-500 border border-white/10 rounded-xl py-3.5 ${t?"pl-12":"px-4"} ${o?"pr-12":"pr-4"} focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 outline-none transition duration-300 hover:bg-slate-800/80 ${s}`}),o&&e.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:n?e.jsx(Hs,{className:"w-5 h-5"}):e.jsx(Tt,{className:"w-5 h-5"})})]})},Ll=({roleName:t})=>e.jsxs("div",{className:"fixed inset-0 z-[5000] bg-slate-950/90 backdrop-blur-2xl flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-[200px] h-[200px] bg-blue-500/20 rounded-full blur-[80px] animate-pulse"}),e.jsx("div",{className:"w-24 h-24 border-4 border-blue-500/10 rounded-full animate-[spin_8s_linear_infinite]"}),e.jsx("div",{className:"absolute w-20 h-20 border-t-4 border-l-4 border-blue-400/80 rounded-full animate-[spin_3s_linear_infinite]"}),e.jsx("div",{className:"absolute w-16 h-16 border-r-4 border-b-4 border-purple-500/80 rounded-full animate-[spin_3s_linear_infinite_reverse]"}),e.jsx("div",{className:"absolute bg-white p-2 rounded-full shadow-[0_0_15px_rgba(255,255,255,0.5)] animate-bounce-slight",children:e.jsx(H,{className:"w-6 h-6 text-slate-900 animate-spin"})})]}),e.jsx("h2",{className:"mt-8 text-3xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-emerald-400 animate-pulse",children:"Authenticating..."}),e.jsxs("p",{className:"mt-2 text-slate-400 text-sm font-medium tracking-wide",children:["Accessing ",t==="trainer"?"Trainer":"CHRO"," Portal..."]})]}),Ol=({setToken:t,setPage:s,setUserRole:a})=>{const[r,n]=l.useState(""),[i,o]=l.useState(""),[c,f]=l.useState("chro"),[u,d]=l.useState(!1),[h,m]=l.useState(""),[b,x]=l.useState(!1),j=l.useRef(null),p=l.useRef(null),v=l.useRef(null);l.useEffect(()=>{ae.timeline({defaults:{ease:"power3.out"}}).fromTo(j.current,{opacity:0,y:30,rotationX:15,scale:.9},{opacity:1,y:0,rotationX:0,scale:1,duration:.8,force3D:!0}).fromTo(p.current,{opacity:0,y:20},{opacity:1,y:0,duration:.5},"-=0.4").fromTo(v.current.children,{opacity:0,x:-20},{opacity:1,x:0,stagger:.1,duration:.5},"-=0.3")},[]);const S=async()=>{var g,C;if(!r||!i){m("Please enter email and password.");return}m(""),d(!0);try{const A=await G.post("/hrd/login",{email:r,password:i,role:c});if(A.data.success){const k=A.data.token,T=A.data.user;T.role=T.role||c,localStorage.setItem("noteorbit_token",k),localStorage.setItem("noteorbit_user",JSON.stringify(T)),d(!1),x(!0),setTimeout(()=>{t(k);const y=T.role==="trainer"||T.role==="hrd_trainer"?"Trainer":"HRD";a(y),s("hrd-dashboard")},2500)}else d(!1),m(A.data.message||"Login failed"),ae.fromTo(j.current,{x:-10},{x:10,duration:.08,repeat:6,yoyo:!0,ease:"none",clearProps:"x"})}catch(A){d(!1),console.error("Login Error:",A),m(((C=(g=A.response)==null?void 0:g.data)==null?void 0:C.message)||"Connection failed."),ae.fromTo(j.current,{x:-10},{x:10,duration:.08,repeat:6,yoyo:!0,ease:"none",clearProps:"x"})}},N="w-full flex items-center justify-center px-4 py-3 font-semibold rounded-full shadow-md transition duration-200",w="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white";return l.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),e.jsxs(e.Fragment,{children:[b&&e.jsx(Ll,{roleName:c}),e.jsx("div",{style:{perspective:"1000px"},className:"w-full max-w-lg mx-auto relative z-10 animate-in fade-in slide-in-from-right-10 duration-500",children:e.jsx("div",{ref:j,className:"relative w-full transition-all duration-500",style:{transformStyle:"preserve-3d"},children:e.jsxs("div",{className:"relative w-full bg-black/20 md:bg-slate-900/60 backdrop-blur-2xl p-8 rounded-3xl shadow-2xl border border-white/10 overflow-hidden",style:{backfaceVisibility:"hidden"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50"}),e.jsx("h3",{ref:p,className:"text-3xl font-bold mb-6 text-white text-center tracking-tight",children:"HRD Portal"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-3 text-center",children:"Select your role:"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>f("chro"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl border transition-all ${c==="chro"?"bg-purple-500/20 border-purple-500/50 text-purple-400":"bg-slate-800/50 border-white/10 text-slate-400 hover:bg-slate-800"}`,children:[e.jsx(Pa,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"CHRO"})]}),e.jsxs("button",{onClick:()=>f("trainer"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl border transition-all ${c==="trainer"?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400":"bg-slate-800/50 border-white/10 text-slate-400 hover:bg-slate-800"}`,children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Trainer"})]})]})]}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm text-center animate-in fade-in slide-in-from-top-2",children:h}),e.jsxs("div",{ref:v,className:"space-y-5",children:[e.jsx(zs,{icon:Ce,type:"email",placeholder:c==="chro"?"CHRO Email":"Trainer Email",value:r,onChange:g=>n(g.target.value)}),e.jsxs("div",{children:[e.jsx(zs,{icon:pt,type:"password",placeholder:"Password",value:i,onChange:g=>o(g.target.value)}),e.jsx("div",{className:"text-right mt-2",children:e.jsx("button",{className:"text-xs text-purple-400 hover:text-purple-300 disabled:opacity-50",disabled:!0,children:"Forgot Password?"})})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{className:`${N} flex-1 bg-slate-800 text-slate-300 hover:bg-slate-700`,onClick:()=>{s("user_type"),a(null)},disabled:u,children:[e.jsx($e,{className:"w-5 h-5 mr-1"})," Back"]}),e.jsx("button",{className:`${N} flex-1 ${w}`,onClick:S,disabled:u,children:u?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):`Sign In as ${c==="chro"?"CHRO":"Trainer"}`})]})]})]})})})]})},Il=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0),[i,o]=l.useState(""),[c,f]=l.useState(!1),[u,d]=l.useState(null),[h,m]=l.useState({name:"",sector:"",website:"",hr_name:"",hr_email:"",hr_phone:""});l.useEffect(()=>{b()},[]);const b=async()=>{try{const N=await G.get("/hrd/companies",{headers:{Authorization:`Bearer ${t}`}});a(N.data.companies||[])}catch(N){console.error("Failed to fetch companies:",N)}finally{n(!1)}},x=async N=>{N.preventDefault(),n(!0);try{u?await G.put(`/hrd/companies/${u.id}`,h,{headers:{Authorization:`Bearer ${t}`}}):await G.post("/hrd/companies",h,{headers:{Authorization:`Bearer ${t}`}}),b(),v()}catch(w){console.error("Failed to save company:",w),alert("Failed to save company")}finally{n(!1)}},j=async N=>{if(confirm("Are you sure you want to delete this company?"))try{await G.delete(`/hrd/companies/${N}`,{headers:{Authorization:`Bearer ${t}`}}),b()}catch(w){console.error("Failed to delete company:",w)}},p=N=>{d(N),m({name:N.name||"",sector:N.sector||"",website:N.website||"",hr_name:N.hr_name||"",hr_email:N.hr_email||"",hr_phone:N.hr_phone||""}),f(!0)},v=()=>{f(!1),d(null),m({name:"",sector:"",website:"",hr_name:"",hr_email:"",hr_phone:""})},S=s.filter(N=>{var w,g;return((w=N.name)==null?void 0:w.toLowerCase().includes(i.toLowerCase()))||((g=N.sector)==null?void 0:g.toLowerCase().includes(i.toLowerCase()))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Company Management"}),e.jsx("p",{className:"text-slate-400",children:"Manage recruitment companies and contacts"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg hover:shadow-indigo-500/30 transition-all flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Company"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value),placeholder:"Search companies...",className:"w-full bg-slate-900/60 backdrop-blur-xl text-white placeholder-slate-500 border border-white/10 rounded-xl py-3 pl-12 pr-4 focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 outline-none transition"})]}),r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(H,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):S.length===0?e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(ft,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No companies found"}),e.jsx("button",{onClick:()=>f(!0),className:"text-indigo-400 hover:text-indigo-300 font-semibold",children:"Add your first company"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(N=>e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-white/20 transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ft,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(N),className:"p-2 hover:bg-blue-500/10 rounded-lg transition-colors text-blue-400",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(N.id),className:"p-2 hover:bg-red-500/10 rounded-lg transition-colors text-red-400",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:N.name}),e.jsx("p",{className:"text-indigo-400 text-sm mb-4",children:N.sector||"Not specified"}),N.hr_name&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"HR Contact"}),e.jsx("p",{className:"text-slate-300",children:N.hr_name})]}),N.hr_email&&e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Email"}),e.jsx("p",{className:"text-slate-300 truncate",children:N.hr_email})]})]})]},N.id))}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:u?"Edit Company":"Add New Company"}),e.jsx("button",{onClick:v,className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Me,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Company Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:N=>m({...h,name:N.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Sector"}),e.jsx("input",{type:"text",value:h.sector,onChange:N=>m({...h,sector:N.target.value}),placeholder:"e.g., IT, Finance, Manufacturing",className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Website"}),e.jsx("input",{type:"url",value:h.website,onChange:N=>m({...h,website:N.target.value}),placeholder:"https://example.com",className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"HR Name"}),e.jsx("input",{type:"text",value:h.hr_name,onChange:N=>m({...h,hr_name:N.target.value}),className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"HR Phone"}),e.jsx("input",{type:"tel",value:h.hr_phone,onChange:N=>m({...h,hr_phone:N.target.value}),className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"HR Email"}),e.jsx("input",{type:"email",value:h.hr_email,onChange:N=>m({...h,hr_email:N.target.value}),className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500/50 outline-none"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:v,className:"flex-1 bg-slate-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[r?e.jsx(H,{className:"w-5 h-5 animate-spin"}):e.jsx(Se,{className:"w-5 h-5"}),e.jsx("span",{children:u?"Update":"Create"})]})]})]})]})})]})},Bl=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState([]),[i,o]=l.useState(!0),[c,f]=l.useState(!1),[u,d]=l.useState(!1),[h,m]=l.useState(null),[b,x]=l.useState([]),[j,p]=l.useState({company_id:"",title:"",role:"",description:"",ctc_min:"",ctc_max:"",location:"",drive_type:"on_campus",eligibility_criteria:{cgpa_min:"",branches:[],max_backlogs:"",year:4},application_start:"",application_end:""});l.useEffect(()=>{v(),S()},[]);const v=async()=>{try{const A=await G.get("/hrd/drives",{headers:{Authorization:`Bearer ${t}`}});a(A.data.drives||[])}catch(A){console.error("Failed to fetch drives:",A)}finally{o(!1)}},S=async()=>{try{const A=await G.get("/hrd/companies",{headers:{Authorization:`Bearer ${t}`}});n(A.data.companies||[])}catch(A){console.error("Failed to fetch companies:",A)}},N=async A=>{try{const k=await G.get(`/hrd/drives/${A}`,{headers:{Authorization:`Bearer ${t}`}});m(k.data.drive),x(k.data.applicants||[]),d(!0)}catch(k){console.error("Failed to fetch drive details:",k)}},w=async A=>{A.preventDefault(),o(!0);try{await G.post("/hrd/drives",j,{headers:{Authorization:`Bearer ${t}`}}),v(),g()}catch(k){console.error("Failed to create drive:",k),alert("Failed to create drive")}finally{o(!1)}},g=()=>{f(!1),p({company_id:"",title:"",role:"",description:"",ctc_min:"",ctc_max:"",location:"",drive_type:"on_campus",eligibility_criteria:{cgpa_min:"",branches:[],max_backlogs:"",year:4},application_start:"",application_end:""})},C=({status:A})=>{const k={open:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",closed:"bg-red-500/20 text-red-400 border-red-500/30",completed:"bg-blue-500/20 text-blue-400 border-blue-500/30"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${k[A]||k.open}`,children:A==null?void 0:A.toUpperCase()})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Placement Drives"}),e.jsx("p",{className:"text-slate-400",children:"Manage placement drives and track applications"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg hover:shadow-emerald-500/30 transition-all flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Drive"})]})]}),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(H,{className:"w-12 h-12 text-emerald-500 animate-spin"})}):s.length===0?e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No drives created yet"}),e.jsx("button",{onClick:()=>f(!0),className:"text-emerald-400 hover:text-emerald-300 font-semibold",children:"Create your first drive"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(A=>e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-white/20 transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:A.title}),e.jsx("p",{className:"text-emerald-400 text-sm",children:A.company_name})]}),e.jsx(C,{status:A.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{children:A.role})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsxs("span",{children:[A.ctc_min," - ",A.ctc_max," LPA"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:A.location||"Multiple Locations"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsxs("span",{children:[A.applicant_count||0," Applicants"]})]})]}),e.jsxs("button",{onClick:()=>N(A.id),className:"w-full bg-emerald-500/10 text-emerald-400 px-4 py-2 rounded-xl font-semibold hover:bg-emerald-500/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{children:"View Details"})]})]},A.id))}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-8 w-full max-w-3xl my-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create Placement Drive"}),e.jsx("button",{onClick:g,className:"text-slate-400 hover:text-white",children:e.jsx(Me,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Company *"}),e.jsxs("select",{value:j.company_id,onChange:A=>p({...j,company_id:A.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500/50 outline-none",children:[e.jsx("option",{value:"",children:"Select Company"}),r.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Role *"}),e.jsx("input",{type:"text",value:j.role,onChange:A=>p({...j,role:A.target.value}),required:!0,placeholder:"e.g., Software Engineer",className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500/50 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Drive Title *"}),e.jsx("input",{type:"text",value:j.title,onChange:A=>p({...j,title:A.target.value}),required:!0,placeholder:"e.g., Campus Recruitment 2024",className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500/50 outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Min CTC (LPA) *"}),e.jsx("input",{type:"number",step:"0.1",value:j.ctc_min,onChange:A=>p({...j,ctc_min:A.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500/50 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Max CTC (LPA) *"}),e.jsx("input",{type:"number",step:"0.1",value:j.ctc_max,onChange:A=>p({...j,ctc_max:A.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-emerald-500/50 outline-none"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:g,className:"flex-1 bg-slate-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[i?e.jsx(H,{className:"w-5 h-5 animate-spin"}):e.jsx(Se,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Drive"})]})]})]})]})}),u&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-8 w-full max-w-4xl my-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:h.title}),e.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-white",children:e.jsx(Me,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Applicants (",b.length,")"]}),b.length===0?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"No applicants yet"}):e.jsx("div",{className:"space-y-3",children:b.map(A=>e.jsxs("div",{className:"bg-slate-800/50 border border-white/10 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:A.student_name}),e.jsx("p",{className:"text-slate-400 text-sm",children:A.student_email})]}),e.jsx(C,{status:A.status})]},A.id))})]})]})})]})},Ul=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState([]),[i,o]=l.useState([]),[c,f]=l.useState(!0),[u,d]=l.useState(!1),[h,m]=l.useState("all"),[b,x]=l.useState({drive_id:"",student_id:"",role:"",ctc:"",location:"",joining_date:""});l.useEffect(()=>{j(),p()},[]);const j=async()=>{try{const g=await G.get("/hrd/offers",{headers:{Authorization:`Bearer ${t}`}});a(g.data.offers||[])}catch(g){console.error("Failed to fetch offers:",g)}finally{f(!1)}},p=async()=>{try{const g=await G.get("/hrd/drives",{headers:{Authorization:`Bearer ${t}`}});n(g.data.drives||[])}catch(g){console.error("Failed to fetch drives:",g)}},v=async g=>{g.preventDefault(),f(!0);try{await G.post("/hrd/offers",b,{headers:{Authorization:`Bearer ${t}`}}),j(),S(),alert("Offer created and student notified via email!")}catch(C){console.error("Failed to create offer:",C),alert("Failed to create offer")}finally{f(!1)}},S=()=>{d(!1),x({drive_id:"",student_id:"",role:"",ctc:"",location:"",joining_date:""})},N=({status:g})=>{const C={pending:{color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",icon:os},accepted:{color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",icon:Qe},rejected:{color:"bg-red-500/20 text-red-400 border-red-500/30",icon:Ie}},{color:A,icon:k}=C[g]||C.pending;return e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${A} flex items-center gap-1`,children:[e.jsx(k,{className:"w-3 h-3"}),g==null?void 0:g.toUpperCase()]})},w=s.filter(g=>h==="all"||g.status===h);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Offer Management"}),e.jsx("p",{className:"text-slate-400",children:"Create and track placement offers"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg hover:shadow-purple-500/30 transition-all flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Offer"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","pending","accepted","rejected"].map(g=>e.jsxs("button",{onClick:()=>m(g),className:`px-4 py-2 rounded-xl font-semibold text-sm whitespace-nowrap transition-all ${h===g?"bg-purple-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[g.charAt(0).toUpperCase()+g.slice(1),g!=="all"&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-white/10 rounded-full",children:s.filter(C=>C.status===g).length})]},g))}),c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(H,{className:"w-12 h-12 text-purple-500 animate-spin"})}):w.length===0?e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Fe,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No offers found"}),h==="all"&&e.jsx("button",{onClick:()=>d(!0),className:"text-purple-400 hover:text-purple-300 font-semibold",children:"Create your first offer"})]}):e.jsx("div",{className:"space-y-4",children:w.map(g=>e.jsx("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-white/20 transition-all",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-lg",children:g.student_name}),e.jsx("p",{className:"text-slate-400 text-sm",children:g.student_email})]}),e.jsx(N,{status:g.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Fe,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-slate-300",children:g.role})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(We,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-slate-300",children:[g.ctc," LPA"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(gt,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-slate-300",children:g.location||"TBD"})]})]})]})})},g.id))}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-8 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create Placement Offer"}),e.jsx("button",{onClick:S,className:"text-slate-400 hover:text-white",children:e.jsx(Me,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Placement Drive *"}),e.jsxs("select",{value:b.drive_id,onChange:g=>x({...b,drive_id:g.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-purple-500/50 outline-none",children:[e.jsx("option",{value:"",children:"Select Drive"}),r.map(g=>e.jsxs("option",{value:g.id,children:[g.title," - ",g.company_name]},g.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"Role *"}),e.jsx("input",{type:"text",value:b.role,onChange:g=>x({...b,role:g.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-purple-500/50 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-slate-300 mb-2 font-medium",children:"CTC (LPA) *"}),e.jsx("input",{type:"number",step:"0.1",value:b.ctc,onChange:g=>x({...b,ctc:g.target.value}),required:!0,className:"w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-purple-500/50 outline-none"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:S,className:"flex-1 bg-slate-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-slate-700 transition-all",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:c,className:"flex-1 bg-gradient-to-r from-purple-500 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[c?e.jsx(H,{className:"w-5 h-5 animate-spin"}):e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Create & Send"})]})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"Student will be automatically notified via email"})]})})]})},zl=({token:t,studentId:s,onClose:a})=>{var f,u,d,h,m,b,x,j,p,v,S;const[r,n]=l.useState(null),[i,o]=l.useState(!0);l.useEffect(()=>{s&&c()},[s]);const c=async()=>{try{const N=await G.get(`/hrd/student/${s}/neural-profile`,{headers:{Authorization:`Bearer ${t}`}});N.data.success&&n(N.data.neural_profile)}catch(N){console.error(N)}finally{o(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-slate-900 border-b border-white/10 p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(fs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Neural Profile"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"AI-Powered Student Analysis"})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-lg transition",children:e.jsx(Me,{className:"w-5 h-5 text-slate-400"})})]}),e.jsx("div",{className:"p-6",children:i?e.jsx("div",{className:"py-12 text-center",children:e.jsx(H,{className:"animate-spin w-8 h-8 text-purple-400 mx-auto"})}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 text-2xl font-bold",children:(f=r.name)==null?void 0:f.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:r.name}),e.jsxs("p",{className:"text-slate-400",children:[r.srn,"  ",r.section]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-purple-400 mb-3 flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"})," AI Readiness Score"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-white",children:[((u=r.ai_insights)==null?void 0:u.readiness_score)||0,"%"]}),((d=r.ai_insights)==null?void 0:d.readiness_score)>=80&&e.jsx("div",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 rounded-lg text-xs font-bold animate-pulse",children:"Placement Ready"}),e.jsxs("p",{className:"text-slate-300 text-sm flex-1",children:[((h=r.ai_insights)==null?void 0:h.summary)||"No insights available",((m=r.ai_insights)==null?void 0:m.tech_focus)&&e.jsxs("span",{className:"block mt-2 text-indigo-400 font-semibold",children:["Primary Focus: ",r.ai_insights.tech_focus]})]})]}),((x=(b=r.ai_insights)==null?void 0:b.tags)==null?void 0:x.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:r.ai_insights.tags.map((N,w)=>e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 rounded-full text-xs",children:N},w))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-400 mb-3 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"})," Skills Matrix"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(r.skills_matrix||[]).map((N,w)=>e.jsx("span",{className:"px-3 py-1.5 bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 rounded-lg text-sm",children:N},w)),(!r.skills_matrix||r.skills_matrix.length===0)&&e.jsx("span",{className:"text-slate-500 text-sm",children:"No skills recorded"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-400 mb-3 flex items-center gap-2",children:[e.jsx(Dt,{className:"w-4 h-4"})," Attendance Metrics"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-emerald-400",children:[((j=r.attendance_metrics)==null?void 0:j.percentage)||0,"%"]}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Overall"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:((p=r.attendance_metrics)==null?void 0:p.present_count)||0}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Present"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-400",children:((v=r.attendance_metrics)==null?void 0:v.absent_count)||0}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Absent"})]})]})]}),((S=r.academic_performance)==null?void 0:S.length)>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-400 mb-3 flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"})," Academic Performance"]}),e.jsx("div",{className:"space-y-2",children:r.academic_performance.map((N,w)=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 rounded-lg p-3",children:[e.jsx("span",{className:"text-white",children:N.subject}),e.jsx("span",{className:"text-cyan-400 font-medium",children:N.marks})]},w))})]}),r.resume_url&&e.jsx("a",{href:r.resume_url,target:"_blank",rel:"noopener noreferrer",className:"block text-center py-3 bg-purple-500/20 text-purple-400 rounded-xl border border-purple-500/30 hover:bg-purple-500/30 transition",children:"View Resume "})]}):e.jsx("div",{className:"py-12 text-center text-slate-400",children:"Could not load profile data."})})]})}):null},ga=({token:t,allocation:s,catalogs:a})=>{const[r,n]=l.useState([]),[i,o]=l.useState(!0),[c,f]=l.useState(""),[u,d]=l.useState(null),[h,m]=l.useState(""),[b,x]=l.useState(""),[j,p]=l.useState(""),[v,S]=l.useState([]),N=(a==null?void 0:a.degrees)||[];l.useEffect(()=>{w()},[s]),l.useEffect(()=>{h&&b&&(a!=null&&a.fetchSections)?a.fetchSections(h,parseInt(b)).then(k=>{S(k||[]),j&&!(k!=null&&k.includes(j))&&p("")}):(S([]),p(""))},[h,b]);const w=async()=>{o(!0);try{let k="/hrd/students";s&&(k+=`?allocation_id=${s.id}`);const T=await G.get(k,{headers:{Authorization:`Bearer ${t}`}});T.data.success&&n(T.data.students||[])}catch(k){console.error(k)}finally{o(!1)}},g=()=>{m(""),x(""),p(""),f("")},C=h||b||j||c,A=C?r.filter(k=>{var q,_;const T=!c||k.name.toLowerCase().includes(c.toLowerCase())||((q=k.srn)==null?void 0:q.toLowerCase().includes(c.toLowerCase())),y=!h||((_=k.degree)==null?void 0:_.toLowerCase())===h.toLowerCase(),$=!b||String(k.semester)===b,D=!j||k.section===j;return T&&y&&$&&D}):[];return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(qe,{className:"w-6 h-6 text-indigo-400"})," Student Directory"]}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:s?`Students in ${s.subject_name} (Section ${s.section})`:`Showing ${A.length} of ${r.length} students`})]}),C&&e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 text-sm text-amber-400 bg-amber-500/10 border border-amber-500/20 rounded-xl hover:bg-amber-500/20 transition-colors self-start md:self-center",children:[e.jsx(Me,{className:"w-4 h-4"})," Clear Filters"]})]}),!s&&e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-400",children:[e.jsx(Zt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter Students"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Degree"}),e.jsxs("select",{value:h,onChange:k=>m(k.target.value),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Degrees"}),N.map(k=>e.jsx("option",{value:k,children:k},k))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Semester"}),e.jsxs("select",{value:b,onChange:k=>x(k.target.value),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Semesters"}),[1,2,3,4,5,6,7,8].map(k=>e.jsxs("option",{value:k,children:["Semester ",k]},k))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Section"}),e.jsxs("select",{value:j,onChange:k=>p(k.target.value),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:v.length===0,children:[e.jsx("option",{value:"",children:"All Sections"}),v.map(k=>e.jsxs("option",{value:k,children:["Section ",k]},k))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{placeholder:"Name or SRN...",className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 pl-10 text-white text-sm placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",value:c,onChange:k=>f(k.target.value)})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl overflow-hidden shadow-2xl",children:[s&&e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center gap-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-slate-500"}),e.jsx("input",{placeholder:"Search student...",className:"bg-transparent border-none outline-none text-white w-full placeholder-slate-600",value:c,onChange:k=>f(k.target.value)})]}),i?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-indigo-400"})}):e.jsxs("div",{className:"max-h-[600px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-900/80 text-slate-400 text-xs uppercase tracking-wider font-bold sticky top-0 backdrop-blur-md z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b border-white/5",children:"Student"}),e.jsx("th",{className:"p-4 border-b border-white/5",children:"SRN"}),!s&&e.jsx("th",{className:"p-4 border-b border-white/5",children:"Degree"}),e.jsx("th",{className:"p-4 text-center border-b border-white/5",children:"Sem"}),!s&&e.jsx("th",{className:"p-4 text-center border-b border-white/5",children:"Sec"}),e.jsx("th",{className:"p-4 text-right border-b border-white/5",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:A.map(k=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsxs("td",{className:"p-4 font-medium text-white flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-lg",children:k.name.substring(0,2).toUpperCase()}),k.name]}),e.jsx("td",{className:"p-4 text-slate-300 font-mono text-xs",children:k.srn}),!s&&e.jsx("td",{className:"p-4 text-slate-400 text-sm",children:k.degree}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"px-2 py-0.5 bg-slate-800 rounded text-xs text-slate-400 border border-white/5",children:k.semester})}),!s&&e.jsx("td",{className:"p-4 text-center text-slate-400 text-sm",children:k.section}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>d(k.id),className:"px-3 py-1.5 bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 rounded-lg text-xs font-semibold border border-indigo-500/20 transition-all opacity-80 group-hover:opacity-100",children:"Neural Profile"})})]},k.id))})]}),A.length===0&&e.jsx("div",{className:"p-16 text-center",children:C?e.jsx("p",{className:"text-slate-500 font-medium",children:"No students match the current filters."}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Zt,{className:"w-10 h-10 mx-auto text-slate-600"}),e.jsx("p",{className:"text-slate-400 font-medium",children:"Use the filters above"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Select a Degree, Semester, or Section to view students."})]})})]})]}),u&&e.jsx(zl,{token:t,studentId:u,onClose:()=>d(null)})]})},Hl=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0),[i,o]=l.useState(!1),[c,f]=l.useState({name:"",semester:1}),[u,d]=l.useState(!1),[h,m]=l.useState(null);l.useEffect(()=>{b()},[]);const b=async()=>{try{const p=await G.get("/hrd/chro/subjects",{headers:{Authorization:`Bearer ${t}`}});p.data.success&&a(p.data.subjects||[])}catch(p){console.error(p)}finally{n(!1)}},x=async p=>{if(window.confirm("Are you sure you want to delete this subject? This will also remove all trainer allocations for it.")){m(p);try{(await G.delete("/hrd/chro/subjects",{data:{subject_id:p},headers:{Authorization:`Bearer ${t}`}})).data.success&&b()}catch(v){console.error(v)}finally{m(null)}}},j=async()=>{d(!0);try{(await G.post("/hrd/chro/subjects",c,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(b(),o(!1),f({name:"",semester:1}))}catch(p){console.error(p)}finally{d(!1)}};return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-purple-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(Te,{className:"w-6 h-6 text-purple-400"})," HRD Subjects"]}),e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-purple-500/20 text-purple-400 rounded-xl border border-purple-500/30 hover:bg-purple-500/30 transition flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"})," Add Subject"]})]}),i&&e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"New Subject"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Subject Name"}),e.jsx("input",{value:c.name,onChange:p=>f(v=>({...v,name:p.target.value})),placeholder:"e.g. Life Skills",className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Semester"}),e.jsx("select",{value:c.semester,onChange:p=>f(v=>({...v,semester:parseInt(p.target.value)})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white",children:[1,2,3,4,5,6,7,8].map(p=>e.jsxs("option",{value:p,children:["Semester ",p]},p))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:j,disabled:!c.name||u,className:"px-6 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition disabled:opacity-50",children:u?e.jsx(H,{className:"animate-spin w-4 h-4"}):"Create"}),e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 text-slate-400 hover:text-white",children:"Cancel"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(p=>e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5 relative group",children:[e.jsx("button",{onClick:()=>x(p.id),disabled:h===p.id,className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:h===p.id?e.jsx(H,{className:"w-4 h-4 animate-spin"}):e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center mb-3",children:e.jsx(Te,{className:"w-5 h-5 text-purple-400"})})}),e.jsx("h3",{className:"text-white font-bold",children:p.name}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Semester ",p.semester]})]},p.id))}),s.length===0&&!i&&e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Te,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"No subjects configured. Add one to get started."})]})]})},ql=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0),[i,o]=l.useState(!1),[c,f]=l.useState({name:"",email:"",password:"",emp_id:""}),[u,d]=l.useState(!1),[h,m]=l.useState(null);l.useEffect(()=>{b()},[]);const b=async()=>{try{const p=await G.get("/hrd/chro/trainers",{headers:{Authorization:`Bearer ${t}`}});p.data.success&&a(p.data.trainers||[])}catch(p){console.error(p)}finally{n(!1)}},x=async p=>{if(window.confirm("Are you sure you want to delete this trainer? This will also remove all their workload allocations.")){m(p);try{(await G.delete("/hrd/chro/trainers",{data:{trainer_id:p},headers:{Authorization:`Bearer ${t}`}})).data.success&&b()}catch(v){console.error(v)}finally{m(null)}}},j=async()=>{d(!0);try{(await G.post("/hrd/chro/trainers",c,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(b(),o(!1),f({name:"",email:"",password:"",emp_id:""}))}catch(p){console.error(p)}finally{d(!1)}};return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-purple-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(qe,{className:"w-6 h-6 text-purple-400"})," Trainers"]}),e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-purple-500/20 text-purple-400 rounded-xl border border-purple-500/30 hover:bg-purple-500/30 transition flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"})," Onboard Trainer"]})]}),i&&e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Onboard New Trainer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Full Name"}),e.jsx("input",{value:c.name,onChange:p=>f(v=>({...v,name:p.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Email"}),e.jsx("input",{type:"email",value:c.email,onChange:p=>f(v=>({...v,email:p.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Employee ID"}),e.jsx("input",{value:c.emp_id,onChange:p=>f(v=>({...v,emp_id:p.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Password"}),e.jsx("input",{type:"password",value:c.password,onChange:p=>f(v=>({...v,password:p.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:j,disabled:!c.name||!c.email||u,className:"px-6 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition disabled:opacity-50",children:u?e.jsx(H,{className:"animate-spin w-4 h-4"}):"Create"}),e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 text-slate-400 hover:text-white",children:"Cancel"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(p=>{var v;return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5 relative group",children:[e.jsx("button",{onClick:()=>x(p.id),disabled:h===p.id,className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:h===p.id?e.jsx(H,{className:"w-4 h-4 animate-spin"}):e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center mb-3 text-purple-400 font-bold",children:(v=p.name)==null?void 0:v.substring(0,2).toUpperCase()}),e.jsx("h3",{className:"text-white font-bold",children:p.name}),e.jsxs("p",{className:"text-slate-400 text-sm flex items-center gap-1 mt-1",children:[e.jsx(Ce,{className:"w-3 h-3"})," ",p.email]})]},p.id)})}),s.length===0&&!i&&e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(qe,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"No trainers onboarded. Add your first trainer."})]})]})},Vl=({token:t,catalogs:s})=>{const{degrees:a,fetchSections:r}=s,[n,i]=l.useState([]),[o,c]=l.useState([]),[f,u]=l.useState([]),[d,h]=l.useState(!0),[m,b]=l.useState(!1),[x,j]=l.useState({trainer_id:"",hrd_subject_id:"",degree:"",semester:1}),[p,v]=l.useState([]),[S,N]=l.useState([]),[w,g]=l.useState(!1);l.useEffect(()=>{C(),a&&a.length>0&&!x.degree&&j(y=>({...y,degree:a[0]}))},[a]),l.useEffect(()=>{x.degree&&x.semester&&r&&r(x.degree,x.semester).then(y=>{v(y||[]),N([])})},[x.degree,x.semester,r]);const C=async()=>{try{const[y,$,D]=await Promise.all([G.get("/hrd/allocations",{headers:{Authorization:`Bearer ${t}`}}),G.get("/hrd/chro/trainers",{headers:{Authorization:`Bearer ${t}`}}),G.get("/hrd/chro/subjects",{headers:{Authorization:`Bearer ${t}`}})]);i(y.data.allocations||[]),c($.data.trainers||[]),u(D.data.subjects||[])}catch(y){console.error(y)}finally{h(!1)}},A=y=>{N($=>$.includes(y)?$.filter(D=>D!==y):[...$,y])},k=async()=>{if(!x.degree||S.length===0){alert("Please ensure Degree and at least one Section are selected.");return}g(!0);try{await G.post("/hrd/chro/allocate",{...x,sections:S},{headers:{Authorization:`Bearer ${t}`}}),C(),b(!1),N([])}catch(y){console.error(y)}finally{g(!1)}},T=async y=>{if(window.confirm("Are you sure you want to remove this allocation?"))try{await G.delete(`/hrd/chro/deallocate/${y}`,{headers:{Authorization:`Bearer ${t}`}}),C()}catch($){console.error($)}};return d?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-purple-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(gt,{className:"w-6 h-6 text-purple-400"})," Workload Allocation"]}),e.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-purple-500/20 text-purple-400 rounded-xl border border-purple-500/30 hover:bg-purple-500/30 transition flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"})," New Allocation"]})]}),m&&e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Assign Trainer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Trainer"}),e.jsxs("select",{value:x.trainer_id,onChange:y=>j($=>({...$,trainer_id:y.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white",children:[e.jsx("option",{value:"",children:"Select..."}),o.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Subject"}),e.jsxs("select",{value:x.hrd_subject_id,onChange:y=>j($=>({...$,hrd_subject_id:y.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white",children:[e.jsx("option",{value:"",children:"Select..."}),f.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Degree"}),e.jsx("select",{value:x.degree,onChange:y=>j($=>({...$,degree:y.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:a.map(y=>e.jsx("option",{value:y,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Semester"}),e.jsx("select",{value:x.semester,onChange:y=>j($=>({...$,semester:parseInt(y.target.value)})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[1,2,3,4,5,6,7,8].map(y=>e.jsx("option",{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-3 block",children:"Select Sections"}),p.length>0?e.jsx("div",{className:"flex flex-wrap gap-3",children:p.map(y=>e.jsxs("button",{onClick:()=>A(y),className:`px-4 py-2 rounded-xl border transition-all ${S.includes(y)?"bg-purple-500 text-white border-purple-500 shadow-lg shadow-purple-500/20":"bg-slate-800/50 border-white/10 text-slate-400 hover:border-white/20"}`,children:["Section ",y]},y))}):e.jsx("p",{className:"text-amber-400 text-sm",children:"No sections found for the selected Degree/Semester."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:k,disabled:!x.trainer_id||!x.hrd_subject_id||S.length===0||w,className:"px-6 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition disabled:opacity-50",children:w?e.jsx(H,{className:"animate-spin w-4 h-4"}):"Assign Capacity"}),e.jsx("button",{onClick:()=>b(!1),className:"px-6 py-2 text-slate-400 hover:text-white",children:"Cancel"})]})]})||null,e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl overflow-hidden shadow-2xl",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-900/80 text-slate-400 text-xs uppercase tracking-wider font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b border-white/5",children:"Trainer"}),e.jsx("th",{className:"p-4 border-b border-white/5",children:"Subject"}),e.jsx("th",{className:"p-4 border-b border-white/5 text-center",children:"Batch Details"}),e.jsx("th",{className:"p-4 border-b border-white/5 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(y=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"text-white font-semibold",children:y.trainer_name}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase mt-0.5 tracking-tighter",children:"Certified Professional"})]}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"text-slate-200",children:y.subject_name})}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("span",{className:"px-2 py-1 bg-slate-800 rounded text-xs text-slate-400 border border-white/5",children:[y.degree,"  Sem ",y.semester,"  Sec ",y.section]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>T(y.id),className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:e.jsx(Ae,{className:"w-5 h-5"})})})]},y.id))})]}),n.length===0&&e.jsx("div",{className:"p-16 text-center text-slate-500 font-medium",children:"No workload allocations found. Start by assigning a trainer."})]})]})},Ml=({token:t,driveId:s})=>{const[a,r]=l.useState([]),[n,i]=l.useState(!0),[o,c]=l.useState(""),[f,u]=l.useState(!1);l.useEffect(()=>{s&&d()},[s]);const d=async()=>{try{const m=await G.get(`/hrd/drives/${s}/rounds`,{headers:{Authorization:`Bearer ${t}`}});m.data.success&&r(m.data.rounds||[])}catch(m){console.error(m)}finally{i(!1)}},h=async()=>{if(o.trim()){u(!0);try{await G.post(`/hrd/drives/${s}/rounds`,{name:o},{headers:{Authorization:`Bearer ${t}`}}),c(""),d()}catch(m){console.error(m)}finally{u(!1)}}};return s?n?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-purple-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(es,{className:"w-6 h-6 text-purple-400"})," Interview Rounds"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{placeholder:"Round name (e.g. Aptitude, Coding, HR)",value:o,onChange:m=>c(m.target.value),className:"flex-1 bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"}),e.jsxs("button",{onClick:h,disabled:!o.trim()||f,className:"px-6 py-3 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition disabled:opacity-50 flex items-center gap-2",children:[f?e.jsx(H,{className:"animate-spin w-4 h-4"}):e.jsx(Le,{className:"w-4 h-4"})," Add Round"]})]}),e.jsx("div",{className:"space-y-3",children:a.map((m,b)=>e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-xl p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold",children:b+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium",children:m.name}),e.jsx("p",{className:"text-slate-500 text-xs",children:m.date?new Date(m.date).toLocaleDateString():"No date set"})]})]},m.id))}),a.length===0&&e.jsx("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:e.jsx("p",{className:"text-slate-400",children:"No rounds configured. Add interview stages above."})})]}):e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(es,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Select a drive from Drive Management to configure rounds."})]})},Wl=({token:t})=>{const[s,a]=l.useState(null),[r,n]=l.useState(!0);l.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await G.get("/hrd/analytics/overview",{headers:{Authorization:`Bearer ${t}`}});c.data.success&&a(c.data.metrics)}catch(c){console.error(c)}finally{n(!1)}};if(r)return e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-purple-400"})});const o=[{label:"Total Students",value:(s==null?void 0:s.total_students)||0,icon:qe,color:"from-blue-500 to-cyan-500",bg:"bg-blue-500/20"},{label:"Placed Students",value:(s==null?void 0:s.placed_students)||0,icon:Ye,color:"from-emerald-500 to-green-500",bg:"bg-emerald-500/20"},{label:"Active Drives",value:(s==null?void 0:s.active_drives)||0,icon:Oe,color:"from-purple-500 to-pink-500",bg:"bg-purple-500/20"},{label:"Placement %",value:`${(s==null?void 0:s.placement_percentage)||0}%`,icon:Ta,color:"from-orange-500 to-red-500",bg:"bg-orange-500/20"}];return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ft,{className:"w-6 h-6 text-purple-400"})," Analytics Overview"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Real-time placement and training metrics"})]}),(s==null?void 0:s.ai_summary)&&e.jsxs("div",{className:"relative overflow-hidden bg-slate-900/40 border border-purple-500/30 rounded-3xl p-6 md:p-8 animate-in zoom-in-95 duration-700",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/10 blur-[100px] pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-6 items-start",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center shrink-0 shadow-lg shadow-purple-500/20",children:e.jsx(He,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 rounded text-[10px] font-bold uppercase tracking-wider border border-purple-500/30",children:"Groq AI Strategic Insight"})}),e.jsxs("p",{className:"text-xl md:text-2xl font-medium text-white leading-relaxed",children:['"',s.ai_summary,'"']})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((c,f)=>{const u=c.icon;return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 group hover:border-white/20 transition",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${c.bg} flex items-center justify-center mb-4`,children:e.jsx(u,{className:"w-6 h-6 text-white"})}),e.jsx("p",{className:"text-slate-400 text-sm",children:c.label}),e.jsx("p",{className:`text-3xl font-bold bg-gradient-to-r ${c.color} bg-clip-text text-transparent mt-1`,children:c.value})]},f)})}),e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("button",{className:"p-4 bg-slate-800/50 rounded-xl text-slate-300 hover:text-white hover:bg-slate-800 transition text-sm",children:" Export Report"}),e.jsx("button",{className:"p-4 bg-slate-800/50 rounded-xl text-slate-300 hover:text-white hover:bg-slate-800 transition text-sm",children:" Email Students"}),e.jsx("button",{className:"p-4 bg-slate-800/50 rounded-xl text-slate-300 hover:text-white hover:bg-slate-800 transition text-sm",children:" Schedule Drive"}),e.jsx("button",{className:"p-4 bg-slate-800/50 rounded-xl text-slate-300 hover:text-white hover:bg-slate-800 transition text-sm",children:" Send Reminder"})]})]})]})},Kl=()=>e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-10 h-10 bg-gradient-to-tr from-purple-600 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20 ring-1 ring-white/10",children:[e.jsx(pe,{className:"w-5 h-5 text-white stroke-[2.5]"}),e.jsx("div",{className:"absolute top-0 right-0 -mr-1 -mt-1 w-3 h-3 bg-amber-400 rounded-full border-2 border-slate-950"})]}),e.jsxs("span",{className:"text-xl font-bold text-white tracking-tight",children:["Note",e.jsx("span",{className:"font-light text-purple-200",children:"Orbit"})]})]}),Jl=({token:t,setPage:s,setToken:a,catalogs:r})=>{const[n,i]=l.useState("analytics"),[o,c]=l.useState(null),f=l.useRef(null),u=l.useRef(null),d=l.useRef(null),h=()=>{localStorage.removeItem("noteorbit_token"),localStorage.removeItem("noteorbit_user"),a(null),s("login")},m=[{id:"analytics",label:"Analytics",icon:Ft,color:"purple"},{id:"companies",label:"Companies",icon:ft,color:"purple"},{id:"drives",label:"Drives",icon:Oe,color:"purple"},{id:"rounds",label:"Interview Rounds",icon:Ye,color:"purple"},{id:"offers",label:"Offers",icon:Ye,color:"purple"},{id:"subjects",label:"Subjects",icon:Te,color:"purple"},{id:"trainers",label:"Trainers",icon:qe,color:"purple"},{id:"allocations",label:"Workload Map",icon:gt,color:"purple"},{id:"students",label:"Students",icon:qe,color:"purple"}];l.useEffect(()=>{if(f.current&&u.current){const x=f.current.querySelector(`button[data-key="${n}"]`);x&&ae.to(u.current,{y:x.offsetTop,height:x.offsetHeight,opacity:1,duration:.5,ease:"elastic.out(1, 0.6)"})}d.current&&ae.fromTo(d.current,{opacity:0,x:20},{opacity:1,x:0,duration:.4,ease:"power2.out"})},[n]);const b=()=>{switch(n){case"analytics":return e.jsx(Wl,{token:t});case"companies":return e.jsx(Il,{token:t});case"drives":return e.jsx(Bl,{token:t});case"rounds":return e.jsx(Ml,{token:t,driveId:o});case"offers":return e.jsx(Ul,{token:t});case"subjects":return e.jsx(Hl,{token:t});case"trainers":return e.jsx(ql,{token:t});case"allocations":return e.jsx(Vl,{token:t,catalogs:r});case"students":return e.jsx(ga,{token:t,catalogs:r});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950/20 to-slate-950",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-4 md:p-6",children:[e.jsxs("div",{className:"w-full md:w-64 bg-slate-900/60 backdrop-blur-xl p-5 rounded-2xl shadow-2xl border border-white/10 flex-shrink-0 animate-in slide-in-from-left-4 duration-500",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Kl,{}),e.jsx("p",{className:"text-xs text-slate-500 mt-2 ml-1",children:"CHRO Command Center"})]}),e.jsxs("nav",{className:"space-y-1 relative hidden md:block",ref:f,children:[e.jsx("div",{ref:u,className:"absolute left-0 top-0 w-full bg-purple-600/20 border border-purple-500/30 rounded-xl shadow-[0_0_15px_rgba(147,51,234,0.2)] pointer-events-none opacity-0 z-0",style:{height:0}}),m.map(x=>e.jsxs("button",{"data-key":x.id,onClick:()=>i(x.id),className:`w-full flex items-center p-3 rounded-xl font-semibold transition-colors duration-200 relative z-10 ${n===x.id?"text-purple-300":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(x.icon,{className:"w-5 h-5 mr-3"}),x.label]},x.id))]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-400 pointer-events-none"}),e.jsx("select",{value:n,onChange:x=>i(x.target.value),className:"w-full bg-slate-800/80 border border-purple-500/30 rounded-xl py-3 pl-10 pr-4 text-white appearance-none outline-none focus:ring-2 focus:ring-purple-500/50 shadow-lg font-semibold",children:m.map(x=>e.jsx("option",{value:x.id,className:"bg-slate-900 text-white py-2",children:x.label},x.id))}),e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})}),e.jsxs("button",{onClick:h,className:"mt-6 w-full flex items-center justify-center gap-2 text-slate-500 hover:text-red-400 transition text-sm py-2.5 rounded-xl hover:bg-red-500/10 border border-transparent hover:border-red-500/20",children:[e.jsx(ds,{className:"w-4 h-4"})," Logout"]})]}),e.jsxs("div",{ref:d,className:"flex-1 min-h-[600px] bg-slate-900/60 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/5 rounded-full blur-3xl pointer-events-none"}),b()]})]})})},Gl=({token:t,classes:s})=>{const[a,r]=l.useState(null),[n,i]=l.useState([]),[o,c]=l.useState({}),[f,u]=l.useState(new Date().toISOString().split("T")[0]),[d,h]=l.useState(!1),[m,b]=l.useState(!1);l.useEffect(()=>{a&&x()},[a]);const x=async()=>{h(!0);try{const S=await G.get(`/hrd/students?allocation_id=${a.id}`,{headers:{Authorization:`Bearer ${t}`}});if(S.data.success){const N=S.data.students||[];i(N);const w={};N.forEach(g=>w[g.id]="Absent"),c(w)}}catch(S){console.error(S)}finally{h(!1)}},j=S=>{c(N=>({...N,[S]:N[S]==="Present"?"Absent":"Present"}))},p=()=>{const S={};n.forEach(N=>S[N.id]="Present"),c(S)},v=async()=>{b(!0);try{const S={hrd_subject_id:a.subject_id,date:f,attendance:Object.entries(o).map(([N,w])=>({student_id:parseInt(N),status:w}))};await G.post("/hrd/trainer/attendance",S,{headers:{Authorization:`Bearer ${t}`}})}catch(S){console.error(S)}finally{b(!1)}};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(ye,{className:"w-6 h-6 text-indigo-400"})," Bulk Attendance"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Select Class"}),e.jsxs("select",{value:(a==null?void 0:a.id)||"",onChange:S=>r(s.find(N=>N.id===parseInt(S.target.value))),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white",children:[e.jsx("option",{value:"",children:"Choose..."}),s.map(S=>e.jsxs("option",{value:S.id,children:[S.subject_name," - Sec ",S.section]},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Date"}),e.jsx("input",{type:"date",value:f,onChange:S=>u(S.target.value),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white"})]}),a&&e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:p,className:"px-4 py-3 bg-emerald-500/20 text-emerald-400 rounded-xl border border-emerald-500/30 hover:bg-emerald-500/30 transition",children:" Mark All Present"})})]}),d?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-indigo-400"})}):a&&n.length>0?e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-900/80 text-slate-400 text-sm uppercase font-semibold sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Student"}),e.jsx("th",{className:"p-4",children:"USN"}),e.jsx("th",{className:"p-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(S=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"p-4 text-white font-medium",children:S.name}),e.jsx("td",{className:"p-4 text-slate-400 font-mono text-xs",children:S.srn}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>j(S.id),className:`w-10 h-10 rounded-full flex items-center justify-center transition ${o[S.id]==="Present"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:o[S.id]==="Present"?e.jsx($t,{className:"w-5 h-5"}):e.jsx(Me,{className:"w-5 h-5"})})})]},S.id))})]})}),e.jsx("div",{className:"p-4 border-t border-white/10",children:e.jsxs("button",{onClick:v,disabled:m,className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl flex items-center gap-2 hover:opacity-90 transition disabled:opacity-50",children:[m?e.jsx(H,{className:"animate-spin w-4 h-4"}):e.jsx(Se,{className:"w-4 h-4"}),"Save Attendance"]})})]}):a?e.jsx("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:e.jsx("p",{className:"text-slate-400",children:"No students found for this class."})}):null]})},Xl=({token:t})=>{const[s,a]=l.useState(null),[r,n]=l.useState(!1),[i,o]=l.useState(null),c=async()=>{var f,u;if(s){n(!0),o(null);try{const d=new FormData;d.append("file",s);const h=await G.post("/hrd/trainer/upload-csv",d,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}});o(h.data),a(null)}catch(d){o({success:!1,message:((u=(f=d.response)==null?void 0:f.data)==null?void 0:u.message)||"Upload failed"})}finally{n(!1)}}};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(Be,{className:"w-6 h-6 text-indigo-400"})," Bulk Data Upload"]}),e.jsx("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-indigo-500/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(Fa,{className:"w-10 h-10 text-indigo-400"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Update Master Database"}),e.jsxs("p",{className:"text-slate-400 text-sm mb-6",children:["Upload CSV to batch-update student Grade Points and Projects. Recognized columns: ",e.jsx("span",{className:"text-indigo-400",children:"SRN, GPA, Backlogs"})]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:".csv",onChange:f=>a(f.target.files[0]),className:"hidden"}),e.jsx("div",{className:"border-2 border-dashed border-white/20 rounded-xl p-8 cursor-pointer hover:border-indigo-500/50 transition",children:s?e.jsx("p",{className:"text-indigo-400 font-medium",children:s.name}):e.jsx("p",{className:"text-slate-500",children:"Click to select CSV file"})})]}),e.jsxs("button",{onClick:c,disabled:!s||r,className:"mt-4 w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl flex items-center justify-center gap-2 hover:opacity-90 transition disabled:opacity-50",children:[r?e.jsx(H,{className:"animate-spin w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"}),"Upload & Process"]})]}),i&&e.jsxs("div",{className:`mt-6 p-4 rounded-xl ${i.success?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:[i.success?e.jsx(Qe,{className:"w-5 h-5 inline mr-2"}):null,i.message]})]})})]})},Yl=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(null),[i,o]=l.useState([]),[c,f]=l.useState(null),[u,d]=l.useState([]),[h,m]=l.useState(!1),[b,x]=l.useState(null),[j,p]=l.useState({});l.useEffect(()=>{v()},[]);const v=async()=>{try{const C=await G.get("/hrd/drives",{headers:{Authorization:`Bearer ${t}`}});C.data.success&&a(C.data.drives||[])}catch(C){console.error(C)}},S=async C=>{m(!0);try{const A=await G.get(`/hrd/drives/${C}/rounds`,{headers:{Authorization:`Bearer ${t}`}});A.data.success&&o(A.data.rounds||[])}catch(A){console.error(A)}finally{m(!1)}},N=async C=>{try{const A=await G.get(`/hrd/drives/${C}`,{headers:{Authorization:`Bearer ${t}`}});A.data.success&&d(A.data.applicants||[])}catch(A){console.error(A)}},w=C=>{const A=s.find(k=>k.id===parseInt(C));n(A),f(null),C&&(S(C),N(C))},g=async(C,A)=>{if(!c)return;const k=j[C]||"";x(C);try{await G.post("/hrd/interview/result",{round_id:c.id,student_id:C,result:A,feedback:k},{headers:{Authorization:`Bearer ${t}`}}),d(T=>T.map(y=>y.id===C?{...y,status:A==="Fail"?"rejected":"shortlisted"}:y))}catch(T){console.error(T)}finally{x(null)}};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(Fe,{className:"w-6 h-6 text-indigo-400"})," Interview Results"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Select Drive"}),e.jsxs("select",{value:(r==null?void 0:r.id)||"",onChange:C=>w(C.target.value),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white",children:[e.jsx("option",{value:"",children:"Choose..."}),s.map(C=>e.jsxs("option",{value:C.id,children:[C.company," - ",C.title]},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Select Round"}),e.jsxs("select",{value:(c==null?void 0:c.id)||"",onChange:C=>f(i.find(A=>A.id===parseInt(C.target.value))),disabled:!r,className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Choose..."}),i.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]})]}),h?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-indigo-400"})}):c&&u.length>0?e.jsx("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-900/80 text-slate-400 text-sm uppercase font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Student"}),e.jsx("th",{className:"p-4",children:"SRN"}),e.jsx("th",{className:"p-4 text-center",children:"Status"}),e.jsx("th",{className:"p-4",children:"Feedback"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:u.map(C=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"p-4 text-white font-medium",children:C.name}),e.jsx("td",{className:"p-4 text-slate-400 font-mono text-xs",children:C.srn}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${C.status==="rejected"?"bg-red-500/20 text-red-400":C.status==="offered"?"bg-emerald-500/20 text-emerald-400":"bg-blue-500/20 text-blue-400"}`,children:C.status})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{placeholder:"Feedback...",value:j[C.id]||"",onChange:A=>p(k=>({...k,[C.id]:A.target.value})),className:"w-full bg-slate-800/20 border border-white/10 rounded-lg p-2 text-xs text-white outline-none"})}),e.jsxs("td",{className:"p-4 text-right space-x-2",children:[e.jsxs("button",{onClick:()=>g(C.id,"Pass"),disabled:b===C.id,className:"px-3 py-1.5 bg-emerald-500/20 text-emerald-400 rounded-lg text-xs border border-emerald-500/30 hover:bg-emerald-500/30",children:[e.jsx($t,{className:"w-3 h-3 inline"})," Pass"]}),e.jsxs("button",{onClick:()=>g(C.id,"Fail"),disabled:b===C.id,className:"px-3 py-1.5 bg-red-500/20 text-red-400 rounded-lg text-xs border border-red-500/30 hover:bg-red-500/30",children:[e.jsx(Me,{className:"w-3 h-3 inline"})," Fail"]})]})]},C.id))})]})}):c?e.jsx("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:e.jsx("p",{className:"text-slate-400",children:"No applicants for this drive."})}):null]})},Ql=()=>e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-10 h-10 bg-gradient-to-tr from-indigo-600 to-blue-600 rounded-xl shadow-lg shadow-indigo-500/20 ring-1 ring-white/10",children:[e.jsx(pe,{className:"w-5 h-5 text-white stroke-[2.5]"}),e.jsx("div",{className:"absolute top-0 right-0 -mr-1 -mt-1 w-3 h-3 bg-amber-400 rounded-full border-2 border-slate-950"})]}),e.jsxs("span",{className:"text-xl font-bold text-white tracking-tight",children:["Note",e.jsx("span",{className:"font-light text-indigo-200",children:"Orbit"})]})]}),Zl=({token:t,setPage:s,setToken:a})=>{const[r,n]=l.useState("classes"),[i,o]=l.useState([]),[c,f]=l.useState(!0),[u,d]=l.useState(null),h=l.useRef(null),m=l.useRef(null),b=l.useRef(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const S=await G.get("/hrd/trainer/classes",{headers:{Authorization:`Bearer ${t}`}});S.data.success&&o(S.data.classes||[])}catch(S){console.error(S)}finally{f(!1)}},j=()=>{localStorage.removeItem("noteorbit_token"),localStorage.removeItem("noteorbit_user"),a(null),s("login")},p=[{id:"classes",label:"My Classes",icon:Te},{id:"students",label:"Student Directory",icon:qe},{id:"attendance",label:"Bulk Attendance",icon:ye},{id:"upload",label:"Data Upload",icon:Be},{id:"interviews",label:"Interview Results",icon:Fe}];l.useEffect(()=>{if(h.current&&m.current){const S=h.current.querySelector(`button[data-key="${r}"]`);S&&ae.to(m.current,{y:S.offsetTop,height:S.offsetHeight,opacity:1,duration:.5,ease:"elastic.out(1, 0.6)"})}b.current&&ae.fromTo(b.current,{opacity:0,x:20},{opacity:1,x:0,duration:.4,ease:"power2.out"})},[r]);const v=()=>{switch(r){case"classes":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:e.jsx(Te,{className:"w-5 h-5 text-indigo-400"})}),"My Allocated Classes"]}),c?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-indigo-400 w-8 h-8"})}):i.length===0?e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Te,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"No classes allocated yet."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(S=>e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-indigo-500/30 hover:shadow-[0_0_25px_rgba(99,102,241,0.1)] transition-all duration-300 cursor-pointer group",onClick:()=>{d(S),n("students")},children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500/20 to-purple-500/20 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Te,{className:"w-6 h-6 text-indigo-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-indigo-300 transition-colors",children:S.subject_name}),e.jsxs("p",{className:"text-slate-400 text-sm",children:[S.degree," Sem ",S.semester," - Section ",S.section]})]},S.id))})]});case"students":return e.jsx(ga,{token:t,allocation:u});case"attendance":return e.jsx(Gl,{token:t,classes:i});case"upload":return e.jsx(Xl,{token:t});case"interviews":return e.jsx(Yl,{token:t});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-indigo-950/30 to-slate-950",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-4 md:p-6",children:[e.jsxs("div",{className:"w-full md:w-64 bg-slate-900/60 backdrop-blur-xl p-5 rounded-2xl shadow-2xl border border-white/10 flex-shrink-0 animate-in slide-in-from-left-4 duration-500",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Ql,{}),e.jsx("p",{className:"text-xs text-slate-500 mt-2 ml-1",children:"Trainer Portal"})]}),e.jsxs("nav",{className:"space-y-1 relative hidden md:block",ref:h,children:[e.jsx("div",{ref:m,className:"absolute left-0 top-0 w-full bg-indigo-600/20 border border-indigo-500/30 rounded-xl shadow-[0_0_15px_rgba(99,102,241,0.2)] pointer-events-none opacity-0 z-0",style:{height:0}}),p.map(S=>e.jsxs("button",{"data-key":S.id,onClick:()=>n(S.id),className:`w-full flex items-center p-3 rounded-xl font-semibold transition-colors duration-200 relative z-10 ${r===S.id?"text-indigo-300":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(S.icon,{className:"w-5 h-5 mr-3"}),S.label]},S.id))]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-indigo-400 pointer-events-none"}),e.jsx("select",{value:r,onChange:S=>n(S.target.value),className:"w-full bg-slate-800/80 border border-indigo-500/30 rounded-xl py-3 pl-10 pr-4 text-white appearance-none outline-none focus:ring-2 focus:ring-indigo-500/50 shadow-lg font-semibold",children:p.map(S=>e.jsx("option",{value:S.id,className:"bg-slate-900 text-white py-2",children:S.label},S.id))}),e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})}),e.jsxs("button",{onClick:j,className:"mt-6 w-full flex items-center justify-center gap-2 text-slate-500 hover:text-red-400 transition text-sm py-2.5 rounded-xl hover:bg-red-500/10 border border-transparent hover:border-red-500/20",children:[e.jsx(ds,{className:"w-4 h-4"})," Logout"]})]}),e.jsxs("div",{ref:b,className:"flex-1 min-h-[600px] bg-slate-900/60 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-3xl pointer-events-none"}),v()]})]})})},en=({userRole:t,token:s,setPage:a,setToken:r,catalogs:n})=>{let i=t;if(!i){const o=localStorage.getItem("noteorbit_user");if(o){const f=JSON.parse(o).role||"hrd";f==="trainer"||f==="hrd_trainer"?i="Trainer":i="HRD"}}return i==="Trainer"?e.jsx(Zl,{token:s,setPage:a,setToken:r}):e.jsx(Jl,{token:s,setPage:a,setToken:r,catalogs:n})},tn=({token:t})=>{var C,A;const[s,a]=l.useState({skills:[],ai_skills:[],resume_url:"",resume_versions:[],linkedin_url:"",portfolio_url:"",preferred_roles:[],github_url:""}),[r,n]=l.useState(!0),[i,o]=l.useState(!1),[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState(!1),b=[{id:"sde",label:"Software Development Engineer",icon:""},{id:"frontend",label:"Frontend Developer",icon:""},{id:"backend",label:"Backend Developer",icon:""},{id:"fullstack",label:"Full Stack Developer",icon:""},{id:"analyst",label:"Business Analyst",icon:""},{id:"data",label:"Data Scientist/Engineer",icon:""},{id:"ml",label:"ML/AI Engineer",icon:""},{id:"devops",label:"DevOps/SRE",icon:""},{id:"cloud",label:"Cloud Engineer",icon:""},{id:"security",label:"Security Engineer",icon:""},{id:"product",label:"Product Manager",icon:""},{id:"qa",label:"QA/Test Engineer",icon:""},{id:"mobile",label:"Mobile Developer",icon:""},{id:"consulting",label:"IT Consultant",icon:""}];l.useEffect(()=>{x()},[]);const x=async()=>{try{const k=await G.get("/student/placement/profile",{headers:{Authorization:`Bearer ${t}`}});k.data.success&&k.data.profile&&a(T=>({...T,...k.data.profile}))}catch(k){console.error(k)}finally{n(!1)}},j=async()=>{o(!0);try{await G.put("/student/placement/profile",s,{headers:{Authorization:`Bearer ${t}`}})}catch(k){console.error(k)}finally{o(!1)}},p=()=>{c.trim()&&!s.skills.includes(c.trim())&&(a(k=>({...k,skills:[...k.skills,c.trim()]})),f(""))},v=k=>{a(T=>({...T,skills:T.skills.filter(y=>y!==k)}))},S=k=>{s.skills.includes(k)||a(T=>({...T,skills:[...T.skills,k],ai_skills:T.ai_skills.filter(y=>y!==k)}))},N=k=>{a(T=>{const y=T.preferred_roles||[];return y.includes(k)?{...T,preferred_roles:y.filter($=>$!==k)}:y.length<3?{...T,preferred_roles:[...y,k]}:T})},w=async()=>{m(!0),setTimeout(()=>{const k=["Python","JavaScript","React","Node.js","SQL","Git"],T=s.skills||[],y=k.filter($=>!T.includes($));a($=>({...$,ai_skills:y})),m(!1)},1500)},g=async()=>{if(window.confirm("Are you sure you want to remove your resume from your profile?")){o(!0);try{await G.delete("/student/placement/resume",{headers:{Authorization:`Bearer ${t}`}}),a(k=>({...k,resume_url:""})),x()}catch(k){console.error(k),alert("Failed to delete resume.")}finally{o(!1)}}};return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-cyan-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-cyan-400"})," Resume V2"]}),e.jsxs("div",{className:"space-y-4",children:[s.resume_url&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:[e.jsx($a,{className:"w-5 h-5 text-emerald-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium",children:"Applied Resume"}),e.jsxs("a",{href:s.resume_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-2 px-3 py-1.5 bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 rounded-lg hover:bg-cyan-500/20 transition text-xs font-semibold",children:[e.jsx(Fe,{className:"w-4 h-4"}),"View Resume"]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:w,disabled:h,className:"p-2.5 bg-purple-500/10 text-purple-400 rounded-xl border border-purple-500/20 hover:bg-purple-500/20 transition-all flex items-center gap-2 text-sm",title:"AI Parse Skills",children:[h?e.jsx(H,{className:"animate-spin w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"AI Analysis"})]}),e.jsxs("button",{onClick:g,disabled:i,className:"p-2.5 bg-red-500/10 text-red-400 rounded-xl border border-red-500/20 hover:bg-red-500/20 transition-all flex items-center gap-2 text-sm",title:"Delete Resume",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"resume-upload",className:"hidden",accept:".pdf",onChange:async k=>{const T=k.target.files[0];if(!T)return;const y=new FormData;y.append("file",T),m(!0);try{const $=await G.post("/student/placement/upload-resume",y,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}});$.data.success&&(a(D=>({...D,resume_url:$.data.url})),x())}catch($){console.error($),alert("Upload failed. Please check file type and size.")}finally{m(!1)}}}),e.jsxs("label",{htmlFor:"resume-upload",className:"w-full h-32 border-2 border-dashed border-white/10 rounded-2xl flex flex-col items-center justify-center gap-3 cursor-pointer hover:border-cyan-500/50 hover:bg-cyan-500/5 transition group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:scale-110 transition",children:e.jsx(Be,{className:"w-6 h-6 text-cyan-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white font-medium",children:"Click to upload Resume"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"PDF format (Max 10MB)"})]})]})]}),((C=s.resume_versions)==null?void 0:C.length)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-slate-400 mb-2 flex items-center gap-1",children:[e.jsx(os,{className:"w-4 h-4"})," Version History"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.resume_versions.slice().reverse().map((k,T)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 p-2 bg-slate-800/30 rounded-lg",children:[e.jsxs("span",{className:"text-cyan-400",children:["v",k.version]}),e.jsx("span",{className:"truncate flex-1",children:k.url}),e.jsx("span",{children:new Date(k.uploaded_at).toLocaleDateString()})]},T))})]})]})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-purple-400"})," Skill Matrix"]}),((A=s.ai_skills)==null?void 0:A.length)>0&&e.jsxs("div",{className:"mb-4 p-4 bg-purple-500/10 border border-purple-500/20 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-purple-400 mb-2 flex items-center gap-1",children:[e.jsx(He,{className:"w-4 h-4"})," AI-Detected Skills (click to add)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.ai_skills.map(k=>e.jsxs("button",{onClick:()=>S(k),className:"px-3 py-1.5 bg-purple-500/20 text-purple-300 border border-purple-500/30 rounded-lg text-sm hover:bg-purple-500/30 transition flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"})," ",k]},k))})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(s.skills||[]).map(k=>e.jsxs("span",{className:"px-3 py-1.5 bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 rounded-lg text-sm flex items-center gap-2",children:[k,e.jsx("button",{onClick:()=>v(k),className:"hover:text-red-400",children:e.jsx(Me,{className:"w-3 h-3"})})]},k))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{placeholder:"Add skill manually (e.g. Python, React)",value:c,onChange:k=>f(k.target.value),onKeyDown:k=>k.key==="Enter"&&p(),className:"flex-1 bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white placeholder-slate-600"}),e.jsx("button",{onClick:p,className:"px-4 bg-cyan-500/20 text-cyan-400 rounded-xl hover:bg-cyan-500/30 transition",children:e.jsx(Le,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5 text-cyan-400"})," Preferred Roles"]}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Select up to 3 roles you're interested in"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:b.map(k=>{const T=(s.preferred_roles||[]).includes(k.id);return e.jsxs("button",{onClick:()=>N(k.id),className:`p-3 rounded-xl border text-left transition ${T?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400":"bg-slate-800/30 border-white/10 text-slate-400 hover:border-white/20 hover:text-white"}`,children:[e.jsx("span",{className:"text-lg",children:k.icon}),e.jsx("p",{className:"text-sm font-medium mt-1",children:k.label})]},k.id)})})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"LinkedIn"}),e.jsx("input",{type:"url",placeholder:"https://linkedin.com/in/...",value:s.linkedin_url||"",onChange:k=>a(T=>({...T,linkedin_url:k.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white placeholder-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"GitHub"}),e.jsx("input",{type:"url",placeholder:"https://github.com/...",value:s.github_url||"",onChange:k=>a(T=>({...T,github_url:k.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white placeholder-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Portfolio"}),e.jsx("input",{type:"url",placeholder:"https://yourportfolio.com",value:s.portfolio_url||"",onChange:k=>a(T=>({...T,portfolio_url:k.target.value})),className:"w-full bg-slate-800/50 border border-white/10 rounded-xl p-3 text-white placeholder-slate-600"})]})]})]}),e.jsxs("button",{onClick:j,disabled:i,className:"w-full py-4 bg-gradient-to-r from-cyan-500 to-indigo-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:opacity-90 transition disabled:opacity-50",children:[i?e.jsx(H,{className:"animate-spin w-5 h-5"}):e.jsx(Se,{className:"w-5 h-5"}),"Save Profile"]})]})},sn=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0),[i,o]=l.useState(null),[c,f]=l.useState("");l.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await G.get("/student/placement/drives",{headers:{Authorization:`Bearer ${t}`}});m.data.success&&a(m.data.drives||[])}catch(m){console.error(m)}finally{n(!1)}},d=async m=>{o(m);try{(await G.post("/student/placement/apply",{drive_id:m},{headers:{Authorization:`Bearer ${t}`}})).data.success&&a(x=>x.map(j=>j.id===m?{...j,already_applied:!0}:j))}catch(b){console.error(b)}finally{o(null)}},h=s.filter(m=>{var b;return m.title.toLowerCase().includes(c.toLowerCase())||m.company.toLowerCase().includes(c.toLowerCase())||((b=m.role)==null?void 0:b.toLowerCase().includes(c.toLowerCase()))});return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-cyan-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-4 flex items-center gap-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-slate-500"}),e.jsx("input",{placeholder:"Search drives by company, role...",className:"bg-transparent border-none outline-none text-white w-full placeholder-slate-600",value:c,onChange:m=>f(m.target.value)})]}),h.length===0?e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"No Eligible Drives"}),e.jsx("p",{className:"text-slate-400",children:"Check back later for new opportunities matching your profile."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(m=>e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-cyan-500/30 transition-colors group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 to-indigo-500/20 flex items-center justify-center text-cyan-400 font-bold text-lg",children:m.company.substring(0,2).toUpperCase()}),m.already_applied&&e.jsxs("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-full border border-emerald-500/30 flex items-center gap-1",children:[e.jsx($t,{className:"w-3 h-3"})," Applied"]})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:m.title}),e.jsx("p",{className:"text-cyan-400 text-sm font-medium mb-3",children:m.company}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"})," ",m.role||"Multiple Roles"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4"})," ",m.ctc]}),m.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"w-4 h-4"})," ",m.location]})]}),!m.already_applied&&e.jsxs("button",{onClick:()=>d(m.id),disabled:i===m.id,className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-indigo-500 text-white font-medium rounded-xl flex items-center justify-center gap-2 hover:opacity-90 transition disabled:opacity-50",children:[i===m.id?e.jsx(H,{className:"animate-spin w-4 h-4"}):e.jsx(Lt,{className:"w-4 h-4"}),"Apply Now"]})]},m.id))})]})},Ct=["applied","shortlisted","interview","offered","rejected"],Yt={applied:"Applied",shortlisted:"Shortlisted",interview:"Interview",offered:"Offered",rejected:"Rejected"},Qt={applied:{icon:os,color:"text-blue-400",bg:"bg-blue-500/20",border:"border-blue-500/30"},shortlisted:{icon:ts,color:"text-yellow-400",bg:"bg-yellow-500/20",border:"border-yellow-500/30"},interview:{icon:ts,color:"text-purple-400",bg:"bg-purple-500/20",border:"border-purple-500/30"},offered:{icon:Qe,color:"text-emerald-400",bg:"bg-emerald-500/20",border:"border-emerald-500/30"},rejected:{icon:Ie,color:"text-red-400",bg:"bg-red-500/20",border:"border-red-500/30"}},an=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0),[i,o]=l.useState("all");l.useEffect(()=>{c()},[]);const c=async()=>{try{const d=await G.get("/student/placement/history",{headers:{Authorization:`Bearer ${t}`}});d.data.success&&a(d.data.history||[])}catch(d){console.error(d)}finally{n(!1)}},f=d=>Ct.indexOf(d)!==-1?Ct.indexOf(d):0,u=i==="all"?s:s.filter(d=>d.status===i);return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-cyan-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-cyan-400"})," Application Timeline"]}),e.jsx("div",{className:"flex gap-1 p-1 bg-slate-900/50 rounded-xl",children:["all","applied","shortlisted","interview","offered","rejected"].map(d=>e.jsx("button",{onClick:()=>o(d),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition ${i===d?"bg-cyan-500/20 text-cyan-400":"text-slate-500 hover:text-white"}`,children:d==="all"?"All":Yt[d]},d))})]}),u.length===0?e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Fe,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"No Applications Yet"}),e.jsx("p",{className:"text-slate-400",children:"Apply to drives to track your progress here."})]}):e.jsx("div",{className:"space-y-4",children:u.map((d,h)=>{var x;const m=f(d.status),b=Qt[d.status]||Qt.applied;return b.icon,e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-white/20 transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-indigo-500/20 flex items-center justify-center text-cyan-400 font-bold text-lg",children:((x=d.company)==null?void 0:x.substring(0,2).toUpperCase())||"CO"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-bold text-lg",children:d.drive_title}),e.jsxs("p",{className:"text-slate-400 text-sm flex items-center gap-1",children:[e.jsx(ft,{className:"w-3 h-3"})," ",d.company]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${b.bg} ${b.color} border ${b.border}`,children:Yt[d.status]}),e.jsx("p",{className:"text-slate-500 text-xs mt-2",children:new Date(d.applied_at).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:Ct.slice(0,-1).map((j,p)=>{const v=p<=m&&d.status!=="rejected",S=d.status==="rejected"&&p<=m,N=Qt[j],w=N.icon;return e.jsxs(qs.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition ${S?"bg-red-500/20 border border-red-500/40":v?`${N.bg} border ${N.border}`:"bg-slate-800/50 border border-white/10"}`,children:e.jsx(w,{className:`w-4 h-4 ${S?"text-red-400":v?N.color:"text-slate-600"}`})}),e.jsx("span",{className:`text-xs mt-1.5 ${S?"text-red-400":v?N.color:"text-slate-600"}`,children:Yt[j]})]}),p<Ct.length-2&&e.jsx("div",{className:`flex-1 h-0.5 rounded ${S||v&&p<m?S?"bg-red-500/40":"bg-cyan-500/40":"bg-slate-700"}`})]},j)})}),d.status==="rejected"&&e.jsx("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm",children:" Unfortunately, your application was not successful. Keep trying!"}),d.status==="offered"&&e.jsx("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-xl text-emerald-400 text-sm",children:` Congratulations! You've received an offer. Check "My Offers" for details.`})]},d.application_id)})})]})},rn=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0);l.useEffect(()=>{i()},[]);const i=async()=>{try{const o=await G.get("/student/placement/offers",{headers:{Authorization:`Bearer ${t}`}});o.data.success&&a(o.data.offers||[])}catch(o){console.error(o)}finally{n(!1)}};return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-cyan-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-emerald-400"})," My Offers"]}),s.length===0?e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(bs,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"No Offers Yet"}),e.jsx("p",{className:"text-slate-400",children:"Clear interview rounds to receive offers."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(o=>e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 to-cyan-500/10 backdrop-blur-xl border border-emerald-500/20 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:e.jsx(ft,{className:"w-6 h-6 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:o.company_name}),e.jsx("p",{className:"text-emerald-400 text-sm",children:o.role})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(We,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{children:[o.ctc," LPA"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(La,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{children:new Date(o.created_at).toLocaleDateString()})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsx("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-400 rounded-full text-xs font-medium",children:" Congratulations!"})})]},o.id))})]})},ln=({token:t})=>{const[s,a]=l.useState([]),[r,n]=l.useState(!0),[i,o]=l.useState({total:0,present:0,absent:0,percentage:0});l.useEffect(()=>{c()},[]);const c=async()=>{try{const u=await G.get("/student/hrd/attendance",{headers:{Authorization:`Bearer ${t}`}});if(u.data.success){const d=u.data.attendance||[];a(d);const h=d.filter(b=>b.status==="Present").length,m=d.length;o({total:m,present:h,absent:m-h,percentage:m>0?Math.round(h/m*100):0})}}catch(u){console.error(u)}finally{n(!1)}},f=s.reduce((u,d)=>{const h=d.subject||"Unknown";return u[h]||(u[h]=[]),u[h].push(d),u},{});return r?e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-cyan-400"})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Dt,{className:"w-5 h-5 text-cyan-400"})," HRD Training Attendance"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5 text-center",children:[e.jsxs("p",{className:"text-3xl font-bold text-cyan-400",children:[i.percentage,"%"]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Overall"})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:i.total}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Total Classes"})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:i.present}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Present"})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-red-400",children:i.absent}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Absent"})]})]}),i.percentage<75&&i.total>0&&e.jsxs("div",{className:"p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl text-orange-400 flex items-center gap-3",children:[e.jsx(ts,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:"Your attendance is below 75%. This may affect your placement eligibility."})]}),Object.keys(f).length>0?e.jsx("div",{className:"space-y-4",children:Object.entries(f).map(([u,d])=>{const h=d.filter(x=>x.status==="Present").length,m=d.length,b=Math.round(h/m*100);return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:u}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[m," classes"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-2xl font-bold ${b>=75?"text-emerald-400":"text-orange-400"}`,children:[b,"%"]}),e.jsxs("p",{className:"text-slate-500 text-xs",children:[h,"/",m," present"]})]})]}),e.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${b>=75?"bg-emerald-500":"bg-orange-500"}`,style:{width:`${b}%`}})}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[d.slice(0,10).map((x,j)=>e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs ${x.status==="Present"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,title:`${x.date}: ${x.status}`,children:x.status==="Present"?e.jsx(Qe,{className:"w-4 h-4"}):e.jsx(Ie,{className:"w-4 h-4"})},j)),d.length>10&&e.jsxs("span",{className:"text-slate-500 text-xs self-center",children:["+",d.length-10," more"]})]})]},u)})}):e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 rounded-2xl p-12 text-center",children:[e.jsx(Dt,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"No Attendance Records"}),e.jsx("p",{className:"text-slate-400",children:"Your HRD training attendance will appear here."})]})]})},nn=({token:t})=>{const[s,a]=l.useState(null),[r,n]=l.useState(!0);l.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await G.get("/student/hrd/performance",{headers:{Authorization:`Bearer ${t}`}});c.data.success&&a(c.data.performance||null)}catch(c){console.error(c)}finally{n(!1)}};if(r)return e.jsx("div",{className:"p-12 text-center",children:e.jsx(H,{className:"animate-spin mx-auto text-cyan-400"})});s!=null&&s.attendance;const o=(s==null?void 0:s.subjects)||[];return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Training Performance"}),e.jsx("p",{className:"text-slate-400",children:"Track your attendance and marks in HRD subjects."})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5 text-purple-400"})," Subject Performance"]}),o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ft,{className:"w-12 h-12 text-slate-700 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"No subject marks recorded yet."})]}):e.jsx("div",{className:"space-y-4",children:o.map((c,f)=>e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white font-medium",children:c.subject}),e.jsxs("span",{className:"text-cyan-400 font-bold",children:[c.marks_obtained,"/",c.max_marks]})]}),e.jsx("div",{className:"w-full bg-slate-700 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-indigo-500 rounded-full",style:{width:`${c.percentage||0}%`}})}),e.jsxs("p",{className:"text-right text-slate-500 text-xs mt-1",children:[c.percentage||0,"%"]})]},f))})]})]})},on=({token:t,user:s})=>{const[a,r]=l.useState("drives"),n=[{id:"profile",label:"Smart Profile",icon:lt},{id:"drives",label:"Discover Drives",icon:Oe},{id:"applications",label:"My Applications",icon:Fe},{id:"offers",label:"My Offers",icon:Qe},{id:"attendance",label:"HRD Attendance",icon:Dt},{id:"performance",label:"Training Performance",icon:Ft}],i=()=>{switch(a){case"profile":return e.jsx(tn,{token:t});case"drives":return e.jsx(sn,{token:t});case"applications":return e.jsx(an,{token:t});case"offers":return e.jsx(rn,{token:t});case"attendance":return e.jsx(ln,{token:t});case"performance":return e.jsx(nn,{token:t});default:return e.jsx("div",{children:"Select a tab"})}};return e.jsxs("div",{className:"min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Placement Assist"}),e.jsx("p",{className:"text-slate-400",children:"Accelerate your career with campus opportunities & training."})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8 p-1 bg-slate-900/40 backdrop-blur-md rounded-xl border border-white/5 w-fit",children:n.map(o=>{const c=o.icon,f=a===o.id;return e.jsxs("button",{onClick:()=>r(o.id),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${f?"bg-cyan-500/20 text-cyan-400 shadow-sm border border-cyan-500/30":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(c,{className:"w-4 h-4"}),o.label]},o.id)})}),e.jsx("div",{className:"min-h-[400px]",children:i()})]})},V=()=>G,ht=()=>G;function cn(){const[t,s]=l.useState([]),[a,r]=l.useState([]),[n,i]=l.useState([]),[o,c]=l.useState(!1),f=l.useCallback(async()=>{try{const[h]=await Promise.all([ht().get("/admin/degrees")]);s(h.data.degrees||[])}catch(h){console.error("Failed to fetch basics from backend:",h),s([])}finally{c(!0)}},[]),u=l.useCallback(async(h,m)=>{if(!h||!m)return i([]),[];try{const x=((await ht().get("/admin/subjects",{params:{degree:h,semester:m}})).data.subjects||[]).map(j=>j.name);return i(x),x}catch(b){return console.error("Failed to fetch subjects:",b),i([]),[]}},[]),d=l.useCallback(async(h,m)=>{if(!h||!m)return r([]),[];try{const x=(await ht().get("/admin/sections",{params:{degree:h,semester:m}})).data.sections||[];return r(x),x}catch(b){return console.error("Failed to fetch sections:",b),r([]),[]}},[]);return l.useEffect(()=>{f()},[f]),{degrees:t,sections:a,subjects:n,fetchSubjects:u,fetchSections:d,loaded:o,fetchBasics:f}}function dn(){const[t,s]=l.useState(null),[a,r]=l.useState(!0),n=l.useCallback(()=>{const i=localStorage.getItem("noteorbit_user"),o=localStorage.getItem("noteorbit_token");if(i&&o)try{const c=JSON.parse(i);s(c),ot(o)}catch(c){console.error("Corrupted user data in localStorage",c),ot(null),localStorage.removeItem("noteorbit_user"),s(null)}r(!1)},[]);return l.useEffect(()=>{n()},[n]),[t,s,a]}const un=()=>e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl shadow-lg shadow-blue-500/20 ring-1 ring-white/10",children:[e.jsx(pe,{className:"w-5 h-5 text-white stroke-[2.5]"}),e.jsx("div",{className:"absolute top-0 right-0 -mr-1 -mt-1 w-3 h-3 bg-amber-400 rounded-full border-2 border-slate-950"})]}),e.jsxs("span",{className:"text-xl font-bold text-white tracking-tight",children:["Note",e.jsx("span",{className:"font-light text-blue-200",children:"Orbit"})]})]}),xn="https://dozens-replace-revenue-legendary.trycloudflare.com",Q=({icon:t,className:s="",type:a="text",...r})=>{const[n,i]=l.useState(!1),o=a==="password",c=o?n?"text":"password":a;return e.jsxs("div",{className:"relative group",children:[t&&e.jsx(t,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-blue-400 transition-colors"}),e.jsx("input",{...r,type:c,className:`w-full bg-slate-800/50 backdrop-blur-xl text-white placeholder-gray-500 border border-white/10 rounded-xl py-3.5 ${t?"pl-12":"px-4"} ${o?"pr-12":"pr-4"} focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 outline-none transition duration-300 hover:bg-slate-800/80 ${s}`}),o&&e.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:n?e.jsx(Hs,{className:"w-5 h-5"}):e.jsx(Tt,{className:"w-5 h-5"})})]})},K=({icon:t,className:s="",children:a,...r})=>e.jsxs("div",{className:"relative group",children:[t&&e.jsx(t,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-blue-400 pointer-events-none transition-colors"}),e.jsx(Ze,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),e.jsx("select",{...r,className:`w-full bg-slate-800/50 backdrop-blur-xl text-white border border-white/10 rounded-xl py-3.5 ${t?"pl-12 pr-10":"px-4"} appearance-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 outline-none transition duration-300 hover:bg-slate-800/80 cursor-pointer ${s}`,children:a})]}),mn=({message:t,type:s,onClose:a})=>{const[r,n]=l.useState(!1),[i,o]=l.useState(null),[c,f]=l.useState(null),u=l.useRef(null);if(l.useEffect(()=>{t?(o(t),f(s),n(!0),u.current&&(ae.killTweensOf(u.current),ae.fromTo(u.current,{y:-20,opacity:0,scale:.95},{y:0,opacity:1,scale:1,duration:.5,ease:"elastic.out(1, 0.75)"}))):u.current&&r&&ae.to(u.current,{y:-20,opacity:0,scale:.95,duration:.3,ease:"power2.in",onComplete:()=>{n(!1),o(null)}})},[t,s]),!r&&!t)return null;const d=(c||s)==="success",h="fixed top-6 left-1/2 -translate-x-1/2 w-full max-w-md p-4 rounded-2xl shadow-2xl border backdrop-blur-xl text-sm flex items-start z-[9999]",m=d?"bg-slate-900/90 border-emerald-500/30 text-emerald-200 shadow-emerald-500/10":"bg-slate-900/90 border-red-500/30 text-red-200 shadow-red-500/10",b=d?Qe:Ie;return e.jsxs("div",{ref:u,className:`${h} ${m}`,children:[e.jsx("div",{className:`absolute inset-0 rounded-2xl opacity-20 ${d?"bg-gradient-to-r from-emerald-500/0 via-emerald-500 to-emerald-500/0":"bg-gradient-to-r from-red-500/0 via-red-500 to-red-500/0"}`}),e.jsx(b,{className:`w-5 h-5 mr-3 mt-0.5 flex-shrink-0 relative z-10 ${d?"text-emerald-400":"text-red-400"}`}),e.jsx("div",{className:"flex-1 whitespace-pre-wrap font-medium relative z-10",children:i||t}),a&&e.jsx("button",{onClick:()=>{u.current&&ae.to(u.current,{y:-20,opacity:0,scale:.95,duration:.3,ease:"power2.in",onComplete:a})},className:`ml-4 relative z-10 ${d?"text-emerald-400 hover:text-emerald-200":"text-red-400 hover:text-red-200"} transition-colors`,children:e.jsx(Ie,{className:"w-5 h-5"})})]})},hn=()=>e.jsxs("div",{className:"fixed inset-0 z-[5000] bg-slate-950/90 backdrop-blur-2xl flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-[200px] h-[200px] bg-blue-500/20 rounded-full blur-[80px] animate-pulse"}),e.jsx("div",{className:"w-24 h-24 border-4 border-blue-500/10 rounded-full animate-[spin_8s_linear_infinite]"}),e.jsx("div",{className:"absolute w-20 h-20 border-t-4 border-l-4 border-blue-400/80 rounded-full animate-[spin_3s_linear_infinite]"}),e.jsx("div",{className:"absolute w-16 h-16 border-r-4 border-b-4 border-purple-500/80 rounded-full animate-[spin_3s_linear_infinite_reverse]"}),e.jsx("div",{className:"absolute bg-white p-2 rounded-full shadow-[0_0_15px_rgba(255,255,255,0.5)] animate-bounce-slight",children:e.jsx(H,{className:"w-6 h-6 text-slate-900 animate-spin"})})]}),e.jsx("h2",{className:"mt-8 text-3xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-emerald-400 animate-pulse",children:"Authenticating..."}),e.jsx("p",{className:"mt-2 text-slate-400 text-sm font-medium tracking-wide animate-in slide-in-from-bottom-2 duration-700 delay-150",children:"Accessing Secure Dashboard"})]});function pn({setUserRole:t,setPage:s}){const[a,r]=l.useState(0),n=l.useRef(null),i=l.useRef([]),o=l.useRef(null),c=l.useRef(null),f=[{ui:"Student",icon:Ot,subtitle:"Access notes, results & more",gradient:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30",border:"border-blue-500/50",btnText:"Sign In / Sign Up"},{ui:"Faculty",icon:ye,subtitle:"Manage classes & attendance",gradient:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30",border:"border-emerald-500/50",btnText:"Sign In"},{ui:"Parent",icon:et,subtitle:"Track your ward's progress",gradient:"from-pink-500 to-pink-600",shadow:"shadow-pink-500/30",border:"border-pink-500/50",btnText:"Sign In"},{ui:"Admin",icon:gs,subtitle:"System configuration",gradient:"from-amber-500 to-amber-600",shadow:"shadow-amber-500/30",border:"border-amber-500/50",btnText:"Sign In"},{ui:"HRD",icon:gs,subtitle:"Placement & Career Services",gradient:"from-indigo-500 to-purple-600",shadow:"shadow-indigo-500/30",border:"border-indigo-500/50",btnText:"Sign In"}];l.useEffect(()=>{f.forEach((j,p)=>{const v=p-a,S=p===a,N=v*(window.innerWidth<768?260:300),w=S?1.05:.85,g=S?1:Math.max(0,1-Math.abs(v)*.4),C=S?50:10-Math.abs(v),A=v*-15;ae.to(i.current[p],{x:N,scale:w,opacity:g,zIndex:C,rotateY:A,duration:.5,ease:"power2.out",overwrite:"auto",force3D:!0})})},[a]);const u=j=>{c.current=null,o.current=j.targetTouches[0].clientX},d=j=>{c.current=j.targetTouches[0].clientX},h=()=>{if(!o.current||!c.current)return;const j=o.current-c.current,p=j>50,v=j<-50;p&&a<f.length-1&&r(S=>S+1),v&&a>0&&r(S=>S-1)},m=()=>{a<f.length-1&&r(j=>j+1)},b=()=>{a>0&&r(j=>j-1)},x=j=>{ae.to(n.current,{opacity:0,scale:.95,duration:.3,onComplete:()=>{t(j.ui),s("credentials"),window.scrollTo({top:0,behavior:"auto"})}})};return e.jsxs("div",{ref:n,className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden py-6 md:py-10",onTouchStart:u,onTouchMove:d,onTouchEnd:h,children:[e.jsxs("div",{className:"text-center space-y-4 mb-2 md:mb-12 z-10 animate-in fade-in slide-in-from-top-4 duration-700 px-4",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-900/30 border border-blue-500/30 text-blue-300 text-xs font-bold uppercase tracking-widest backdrop-blur-md mb-2",children:[e.jsx(He,{className:"w-3 h-3"})," NoteOrbit rev2.2.1_beta"]}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white tracking-tight leading-tight",children:["Academic ",e.jsx("br",{className:"hidden md:block"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400",children:"Intelligence."})]}),e.jsx("p",{className:"text-sm md:text-lg text-slate-400 max-w-xl mx-auto leading-relaxed",children:"Where Imagination is Redefined! Select your portal to begin."})]}),e.jsxs("div",{className:"relative w-full max-w-6xl h-[400px] md:h-[450px] flex items-center justify-center perspective-1000 z-10",children:[e.jsx("button",{onClick:b,className:`absolute left-0 md:left-10 z-50 p-4 text-white/80 hover:text-white transition-all active:scale-95 animate-pulse ${a===0?"opacity-30 cursor-not-allowed":"opacity-100 hover:scale-110"}`,disabled:a===0,children:e.jsx($e,{className:"w-8 h-8 md:w-10 md:h-10 drop-shadow-[0_0_15px_rgba(255,255,255,0.4)]"})}),e.jsx("button",{onClick:m,className:`absolute right-0 md:right-10 z-50 p-4 text-white/80 hover:text-white transition-all active:scale-95 animate-pulse ${a===f.length-1?"opacity-30 cursor-not-allowed":"opacity-100 hover:scale-110"}`,disabled:a===f.length-1,children:e.jsx(js,{className:"w-8 h-8 md:w-10 md:h-10 drop-shadow-[0_0_15px_rgba(255,255,255,0.4)]"})}),f.map((j,p)=>{const v=p===a;return e.jsx("div",{ref:S=>i.current[p]=S,onClick:()=>r(p),className:"absolute w-[260px] md:w-[320px] cursor-pointer will-change-transform",style:{left:"50%",marginLeft:window.innerWidth<768?-130:-160,transform:"perspective(1000px)"},children:e.jsxs("div",{className:`p-6 md:p-8 rounded-3xl border transition-all duration-300 relative overflow-hidden flex flex-col items-center text-center h-[360px] md:h-[400px] justify-center shadow-xl
                                ${v?`bg-slate-900/90 ${j.border} ring-1 ring-white/10 ${j.shadow}`:"bg-slate-900/60 border-white/5"}`,children:[v&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${j.gradient} opacity-20 blur-xl rounded-full transform scale-150 transition-opacity duration-500`}),e.jsx("div",{className:`w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center mb-6 md:mb-8 relative z-10
                                    bg-gradient-to-br ${j.gradient} shadow-lg`,children:e.jsx(j.icon,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-2 md:mb-3 relative z-10",children:j.ui}),e.jsx("p",{className:"text-xs md:text-sm text-slate-400 font-medium relative z-10 px-2",children:j.subtitle}),e.jsxs("button",{onClick:S=>{S.stopPropagation(),v?x(j):r(p)},className:`mt-6 md:mt-8 px-6 py-3 rounded-xl font-bold text-sm tracking-wide transition-all z-10 shadow-lg transform active:scale-95
                                    ${v?"bg-white text-slate-900 hover:bg-slate-100":"bg-white/5 text-slate-500 cursor-default"}`,children:[j.btnText," ",v&&e.jsx(js,{className:"w-4 h-4 inline-block ml-1"})]})]})},j.ui)})]}),e.jsx("div",{className:"flex gap-2 md:gap-3 mt-4 md:mt-8 z-10",children:f.map((j,p)=>e.jsx("button",{onClick:()=>r(p),className:`h-1.5 md:h-2 rounded-full transition-all duration-300 ${p===a?`w-6 md:w-8 bg-gradient-to-r ${j.gradient}`:"w-1.5 md:w-2 bg-slate-700 hover:bg-slate-600"}`},p))}),e.jsx("div",{className:"mt-auto pt-8 pb-4 text-center z-10",children:e.jsx("p",{className:"text-[10px] text-slate-600 uppercase tracking-widest font-bold",children:"v2.2.1 Beta  LeafCore Labs"})})]})}const fn=({onClose:t,showMessage:s,primaryButtonClass:a,buttonClass:r,userRole:n})=>{const[i,o]=l.useState(1),[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState(""),[b,x]=l.useState(""),[j,p]=l.useState(""),[v,S]=l.useState(""),[N,w]=l.useState(!1),g=n==="Faculty",C=n==="Parent",A=async()=>{var D,q;if(!c.trim())return s("Please enter your ID.","error");w(!0);try{const _={identifier:c};if(C){const O=await V().post("/auth/lookup-parent",{srn:c});m(O.data.masked_email),o(1.5);return}const M=await V().post("/auth/lookup-user",_);m(M.data.masked_email),o(1.5)}catch(_){s(((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||"User not found.","error")}finally{w(!1)}},k=async()=>{var D,q;w(!0);try{let _="forgot_password";C&&(_="parent_forgot");const M=await ba(c,_),O=M.data.masked_email||c;s(`OTP sent to ${O}`,"success"),d(M.data.email||c),m(O),o(2)}catch(_){s(((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||"Failed to send OTP.","error")}finally{w(!1)}},T=async()=>{var D,q;if(j!==v)return s("Passwords do not match.","error");w(!0);try{await Fl(u||c,b,j,C?"parent":"user"),s("Password reset successfully. Please login.","success"),t()}catch(_){s(((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||"Failed to reset password.","error")}finally{w(!1)}},y=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:g?"Enter your Employee ID to find your account.":C?"Enter your Ward's SRN to find account.":"Enter your Email Address."}),e.jsx(Q,{icon:g?lt:C?lt:Ce,placeholder:g?"Employee ID":C?"Ward's SRN (e.g. SRN001)":"Email Address",value:c,onChange:D=>f(D.target.value)}),g||C?e.jsx("button",{disabled:N,onClick:A,className:`w-full ${a} ${N?"opacity-50":""} py-3 text-sm rounded-xl`,children:N?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Find Account"}):e.jsx("button",{disabled:N,onClick:k,className:`w-full ${a} ${N?"opacity-50":""} py-3 text-sm rounded-xl`,children:N?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Send Verification Code"})]}),$=()=>e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-8 duration-300",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"We found an account linked to:"}),e.jsx("p",{className:"text-lg font-mono text-blue-400 font-bold tracking-wide",children:h})]}),e.jsx("button",{disabled:N,onClick:k,className:`w-full ${a} ${N?"opacity-50":""} py-3 text-sm rounded-xl`,children:N?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Send OTP"}),e.jsx("button",{onClick:()=>o(1),className:"w-full text-slate-400 hover:text-white text-sm",children:"Back"})]});return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl relative animate-in zoom-in-95 duration-300",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:e.jsx(Ie,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Reset Password"}),i===1&&y(),i===1.5&&$(),i===2&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-8 duration-300",children:[e.jsxs("p",{className:"text-slate-400 text-sm",children:["Enter the code sent to ",e.jsx("b",{className:"text-blue-400",children:h}),"."]}),e.jsx(Q,{placeholder:"Enter 6-digit OTP",value:b,onChange:D=>x(D.target.value),maxLength:6,className:"text-center tracking-widest font-mono text-lg"}),e.jsx(Q,{icon:pt,type:"password",placeholder:"New Password",value:j,onChange:D=>p(D.target.value)}),e.jsx(Q,{icon:pt,type:"password",placeholder:"Confirm Password",value:v,onChange:D=>S(D.target.value)}),e.jsx("button",{disabled:N,onClick:T,className:`w-full ${a} ${N?"opacity-50":""} py-3 text-sm rounded-xl`,children:N?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Reset Password"})]})]})})};function bn({onLogin:t,onRegister:s,showMessage:a,userRole:r,setPage:n,catalogs:i,primaryButtonClass:o,successButtonClass:c,buttonClass:f,authMode:u,setAuthMode:d}){const[h,m]=l.useState(""),[b,x]=l.useState(""),[j,p]=l.useState(!1),{degrees:v,sections:S,loaded:N}=i,[w,g]=l.useState(1),[C,A]=l.useState(""),[k,T]=l.useState(""),[y,$]=l.useState(""),[D,q]=l.useState(""),[_,M]=l.useState(""),[O,I]=l.useState(""),[R,L]=l.useState(!1),[U,z]=l.useState(!1),[W,X]=l.useState(""),[Y,ue]=l.useState("1"),[le,me]=l.useState(""),[oe,xe]=l.useState(!1),B=r==="Student",te=r==="Parent",re=l.useRef(null),Ue=l.useRef(null),ce=l.useRef(null);l.useEffect(()=>{const J=ae.context(()=>{var je;ae.timeline({defaults:{ease:"power3.out"}}).fromTo(re.current,{opacity:0,y:30,rotationX:15,scale:.9},{opacity:1,y:0,rotationX:0,scale:1,duration:.8,force3D:!0}).fromTo(Ue.current,{opacity:0,y:20},{opacity:1,y:0,duration:.5},"-=0.4").fromTo(((je=ce.current)==null?void 0:je.children)||[],{opacity:0,x:-20},{opacity:1,x:0,stagger:.1,duration:.5},"-=0.3")});return()=>J.revert()},[u]),l.useEffect(()=>{re.current&&ae.to(re.current,{rotationY:u==="register"?180:0,duration:.6,ease:"power2.inOut"}),u==="login"&&(g(1),L(!1),z(!1))},[u]),l.useEffect(()=>{W&&Y&&i.fetchSections&&(i.fetchSections(W,Y),me(""))},[W,Y,i.fetchSections]);const ze=async()=>{var fe,je;if(!y||!y.trim())return a("Email is required.","error");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y))return a("Please enter a valid email address.","error");xe(!0);try{const Ee=await ba(y,"signup");a(Ee.data.message||"OTP sent successfully","success"),L(!0)}catch(Ee){a(((je=(fe=Ee.response)==null?void 0:fe.data)==null?void 0:je.message)||"Failed to send OTP","error")}finally{xe(!1)}},Ne=async()=>{var J,fe;if(!O||O.length!==6)return a("Please enter a valid 6-digit OTP.","error");xe(!0);try{await Tl(y,O),a("Email verified!","success"),z(!0),g(2)}catch(je){a(((fe=(J=je.response)==null?void 0:J.data)==null?void 0:fe.message)||"Invalid OTP","error")}finally{xe(!1)}},Ke=J=>{const je=/[A-Z]/.test(J),Ee=/[a-z]/.test(J),F=/[0-9]/.test(J),ne=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(J);return{isValid:J.length>=8&&je&&Ee&&F&&ne,errors:{minLength:J.length>=8,hasUpperCase:je,hasLowerCase:Ee,hasNumber:F,hasSpecialChar:ne}}},Je=async()=>{if(!C.trim())return a("SRN is required.","error");if(!k.trim())return a("Full Name is required.","error");if(!D)return a("Password is required.","error");if(!_)return a("Please confirm your password.","error");if(!W)return a("Please select a degree.","error");if(!Y)return a("Please select a semester.","error");if(!le)return a("Please select a section.","error");if(!Ke(D).isValid)return a("Password must contain: at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character.","error");if(D!==_)return a("Passwords do not match.","error");s({srn:C,name:k,email:y,password:D,degree:W,semester:parseInt(Y),section:le,otp:O,role:r.toLowerCase()})},Ge=async()=>{if(!h||!b)return ae.fromTo(re.current,{x:-10},{x:10,duration:.08,repeat:6,yoyo:!0,ease:"none",clearProps:"x"}),a("Please enter email and password.","error");xe(!0);try{await t(h,b),ae.to(re.current,{scale:1.05,opacity:0,rotationY:10,duration:.4,ease:"power2.in"})}catch{xe(!1),ae.fromTo(re.current,{x:-10},{x:10,duration:.08,repeat:6,yoyo:!0,ease:"none",clearProps:"x"})}};return e.jsx("div",{style:{perspective:"1000px"},className:"w-full max-w-md mx-auto",children:e.jsxs("div",{ref:re,className:"relative w-full transition-all duration-500",style:{transformStyle:"preserve-3d"},children:[e.jsxs("div",{className:`${u==="register"?"relative":"absolute inset-0"} w-full min-h-[400px] bg-slate-900/40 md:bg-slate-900/80 backdrop-blur-2xl p-8 rounded-3xl shadow-2xl border border-white/10 overflow-hidden`,style:{transform:"rotateY(180deg)",backfaceVisibility:"hidden"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent opacity-50"}),e.jsx("h3",{className:"text-3xl font-bold mb-6 text-white text-center tracking-tight",children:"Join NoteOrbit"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("button",{onClick:()=>d("login"),className:"text-slate-400 hover:text-white text-sm flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"})," Back to Sign In"]})}),e.jsx("div",{className:"space-y-4",children:B?e.jsxs(e.Fragment,{children:[w===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center text-sm text-slate-400 mb-2",children:"Step 1: Verify your email"}),e.jsx(Q,{type:"email",placeholder:"Email Address *",value:y,onChange:J=>$(J.target.value),disabled:R,required:!0}),R?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{placeholder:"Enter 6-digit OTP *",value:O,onChange:J=>I(J.target.value),maxLength:6,className:"text-center tracking-widest font-mono",required:!0}),e.jsx("button",{disabled:oe||O.length!==6,onClick:Ne,className:`w-full ${c} rounded-xl py-3 ${O.length!==6?"opacity-50 cursor-not-allowed":""}`,children:oe?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Verify & Continue"})]}):e.jsx("button",{disabled:oe||!y.trim(),onClick:ze,className:`w-full ${o} rounded-xl py-3 ${y.trim()?"":"opacity-50 cursor-not-allowed"}`,children:oe?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Send Verification Code"})]}),w===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(Q,{placeholder:"SRN *",value:C,onChange:J=>A(J.target.value),required:!0}),e.jsx(Q,{placeholder:"Full Name *",value:k,onChange:J=>T(J.target.value),required:!0}),e.jsxs("div",{children:[e.jsx(Q,{type:"password",placeholder:"Password *",value:D,onChange:J=>q(J.target.value),required:!0}),D&&e.jsxs("div",{className:"mt-2 p-3 bg-slate-800/50 rounded-lg border border-white/10 text-xs text-slate-300",children:[e.jsx("div",{className:"font-semibold mb-2 text-slate-200",children:"Password must contain:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`flex items-center ${D.length>=8?"text-green-400":"text-slate-400"}`,children:[D.length>=8?"":""," At least 8 characters"]}),e.jsxs("div",{className:`flex items-center ${/[A-Z]/.test(D)?"text-green-400":"text-slate-400"}`,children:[/[A-Z]/.test(D)?"":""," One uppercase letter (A-Z)"]}),e.jsxs("div",{className:`flex items-center ${/[a-z]/.test(D)?"text-green-400":"text-slate-400"}`,children:[/[a-z]/.test(D)?"":""," One lowercase letter (a-z)"]}),e.jsxs("div",{className:`flex items-center ${/[0-9]/.test(D)?"text-green-400":"text-slate-400"}`,children:[/[0-9]/.test(D)?"":""," One number (0-9)"]}),e.jsxs("div",{className:`flex items-center ${/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(D)?"text-green-400":"text-slate-400"}`,children:[/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(D)?"":""," One special character (!@#$%^&*...)"]})]})]})]}),e.jsx(Q,{type:"password",placeholder:"Confirm Password *",value:_,onChange:J=>M(J.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(K,{value:W,onChange:J=>X(J.target.value),required:!0,children:[e.jsx("option",{value:"",className:"text-gray-900",children:"Degree *"}),(v||[]).map(J=>e.jsx("option",{value:J,className:"text-gray-900",children:J},J))]}),e.jsxs(K,{value:Y,onChange:J=>ue(J.target.value),required:!0,children:[e.jsx("option",{value:"",className:"text-gray-900",children:"Sem *"}),Array.from({length:8},(J,fe)=>fe+1).map(J=>e.jsxs("option",{value:J,className:"text-gray-900",children:["Sem ",J]},J))]}),e.jsxs(K,{value:le,onChange:J=>me(J.target.value),required:!0,disabled:!S||S.length===0,children:[e.jsx("option",{value:"",className:"text-gray-900",children:"Section *"}),(S||[]).map(J=>e.jsxs("option",{value:J,className:"text-gray-900",children:["Sec ",J]},J))]})]}),e.jsx("button",{onClick:Je,className:`w-full ${c} rounded-xl py-3`,children:"Complete Registration"})]})]}):e.jsx("div",{className:"text-center text-slate-400",children:"Admin/Faculty registration is restricted. Contact IT."})})]}),e.jsxs("div",{className:`${u==="login"?"relative":"absolute inset-0"} w-full bg-black/20 md:bg-slate-900/60 backdrop-blur-2xl p-8 rounded-3xl shadow-2xl border border-white/10 overflow-hidden`,style:{backfaceVisibility:"hidden"},children:[j&&e.jsx(fn,{onClose:()=>p(!1),showMessage:a,primaryButtonClass:o,userRole:r}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-50"}),e.jsxs("h3",{ref:Ue,className:"text-3xl font-bold mb-8 text-white text-center tracking-tight",children:[r," Portal"]}),B&&e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"flex space-x-1 bg-slate-950/50 p-1.5 rounded-full shadow-inner border border-white/5",children:[e.jsx("button",{onClick:()=>d("login"),className:"px-8 py-2.5 rounded-full font-bold text-sm bg-blue-600 text-white shadow-lg shadow-blue-500/25",children:"Sign In"}),e.jsx("button",{onClick:()=>d("register"),className:"px-8 py-2.5 rounded-full font-bold text-sm text-slate-400 hover:text-white hover:bg-white/5",children:"Sign Up"})]})}),e.jsxs("div",{ref:ce,className:"space-y-5",children:[e.jsx(Q,{icon:te?lt:Ce,placeholder:te?"Ward's SRN":"Email Address",value:h,onChange:J=>m(J.target.value)}),e.jsxs("div",{children:[e.jsx(Q,{icon:pt,type:"password",placeholder:"Password",value:b,onChange:J=>x(J.target.value)}),e.jsx("div",{className:"text-right mt-2",children:e.jsx("button",{onClick:()=>p(!0),className:"text-xs text-blue-400 hover:text-blue-300",children:"Forgot Password?"})})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{className:`${f} flex-1 bg-slate-800 text-slate-300`,onClick:()=>n("user_type"),disabled:oe,children:[e.jsx($e,{className:"w-5 h-5 mr-1"})," Back"]}),e.jsx("button",{className:`${f} flex-1 ${o} bg-gradient-to-r from-blue-600 to-indigo-600`,onClick:Ge,disabled:oe,children:oe?e.jsx(H,{className:"w-5 h-5 animate-spin mx-auto"}):"Sign In"})]})]})]})]})})}function ja({showMessage:t}){const[s,a]=l.useState([]),[r,n]=l.useState(!0),i=l.useCallback(async()=>{var o,c;n(!0);try{const f=await V().get("/student/feedback");a(f.data.feedback||[])}catch(f){f.response&&f.response.status!==401&&t(((c=(o=f.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to fetch faculty feedback.","error"),a([])}finally{n(!1)}},[t]);return l.useEffect(()=>{i()},[i]),r?e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-yellow-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-yellow-500 flex items-center",children:[e.jsx(tt,{className:"w-6 h-6 mr-2"})," Faculty Feedback Report"]}),s.length===0&&e.jsx("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-400",children:"No personalized feedback has been sent by faculty yet."}),e.jsx("div",{className:"space-y-4",children:s.map((o,c)=>e.jsxs("div",{className:"bg-yellow-900/20 p-5 rounded-xl shadow-lg border-l-4 border-yellow-500 backdrop-blur-sm",children:[e.jsxs("div",{className:"font-bold text-lg text-yellow-100 mb-2",children:["Subject: ",o.subject]}),e.jsx("p",{className:"text-slate-300 whitespace-pre-wrap border-l-2 border-yellow-500/30 pl-3 py-1 text-[0.95rem]",children:o.text}),e.jsxs("div",{className:"text-xs text-yellow-500/60 mt-3 pt-2 border-t border-yellow-500/20",children:["Sent by Faculty ID: ",o.faculty_id," on ",new Date(o.created_at).toLocaleDateString()]})]},c))})]})}function gn({user:t,showMessage:s,catalogs:a,primaryButtonClass:r,buttonClass:n}){const{fetchSubjects:i,subjects:o}=a,[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState([]),[b,x]=l.useState([]),[j,p]=l.useState(!1),v=l.useMemo(()=>{const g=(h||[]).map(C=>((C==null?void 0:C.document_type)||"").trim()).filter(Boolean);return Array.from(new Set(g)).sort((C,A)=>C.localeCompare(A))},[h]),S=l.useMemo(()=>Array.isArray(h)?!u||u.trim()===""?[]:h.filter(g=>((g==null?void 0:g.document_type)||"").trim()===u):[],[h,u]),N=l.useCallback(async g=>{if(!g||!t.degree||!t.semester){m([]),x([]);return}p(!0);try{const[C,A]=await Promise.all([V().get("/notes",{params:{degree:t.degree,semester:t.semester,subject:g}}),V().get("/notices",{params:{subject:g}})]);m(C.data.notes||[]),x(A.data.notices||[])}catch(C){C.response&&C.response.status!==401&&s("Failed to load content.","error"),m([]),x([])}finally{p(!1)}},[t.degree,t.semester,s]);l.useEffect(()=>{t&&t.degree&&t.semester?i(t.degree,t.semester):i(null,null)},[t.degree,t.semester,i]),l.useEffect(()=>{let g=c;Array.isArray(o)&&o.length>0?(!g||!o.includes(g))&&(g=o[0],f(g)):(f(""),g=null),g?N(g):(m([]),x([]))},[o,c,N]);const w=()=>{c&&N(c)};return!t.degree||!t.semester?e.jsx("div",{className:"text-center p-10 bg-white rounded-xl shadow-md text-gray-500",children:"Student profile missing degree/semester information. Please contact admin."}):!o||o.length===0?e.jsxs("div",{className:"text-center p-10 bg-white rounded-xl shadow-md text-gray-500",children:["No subjects are currently defined for ",t.degree," Sem ",t.semester,"."]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-blue-900/20 p-6 rounded-xl border border-blue-500/20 shadow-inner backdrop-blur-sm",children:[e.jsx("strong",{className:"text-xl text-blue-400 block mb-1",children:"Content Context"}),e.jsxs("div",{className:"text-sm text-blue-200",children:[t.degree," (Semester ",t.semester," / Section ",t.section,")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center pt-4",children:[e.jsx("label",{className:"text-base text-blue-100 font-bold flex-shrink-0",children:"Filter Subject:"}),e.jsx(K,{className:"flex-1 max-w-xs",value:c||"",onChange:g=>f(g.target.value),disabled:!o.length||j,children:Array.isArray(o)&&o.map(g=>e.jsx("option",{value:g,className:"text-slate-900",children:g},g))}),e.jsxs(K,{className:"flex-1 max-w-xs",value:u,onChange:g=>d(g.target.value),disabled:j||h.length===0,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Choose Resource Type"}),v.map(g=>e.jsx("option",{value:g,className:"text-slate-900",children:g},g))]}),e.jsxs("button",{className:`${n} bg-slate-700 hover:bg-slate-600 text-white text-sm sm:w-48 py-2.5`,onClick:w,disabled:j||!c,children:[j?e.jsx(H,{className:"animate-spin w-5 h-5 mr-1"}):e.jsx(bt,{className:"w-5 h-5 mr-1"}),j?"Refreshing...":"Refresh Content"]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-bold mt-4 mb-4 text-blue-400 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2"}),' Notes for "',c||"...",'"']}),j&&e.jsx("div",{className:"text-center p-4",children:e.jsx(H,{className:"animate-spin w-5 h-5 mx-auto text-blue-500"})}),!j&&!u&&e.jsx("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-300 text-sm text-center",children:"Please select a document type (Notes, Question Bank, or Reference Book) to view documents."}),!j&&u&&h.length===0&&e.jsxs("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500 text-sm",children:["No notes uploaded for ",c," yet."]}),!j&&u&&h.length>0&&S.length===0&&e.jsxs("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500 text-sm",children:["No documents found for ",e.jsx("b",{className:"text-slate-200",children:u}),"."]}),!j&&u&&S.length>0&&e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(g=>e.jsxs("div",{className:"p-4 rounded-xl shadow-md border-l-4 border-blue-500 bg-slate-800 hover:bg-slate-700 transition duration-200",children:[e.jsxs("div",{className:"font-bold text-lg text-white truncate",children:[g.title," ",e.jsxs("span",{className:"text-xs text-blue-400",children:["(",g.document_type,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[g.uploader_role==="admin"?e.jsx("span",{className:"bg-red-500/20 text-red-300 text-[10px] px-2 py-0.5 rounded border border-red-500/30",children:"Uploaded by Admin"}):g.uploader_role==="professor"?e.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 text-[10px] px-2 py-0.5 rounded border border-emerald-500/30",children:"Uploaded by Faculty"}):null,e.jsxs("div",{className:"text-xs text-slate-400",children:[g.subject," | ",new Date(g.timestamp).toLocaleDateString()]})]}),e.jsx("div",{className:"mt-3",children:g.file_url&&e.jsx("a",{className:`py-1.5 px-4 text-sm font-semibold rounded-full inline-flex items-center ${r}`,href:g.file_url,target:"_blank",rel:"noopener noreferrer",children:"View"})})]},g.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-bold mt-8 mb-4 text-red-400 flex items-center",children:[e.jsx(At,{className:"w-5 h-5 mr-2"}),' Notices for "',c||"...",'"']}),!j&&b.length===0&&e.jsxs("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500 text-sm",children:["No recent notices for ",c," matching your context."]}),e.jsx("div",{className:"space-y-4",children:b.map(g=>e.jsxs("div",{className:"p-4 bg-red-900/20 border-l-4 border-red-500 rounded-xl shadow-md backdrop-blur-sm",children:[e.jsx("div",{className:"font-bold text-xl text-red-400",children:g.title}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Subject: ",g.subject," | Target: ",g.degree," Sem ",g.semester," Sec ",g.section]}),e.jsx("p",{className:"mt-2 text-slate-200 text-[0.95rem]",children:g.message}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-red-500/20",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["Posted by: ",g.professor_name," on ",new Date(g.created_at).toLocaleDateString(),g.deadline&&e.jsxs("span",{className:"font-bold text-red-400 block mt-1",children:["Deadline: ",new Date(g.deadline).toLocaleDateString()]})]}),g.attachment_url&&e.jsx("a",{href:g.attachment_url,className:"py-1.5 px-4 text-sm font-semibold rounded-full inline-flex items-center bg-red-600 hover:bg-red-700 text-white",target:"_blank",rel:"noopener noreferrer",children:"Attachment"})]})]},g.id))})]})]})}function Na({user:t,showMessage:s,primaryButtonClass:a,buttonClass:r}){const[n,i]=l.useState([]),[o,c]=l.useState(!0),f=l.useCallback(async()=>{c(!0);try{const h=await V().get("/fees/list");i(h.data.fees||[])}catch(h){h.response&&h.response.status!==401&&s("Failed to fetch fee list.","error"),i([])}finally{c(!1)}},[s]);l.useEffect(()=>{f()},[f]);const u=async h=>{var m,b;try{const x=await V().post("/fees/pay",{target_id:h}),{order_id:j}=x.data;window.location.href=`${xn}/demo/checkout/${j}`}catch(x){x.response&&x.response.status!==401&&s(((b=(m=x.response)==null?void 0:m.data)==null?void 0:b.message)||"Payment initiation failed.","error")}},d=async h=>{var m,b;try{const x=await V().get(`/fees/receipt/${h}`);window.open(x.data.receipt_url,"_blank")}catch(x){x.response&&x.response.status!==401&&s(((b=(m=x.response)==null?void 0:m.data)==null?void 0:b.message)||"Failed to get receipt URL. It may have expired.","error")}};return o?e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-blue-400 flex items-center",children:[e.jsx(We,{className:"w-6 h-6 mr-2"})," Fee Payment History"]}),n.length===0&&e.jsx("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500",children:"No fee notifications found for your account."}),e.jsx("div",{className:"space-y-4",children:n.map(h=>e.jsxs("div",{className:`p-4 rounded-xl shadow-lg transition duration-200 ${h.status==="paid"?"bg-green-900/20 border-l-4 border-green-500":"bg-red-900/20 border-l-4 border-red-500"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-lg text-white",children:[h.title," ",e.jsxs("span",{className:"text-xs font-normal text-slate-400",children:["(",h.category,")"]})]}),e.jsxs("div",{className:"text-sm text-slate-300 mt-1",children:["Amount: ",e.jsxs("strong",{className:"text-white",children:["",h.amount]})," | Due: ",h.due_date?new Date(h.due_date).toLocaleDateString():"N/A"]})]}),e.jsxs("div",{className:"flex-shrink-0 ml-4",children:[h.status==="pending"&&e.jsx("button",{className:`${r} w-32 py-2.5 ${a}`,onClick:()=>u(h.target_id),children:"Pay Now"}),h.status==="paid"&&e.jsx("button",{className:`${r} w-32 py-2.5 bg-green-600 hover:bg-green-700 text-white`,onClick:()=>d(h.payment_id),children:"Receipt"})]})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-2 border-t border-white/10 pt-1",children:["Status: **",h.status.toUpperCase(),"** ",h.paid_at&&`on ${new Date(h.paid_at).toLocaleDateString()}`]})]},h.target_id))})]})}function wa({showMessage:t}){const[s,a]=l.useState({}),[r,n]=l.useState(!0),i=l.useCallback(async()=>{var f,u;n(!0);try{const d=await V().get("/student/marks");a(d.data.marks||{})}catch(d){d.response&&d.response.status!==401&&t(((u=(f=d.response)==null?void 0:f.data)==null?void 0:u.message)||"Failed to fetch marks data.","error"),a({})}finally{n(!1)}},[t]);l.useEffect(()=>{i()},[i]);const o=f=>{if(!f||f.length===0)return{obtained:0,max:0,percent:0};const u=f.reduce((m,b)=>m+(parseFloat(b.marks_obtained)||0),0),d=f.reduce((m,b)=>m+(parseFloat(b.max_marks)||0),0),h=d>0?(u/d*100).toFixed(1):0;return{obtained:u.toFixed(1),max:d.toFixed(1),percent:h}};if(r)return e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-blue-500"})});const c=Object.keys(s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-blue-400 flex items-center",children:[e.jsx(Ye,{className:"w-6 h-6 mr-2"})," Academic Marks Report"]}),c.length===0&&e.jsx("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500",children:"No marks have been recorded for your subjects yet."}),e.jsx("div",{className:"space-y-6",children:c.map(f=>{const u=o(s[f]);return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-5 rounded-xl shadow-lg border-l-4 border-yellow-500",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[e.jsx("h5",{className:"text-xl font-bold text-white",children:f}),e.jsxs("div",{className:`text-lg font-semibold px-3 py-1 rounded-full ${u.percent>=75?"bg-green-900/40 text-green-300":"bg-yellow-900/40 text-yellow-300"}`,children:[u.percent,"% Overall"]})]}),e.jsx("div",{className:"pt-3 space-y-2",children:s[f].map((d,h)=>e.jsxs("div",{className:"flex justify-between text-sm text-slate-300 border-b border-dashed border-white/10 last:border-b-0 py-1",children:[e.jsxs("span",{className:"font-medium capitalize",children:[d.exam_type,":"]}),e.jsxs("span",{className:"font-semibold text-white",children:[d.marks_obtained," / ",d.max_marks]})]},h))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10 text-sm font-semibold text-white flex justify-between",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:[u.obtained," / ",u.max]})]})]},f)})})]})}const jn=({auditTrail:t})=>{const s=[...t].sort((a,r)=>new Date(r.timestamp)-new Date(a.timestamp));return e.jsxs("div",{className:"mt-4 p-4 bg-slate-900 border border-red-500/20 rounded-lg",children:[e.jsx("h3",{className:"text-md font-semibold text-slate-300 mb-3",children:"Tracking History"}),e.jsx("div",{className:"relative border-l border-red-500/50 pl-4 space-y-3",children:s.map((a,r)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full mt-1 -left-[18px] border-4 border-slate-900"}),e.jsxs("p",{className:"text-sm font-medium text-slate-200",children:["Status: ",e.jsx("span",{className:"font-bold text-red-400",children:a.status})]}),a.note&&e.jsxs("p",{className:"text-xs text-slate-400 italic",children:["Note: ",a.note]}),e.jsxs("p",{className:"text-xs text-slate-500 italic mt-0.5",children:[new Date(a.timestamp).toLocaleString()," by ",a.by]})]},r))})]})};function va({showMessage:t,primaryButtonClass:s,buttonClass:a}){const[r,n]=l.useState(""),[i,o]=l.useState(""),[c,f]=l.useState(null),[u,d]=l.useState(!1),[h,m]=l.useState([]),[b,x]=l.useState(!0),[j,p]=l.useState("checking"),v=l.useCallback(async()=>{var N,w;x(!0),p("checking");try{const g=await V().get("/student/hostel/complaints");m(g.data.complaints||[]),p("allowed")}catch(g){g.response&&(g.response.status===403||g.response.data.message&&g.response.data.message.includes("not allowed")?p("not_allowed"):g.response.status!==401&&(t(((w=(N=g.response)==null?void 0:N.data)==null?void 0:w.message)||"Failed to load complaint history.","error"),p("error"))),m([])}finally{x(!1)}},[t]);l.useEffect(()=>{v()},[v]);const S=async()=>{var w,g;if(!r||!i)return t("Title and description are required.","error");d(!0);const N=new FormData;N.append("title",r),N.append("description",i),c&&N.append("attachment",c);try{const C=await V().post("/hostel/complaints",N);t(C.data.message,"success"),n(""),o(""),f(null),document.getElementById("complaintAttachment")&&(document.getElementById("complaintAttachment").value=""),v()}catch(C){const A=((g=(w=C.response)==null?void 0:w.data)==null?void 0:g.message)||"Failed to submit complaint. Check allocation status.";C.response&&C.response.status===403&&p("not_allowed"),t(A,"error")}finally{d(!1)}};return b&&j==="checking"?e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-red-500"})}):j==="not_allowed"?e.jsxs("div",{className:"text-center p-10 bg-red-900/20 rounded-xl shadow-md border border-red-500/30",children:[e.jsx(Ie,{className:"w-10 h-10 mx-auto text-red-500 mb-4"}),e.jsx("h4",{className:"text-2xl font-bold text-red-400",children:"Complaint Submission Blocked"}),e.jsx("p",{className:"text-lg text-red-300 mt-2",children:"**Not allowed for complaining as no hostel is allotted for you.**"}),e.jsx("p",{className:"text-sm text-slate-400 mt-4",children:"Please contact the administration if you believe this is an error."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-red-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-red-400 flex items-center",children:[e.jsx(et,{className:"w-6 h-6 mr-2"})," Raise Hostel Complaint"]}),e.jsx(Q,{placeholder:"Complaint Title (e.g., Water leakage in Room 101)",value:r,onChange:N=>n(N.target.value),disabled:u}),e.jsx("textarea",{className:"w-full bg-slate-800/50 backdrop-blur-xl text-white placeholder-slate-500 border border-white/10 rounded-xl py-3 px-4 focus:ring-2 focus:ring-red-500/50 outline-none transition duration-200 h-32",placeholder:"Detailed description of the issue...",value:i,onChange:N=>o(N.target.value),disabled:u}),e.jsx("label",{className:"block text-sm text-slate-300 font-medium pt-2",children:"Attach Image/File (Optional):"}),e.jsx("input",{id:"complaintAttachment",type:"file",onChange:N=>f(N.target.files[0]),className:"w-full text-slate-300 bg-slate-800/50 rounded-lg p-3 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-600 file:text-white hover:file:bg-red-700 transition duration-200",disabled:u}),e.jsxs("button",{className:`${a} ${s} bg-red-600 hover:bg-red-700 text-white w-full`,onClick:S,disabled:u||!r||!i,children:[u?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Ce,{className:"w-5 h-5 mr-2"}),u?"Submitting...":"Submit Complaint"]})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-xl font-bold text-red-400 flex items-center",children:[e.jsx(ye,{className:"w-5 h-5 mr-2"})," Your Complaint History (",h.length,")"]}),e.jsx("button",{onClick:v,className:"p-2 bg-slate-700 rounded-full hover:bg-slate-600 transition",disabled:b,children:e.jsx(bt,{className:"w-5 h-5 text-slate-300"})})]}),b?e.jsx("div",{className:"text-center p-4",children:e.jsx(H,{className:"animate-spin w-5 h-5 mx-auto text-red-500"})}):h.length===0?e.jsx("div",{className:"p-4 text-slate-500 text-center",children:"You have no active or historical complaints."}):e.jsx("div",{className:"space-y-6",children:h.map(N=>e.jsxs("div",{className:`p-4 rounded-xl shadow-md border-l-4 ${N.status==="Resolved"||N.status==="Closed"?"border-green-500 bg-green-900/20":N.status.includes("Progress")||N.status.includes("Review")?"border-orange-500 bg-orange-900/20":"border-red-500 bg-red-900/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-white",children:N.title}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Room: ",N.room_number," in ",N.hostel_name]})]}),e.jsx("div",{className:`text-sm px-3 py-1 rounded-full font-semibold ${N.status==="Resolved"||N.status==="Closed"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:N.status})]}),e.jsx(jn,{auditTrail:N.audit_trail||[]}),N.file_url&&e.jsx("a",{href:N.file_url,className:"mt-3 inline-flex items-center text-xs text-blue-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"View Attachment"})]},N.id))})]})]})}function ya({showMessage:t,primaryButtonClass:s,buttonClass:a}){const[r,n]=l.useState(""),[i,o]=l.useState("internal"),[c,f]=l.useState([]),[u,d]=l.useState(!1),h=l.useCallback(async()=>{var x,j;if(!r.trim()){f([]);return}d(!0);const b=encodeURIComponent(r.trim());try{const p=await V().get(`/api/library/search?q=${b}&source=${i}`);f(p.data.books||[])}catch(p){p.response&&p.response.status!==401&&t(((j=(x=p.response)==null?void 0:x.data)==null?void 0:j.message)||`Search failed against ${i} library.`,"error"),f([])}finally{d(!1)}},[r,i,t]),m=c;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-blue-400 flex items-center",children:[e.jsx(pe,{className:"w-6 h-6 mr-2"})," Unified Library Search"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsxs(K,{className:"sm:w-40 flex-shrink-0",value:i,onChange:b=>o(b.target.value),disabled:u,children:[e.jsx("option",{value:"internal",className:"text-slate-900",children:"Internal Library"}),e.jsx("option",{value:"openlibrary",className:"text-slate-900",children:"OpenLibrary API"})]}),e.jsx(Q,{icon:Ve,className:"flex-grow py-3 px-4 rounded-full",placeholder:"Search for book title, author, or ISBN...",value:r,onChange:b=>n(b.target.value),onKeyDown:b=>{b.key==="Enter"&&h()},disabled:u}),e.jsx("button",{className:`${a} w-32 py-3 ${s}`,onClick:h,disabled:u||!r.trim(),children:u?e.jsx(H,{className:"animate-spin w-5 h-5"}):"Search"})]}),u&&e.jsx("div",{className:"text-center p-4",children:e.jsx(H,{className:"animate-spin w-6 h-6 mx-auto text-blue-500"})}),!u&&r.trim()&&m.length===0&&e.jsxs("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500",children:['No results found for "',r,'" in the ',i," library."]}),!u&&m.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 font-semibold",children:[m.length," result(s) found."]}),m.map((b,x)=>e.jsx("div",{className:`p-4 rounded-xl shadow-md ${b.source==="Internal"?"bg-green-900/20 border-l-4 border-green-500":"bg-slate-900/60 border-l-4 border-slate-500"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-lg text-white",children:b.title}),e.jsxs("div",{className:"text-sm text-slate-400 mt-1",children:["Author: **",b.author,"** | ISBN: ",b.isbn||"N/A"]}),e.jsxs("div",{className:"text-xs mt-1 text-slate-500",children:["Source: ",b.source]})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:b.source==="Internal"&&b.file_url?e.jsxs("a",{href:b.file_url,target:"_blank",rel:"noopener noreferrer",className:"py-1.5 px-4 text-sm font-semibold rounded-full inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Tt,{className:"w-4 h-4 mr-1"})," View"]}):b.cover_url?e.jsx("a",{href:`https://openlibrary.org/search?q=${b.isbn||b.title}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:b.cover_url,onError:j=>{j.target.onerror=null,j.target.src="https://placehold.co/50x70/E0E0E0/505050?text=No+Cover"},className:"w-12 h-16 object-cover rounded shadow-md",alt:"Cover"})}):e.jsx("span",{className:"text-xs text-slate-500 bg-slate-800 p-2 rounded-full",children:"No View"})})]})},b.id||x))]})]})}function Sa({showMessage:t,primaryButtonClass:s,buttonClass:a}){const[r,n]=l.useState(""),[i,o]=l.useState([]),[c,f]=l.useState([]),[u,d]=l.useState(null),[h,m]=l.useState(!1),[b,x]=l.useState(null),j=l.useRef(null),[p,v]=l.useState(window.innerWidth>=768),S={role:"ai",text:"Hello! I am Orbit Bot, your academic assistant. Ask me anything about your studies, or upload notes for me to analyze."};l.useEffect(()=>{N(),o([S])},[]);const N=async()=>{try{const y=await V().get("/ai/sessions");f(y.data.sessions||[])}catch(y){console.error(y)}},w=async y=>{if(u!==y){m(!0),d(y);try{const $=await V().get(`/ai/session/${y}`);o($.data.messages||[])}catch{t("Failed to retrieve chat history","error")}finally{m(!1)}}},g=()=>{d(null),o([S]),n(""),x(null),j.current&&(j.current.value="")},C=async(y,$)=>{var D,q;y.stopPropagation(),y.preventDefault(),console.log("Attempting to delete session:",$);try{console.log("Sending DELETE request..."),await V().delete(`/ai/session/${$}`),console.log("Delete success"),f(_=>_.filter(M=>M.id!==$)),u===$&&g()}catch(_){console.error("Delete Session Failed:",_),t(`Failed to delete session: ${((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||_.message}`,"error")}};l.useEffect(()=>{const y=document.getElementById("chat-history");y&&(y.scrollTop=y.scrollHeight)},[i]);const A=y=>{y.target.files&&y.target.files[0]&&x(y.target.files[0])},k=async()=>{var D,q;if(!r.trim()&&!b||h)return;const y=b?`${r} [Attached: ${b.name}]`:r,$=[...i,{role:"user",text:y}];o($),n(""),m(!0);try{let _;const M=new FormData;M.append("question",r),u&&M.append("session_id",u),b&&M.append("file",b),_=await V().post("/chat",M,{headers:{"Content-Type":"multipart/form-data"}}),_.data.session_id&&_.data.session_id!==u&&d(_.data.session_id),N(),o(O=>[...O,{role:"ai",text:_.data.answer}]),x(null),j.current&&(j.current.value="")}catch(_){_.response&&_.response.status!==401&&t(`Chat failed: ${((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||"Could not connect to AI service."}`,"error"),o(M=>[...M,{role:"ai",text:"I'm sorry, I couldn't connect to the AI service."}])}finally{m(!1)}},T=y=>{y.key==="Enter"&&!h&&k()};return e.jsxs("div",{className:"flex h-[600px] gap-4 relative isolate overflow-hidden",children:[e.jsxs("div",{className:`
                absolute inset-y-0 left-0 z-50 h-full w-3/4 max-w-xs bg-slate-900/95 backdrop-blur-2xl border-r border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] transition-transform duration-300 ease-out
                md:static md:w-1/4 md:bg-slate-900/60 md:shadow-none md:translate-x-0 md:backdrop-blur-xl md:border md:rounded-xl md:flex md:flex-col
                ${p?"translate-x-0":"-translate-x-full md:w-0 md:border-0 md:p-0"}
            `,children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-slate-900 to-slate-800/50",children:[e.jsxs("h5",{className:"font-bold text-slate-200 flex items-center gap-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-blue-400"})," History"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(!1),className:"md:hidden p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:g,className:"p-1.5 px-3 bg-blue-600 rounded-lg text-xs font-semibold text-white hover:bg-blue-500 flex items-center shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[e.jsx(Le,{className:"w-3.5 h-3.5 mr-1.5"})," New"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 bg-slate-900/50",children:[c.map(y=>e.jsxs("div",{onClick:()=>{w(y.id),v(!1)},className:`p-3 rounded-xl text-sm cursor-pointer flex justify-between items-center group transition-all border border-transparent ${u===y.id?"bg-blue-600/20 text-blue-100 border-blue-500/30 shadow-sm":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[e.jsx("div",{className:"truncate pr-2 flex-grow font-medium",children:y.title}),e.jsx("button",{onClick:$=>C($,y.id),className:"text-slate-500 hover:text-red-400 p-1.5 hover:bg-white/10 rounded-lg transition-colors opacity-0 group-hover:opacity-100 mobile-visible",title:"Delete Chat",children:e.jsx(Ae,{className:"w-4 h-4"})})]},y.id)),c.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500 gap-2",children:[e.jsx(tt,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{className:"text-xs",children:"No recent chats"})]})]})]}),p&&e.jsx("div",{className:"absolute inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden animate-in fade-in duration-200",onClick:()=>v(!1)}),e.jsxs("div",{className:"flex-1 w-full flex flex-col bg-slate-900/60 backdrop-blur-xl border border-white/10 md:border-blue-500/20 rounded-xl overflow-hidden relative shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-slate-800/40 backdrop-blur-md z-10",children:[e.jsxs("div",{className:"flex items-center text-blue-400 font-bold text-lg",children:[e.jsx("button",{onClick:()=>v(!p),className:"mr-3 p-1 rounded-lg hover:bg-white/5 transition-colors",children:e.jsx(_e,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex flex-col leading-none",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300",children:"Orbit Bot"})]}),e.jsx("span",{className:"text-[10px] font-normal text-slate-500 mt-1 hidden md:block",children:"Powered by Llama 3.3"})]})]}),e.jsx("div",{className:"text-xs font-medium px-3 py-1 bg-blue-500/10 text-blue-300 rounded-full border border-blue-500/20",children:u?"Active Session":"New Chat"})]}),e.jsxs("div",{id:"chat-history",className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-950/30 scroll-smooth",children:[i.length===0&&!h&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 opacity-60",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(Oa,{className:"w-8 h-8 text-blue-400"})}),e.jsx("p",{className:"text-sm font-medium",children:"How can I help you today?"})]}),i.map((y,$)=>e.jsx("div",{className:`flex ${y.role==="ai"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-[85%] md:max-w-[75%] p-3.5 rounded-2xl text-sm leading-relaxed shadow-md ${y.role==="ai"?"bg-slate-800 text-slate-200 border border-white/5 rounded-tl-none":"bg-gradient-to-br from-blue-600 to-blue-700 text-white border border-blue-500/20 rounded-tr-none"}`,children:[e.jsx("div",{className:"markdown-prose",children:y.text}),e.jsx("div",{className:`text-[10px] mt-1 opacity-50 ${y.role==="ai"?"text-slate-400":"text-blue-100 text-right"}`,children:y.role==="ai"?"Orbit AI":"You"})]})},$)),h&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-slate-800/80 p-3 rounded-2xl rounded-tl-none text-sm text-blue-300 flex items-center border border-white/5 shadow-sm",children:[e.jsx(H,{className:"animate-spin w-4 h-4 mr-2.5"}),e.jsx("span",{className:"font-medium animate-pulse",children:"Thinking..."})]})})]}),e.jsx("div",{className:"p-3 md:p-4 bg-slate-900 border-t border-white/10 z-20",children:e.jsxs("div",{className:"flex flex-col space-y-2 max-w-4xl mx-auto",children:[b&&e.jsxs("div",{className:"flex items-center justify-between bg-blue-900/20 border border-blue-500/30 px-3 py-2 rounded-lg animate-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-600/20 p-1.5 rounded text-blue-400",children:e.jsx(Ns,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"text-xs font-medium text-blue-200 truncate",children:b.name})]}),e.jsx("button",{onClick:()=>{x(null),j.current&&(j.current.value="")},className:"text-slate-400 hover:text-red-400 p-1 rounded-full hover:bg-white/5",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-end gap-2 bg-slate-800/50 p-1.5 rounded-2xl border border-white/10 focus-within:ring-2 focus-within:ring-blue-500/50 focus-within:border-blue-500/50 transition-all shadow-sm",children:[e.jsx("button",{className:"p-3 rounded-xl text-slate-400 hover:text-blue-400 hover:bg-slate-700/50 transition-colors",onClick:()=>{var y;return(y=j.current)==null?void 0:y.click()},disabled:h,children:e.jsx(Ns,{className:"w-5 h-5"})}),e.jsx("input",{type:"file",ref:j,onChange:A,className:"hidden",accept:".pdf,.txt,.md,.py,.js,.html,.css,.json,.docx,.doc,.pptx,.ppt"}),e.jsx("div",{className:"relative flex-grow",children:e.jsx(Q,{className:"w-full py-3 px-2 bg-transparent border-none focus:ring-0 text-slate-200 placeholder:text-slate-500 text-base",placeholder:b?"Add a message...":"Ask something...",value:r,onChange:y=>n(y.target.value),onKeyDown:T,disabled:h,autoComplete:"off"})}),e.jsx("button",{className:`p-3 rounded-xl transition-all duration-200 ${!r.trim()&&!b?"bg-slate-700/50 text-slate-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-600/20 active:scale-95"}`,onClick:k,disabled:h||!r.trim()&&!b,children:h?e.jsx(H,{className:"animate-spin w-5 h-5"}):e.jsx(Lt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-[10px] text-center text-slate-600 font-medium",children:"Powered by Llama 3.3"})]})})]})]})}function Nn({showMessage:t,primaryButtonClass:s,buttonClass:a,catalogs:r,user:n}){const{subjects:i,fetchSubjects:o}=r,[c,f]=l.useState(""),[u,d]=l.useState("internal"),[h,m]=l.useState(""),[b,x]=l.useState(""),[j,p]=l.useState(""),[v,S]=l.useState(!1),[N,w]=l.useState([]),[g,C]=l.useState(""),[A,k]=l.useState(""),[T,y]=l.useState(""),[$,D]=l.useState([]),[q,_]=l.useState([]),[M,O]=l.useState([]),[I,R]=l.useState([]),L=l.useCallback(async()=>{try{const z=await V().get("/faculty/allocations");w(z.data.allocations||[])}catch(z){console.error("Alloc fetch error",z)}},[]);l.useEffect(()=>{L()},[L]),l.useEffect(()=>{if(!N.length)return;const z=[...new Set(N.map(W=>W.degree))];D(z),!g&&z.length&&C(z[0])},[N,g]),l.useEffect(()=>{if(!g)return;const z=N.filter(X=>X.degree===g),W=[...new Set(z.map(X=>X.semester))].sort((X,Y)=>X-Y);_(W),!A&&W.length&&k(String(W[0]))},[N,g,A]),l.useEffect(()=>{if(!g||!A)return;const z=N.filter(X=>X.degree===g&&X.semester==A),W=[...new Set(z.map(X=>X.section))].sort();O(W),(!T||!W.includes(T))&&y(W[0]||"")},[N,g,A,T]),l.useEffect(()=>{if(!g||!A||!T)return;const z=N.filter(X=>X.degree===g&&X.semester==A&&X.section===T),W=[...new Set(z.map(X=>X.subject))];R(W),(!c||!W.includes(c))&&f(W[0]||"")},[N,g,A,T,c]);const U=async()=>{var W,X;if(!c||!u||!h||b===""||j==="")return t("All fields are required.","error");if(parseFloat(b)>parseFloat(j))return t("Marks Obtained cannot be greater than Maximum Marks.","error");S(!0);const z={subject:c,exam_type:u,srn:h,marks_obtained:parseFloat(b),max_marks:parseFloat(j)};try{const Y=await V().post("/faculty/marks/upload",z);t(Y.data.message,"success"),m(""),x(""),p("")}catch(Y){Y.response&&Y.response.status!==401&&t(((X=(W=Y.response)==null?void 0:W.data)==null?void 0:X.message)||"Mark submission failed. Check SRN/Subject validity.","error")}finally{S(!1)}};return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-green-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold text-green-400 flex items-center",children:[e.jsx(Be,{className:"w-6 h-6 mr-2"})," Upload Single Mark Entry"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Enter marks directly per student."}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(K,{value:g,onChange:z=>C(z.target.value),disabled:v,children:$.map(z=>e.jsx("option",{value:z,className:"text-slate-900",children:z},z))}),e.jsx(K,{value:A,onChange:z=>k(z.target.value),disabled:v,children:q.map(z=>e.jsxs("option",{value:z,className:"text-slate-900",children:["Sem ",z]},z))}),e.jsx(K,{value:T,onChange:z=>y(z.target.value),disabled:v,children:M.map(z=>e.jsxs("option",{value:z,className:"text-slate-900",children:["Sec ",z]},z))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(K,{value:c,onChange:z=>f(z.target.value),disabled:!I.length||v,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Subject"}),(I||[]).map(z=>e.jsx("option",{value:z,className:"text-slate-900",children:z},z))]}),e.jsxs(K,{value:u,onChange:z=>d(z.target.value),disabled:v,children:[e.jsx("option",{value:"internal",className:"text-slate-900",children:"Internal Exam"}),e.jsx("option",{value:"mid",className:"text-slate-900",children:"Mid-Term Exam"}),e.jsx("option",{value:"endsem",className:"text-slate-900",children:"End-Semester Exam"}),e.jsx("option",{value:"assignment",className:"text-slate-900",children:"Assignment"}),e.jsx("option",{value:"lab",className:"text-slate-900",children:"Lab Viva/Report"})]})]}),e.jsx(Q,{placeholder:"Student SRN (e.g., SRN001)",value:h,onChange:z=>m(z.target.value),disabled:v}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Q,{type:"number",placeholder:"Marks Obtained",value:b,onChange:z=>x(z.target.value),disabled:v,min:"0"}),e.jsx(Q,{type:"number",placeholder:"Max Marks (Total)",value:j,onChange:z=>p(z.target.value),disabled:v,min:"1"})]}),e.jsxs("button",{className:`${a} ${s} w-full`,onClick:U,disabled:v||!c||!h||b===""||j==="",children:[v?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"}),v?"Submiting...":"Submit Mark"]})]})}function wn({showMessage:t,primaryButtonClass:s,buttonClass:a,catalogs:r,user:n}){const{subjects:i,fetchSubjects:o}=r,[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState(""),[b,x]=l.useState(!1),[j,p]=l.useState([]),[v,S]=l.useState(""),[N,w]=l.useState(""),[g,C]=l.useState(""),[A,k]=l.useState([]),[T,y]=l.useState([]),[$,D]=l.useState([]),[q,_]=l.useState([]),M=l.useCallback(async()=>{try{const I=await V().get("/faculty/allocations");p(I.data.allocations||[])}catch(I){console.error("Alloc fetch error",I)}},[]);l.useEffect(()=>{M()},[M]),l.useEffect(()=>{if(!j.length)return;const I=[...new Set(j.map(R=>R.degree))];k(I),!v&&I.length&&S(I[0])},[j,v]),l.useEffect(()=>{if(!v)return;const I=j.filter(L=>L.degree===v),R=[...new Set(I.map(L=>L.semester))].sort((L,U)=>L-U);y(R),!N&&R.length&&w(String(R[0]))},[j,v,N]),l.useEffect(()=>{if(!v||!N)return;const I=j.filter(L=>L.degree===v&&L.semester==N),R=[...new Set(I.map(L=>L.section))].sort();D(R),(!g||!R.includes(g))&&C(R[0]||"")},[j,v,N,g]),l.useEffect(()=>{if(!v||!N||!g)return;const I=j.filter(L=>L.degree===v&&L.semester==N&&L.section===g),R=[...new Set(I.map(L=>L.subject))];_(R),(!u||!R.includes(u))&&d(R[0]||"")},[j,v,N,g,u]);const O=async()=>{var I,R;if(!c||!u||!h)return t("SRN, subject, and feedback text are required.","error");x(!0);try{await V().post("/faculty/feedback",{srn:c,subject:u,text:h}),t(`Feedback saved for SRN ${c}.`,"success"),f(""),m("")}catch(L){L.response&&L.response.status!==401&&t(((R=(I=L.response)==null?void 0:I.data)==null?void 0:R.message)||"Failed to save feedback. Check if SRN is valid.","error")}finally{x(!1)}};return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-yellow-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold text-yellow-400 flex items-center",children:[e.jsx(tt,{className:"w-6 h-6 mr-2"})," Provide Student Feedback"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Send personalized academic comments to a specific student."}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(K,{value:v,onChange:I=>S(I.target.value),disabled:b,children:A.map(I=>e.jsx("option",{value:I,className:"text-slate-900",children:I},I))}),e.jsx(K,{value:N,onChange:I=>w(I.target.value),disabled:b,children:T.map(I=>e.jsxs("option",{value:I,className:"text-slate-900",children:["Sem ",I]},I))}),e.jsx(K,{value:g,onChange:I=>C(I.target.value),disabled:b,children:$.map(I=>e.jsxs("option",{value:I,className:"text-slate-900",children:["Sec ",I]},I))})]}),e.jsx(Q,{placeholder:"Student SRN (e.g., SRN001)",value:c,onChange:I=>f(I.target.value),disabled:b}),e.jsxs(K,{value:u,onChange:I=>d(I.target.value),disabled:!q.length||b,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Subject"}),(q||[]).map(I=>e.jsx("option",{value:I,className:"text-slate-900",children:I},I))]}),e.jsx("textarea",{className:"w-full bg-slate-800/50 backdrop-blur-xl text-white placeholder-slate-500 border border-white/10 rounded-xl py-3 px-4 focus:ring-2 focus:ring-yellow-500/50 outline-none transition duration-200 h-32",placeholder:"Detailed feedback message...",value:h,onChange:I=>m(I.target.value),disabled:b}),e.jsxs("button",{className:`${a} ${s} w-full bg-yellow-600 hover:bg-yellow-700 text-white`,onClick:O,disabled:b||!c||!u||!h,children:[b?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"}),b?"Sending...":"Send Feedback"]})]})}function vn({showMessage:t}){const[s,a]=l.useState([]),[r,n]=l.useState([]),[i,o]=l.useState(null),[c,f]=l.useState(""),[u,d]=l.useState(!0),[h,m]=l.useState(!1),[b,x]=l.useState(window.innerWidth>=768),j=l.useRef(null),p=()=>{var w;(w=j.current)==null||w.scrollIntoView({behavior:"smooth"})};l.useEffect(p,[r]);const v=l.useCallback(async()=>{d(!0);try{const w=await V().get("/faculty/conversations");a(w.data.conversations||[])}catch(w){console.error(w),t("Failed to load conversations","error")}finally{d(!1)}},[t]);l.useEffect(()=>{v()},[v]);const S=async w=>{o(w),x(!1);try{const g=await V().get(`/faculty/messages/${w.student_id}`);n(g.data.messages||[]),a(C=>C.map(A=>A.student_id===w.student_id?{...A,unread_count:0}:A))}catch(g){console.error(g),t("Failed to load chat history","error")}},N=async()=>{if(c.trim()){m(!0);try{await V().post("/faculty/messages/reply",{student_id:i.student_id,reply_body:c});const w={id:Date.now(),sender:"faculty",body:c,timestamp:new Date().toISOString()};n(g=>[...g,w]),f("")}catch(w){console.error(w),t("Failed to send reply","error")}finally{m(!1)}}};return u&&s.length===0?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading chats..."}):e.jsxs("div",{className:"flex h-[600px] gap-4 relative isolate overflow-hidden",children:[e.jsxs("div",{className:`
                absolute inset-y-0 left-0 z-50 h-full w-3/4 max-w-xs bg-slate-900/95 backdrop-blur-2xl border-r border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] transition-transform duration-300 ease-out
                md:static md:w-1/3 md:bg-slate-900/60 md:backdrop-blur-xl md:border md:rounded-xl md:flex md:flex-col md:shadow-none md:translate-x-0
                ${b?"translate-x-0":"-translate-x-full md:w-0 md:border-0 md:p-0"}
            `,children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[e.jsx("h5",{className:"font-bold text-lg text-white",children:"Messages"}),e.jsx("button",{onClick:()=>x(!1),className:"md:hidden p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length===0?e.jsx("div",{className:"p-4 text-center text-slate-500",children:"No active conversations."}):s.map(w=>e.jsxs("div",{onClick:()=>S(w),className:`p-4 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors ${(i==null?void 0:i.student_id)===w.student_id?"bg-blue-900/20 border-l-4 border-l-blue-500 chain-active":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("div",{className:"font-semibold text-slate-200",children:w.student_name}),w.unread_count>0&&e.jsxs("span",{className:"bg-blue-500 text-white text-[10px] px-2 py-0.5 rounded-full",children:[w.unread_count," new"]})]}),e.jsx("div",{className:"text-xs text-slate-500 truncate",children:w.last_message}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:new Date(w.last_timestamp).toLocaleDateString()})]},w.student_id))})]}),b&&e.jsx("div",{className:"absolute inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden animate-in fade-in duration-200",onClick:()=>x(!1)}),e.jsx("div",{className:`flex-1 flex flex-col bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden relative transition-all duration-300 ${b?"md:w-2/3":"w-full"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-white/10 bg-slate-800/50 flex items-center shadow-sm z-10",children:[e.jsx("button",{onClick:()=>x(!b),className:"mr-3 p-1 rounded-lg hover:bg-white/5 transition-colors text-white",children:e.jsx(_e,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:i.student_name}),e.jsxs("p",{className:"text-xs text-slate-400",children:["SRN: ",i.student_srn]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-950/30",children:[r.map((w,g)=>{const C=w.sender==="faculty";return e.jsx("div",{className:`flex ${C?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] md:max-w-[70%] p-3.5 rounded-2xl text-sm leading-relaxed shadow-sm relative ${C?"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-br-none border border-blue-500/20":"bg-slate-800 text-slate-200 rounded-bl-none border border-white/5"}`,children:[!C&&e.jsx("div",{className:"text-[10px] text-slate-400 mb-1 font-bold uppercase tracking-wider",children:"Parent"}),w.body,e.jsx("div",{className:`text-[9px] mt-1 opacity-70 ${C?"text-blue-100 text-right":"text-slate-400"}`,children:new Date(w.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},g)}),e.jsx("div",{ref:j})]}),e.jsxs("div",{className:"p-3 md:p-4 bg-slate-900 border-t border-white/10 z-20",children:[e.jsxs("div",{className:"flex gap-2 max-w-4xl mx-auto",children:[e.jsx("textarea",{className:"flex-1 bg-slate-900 text-white rounded-xl border border-white/10 p-3 text-sm focus:ring-2 focus:ring-blue-500/50 outline-none resize-none h-12",placeholder:"Type your reply...",value:c,onChange:w=>f(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),N())}}),e.jsx("button",{onClick:N,disabled:h||!c.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-xl disabled:opacity-50 transition-all active:scale-95",children:h?e.jsx(H,{className:"animate-spin w-5 h-5"}):e.jsx(Lt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-[10px] text-center text-slate-500 mt-2 hidden md:block",children:"Reply will be sent via email and saved to chat history."})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600",children:[e.jsx("div",{className:"md:hidden absolute top-4 left-4",children:e.jsx("button",{onClick:()=>x(!0),className:"p-2 bg-slate-800 rounded-lg text-white",children:e.jsx(_e,{className:"w-6 h-6"})})}),e.jsx(tt,{className:"w-16 h-16 opacity-20 mb-4"}),e.jsx("p",{children:"Select a conversation to start chatting."})]})})]})}function yn({user:t,showMessage:s,catalogs:a,buttonClass:r,successButtonClass:n,dangerButtonClass:i}){const[o,c]=l.useState("notes"),[f,u]=l.useState([]),[d,h]=l.useState([]),[m,b]=l.useState([]),[x,j]=l.useState([]),[p,v]=l.useState([]),[S,N]=l.useState(""),[w,g]=l.useState(""),[C,A]=l.useState(""),[k,T]=l.useState(""),[y,$]=l.useState(""),[D,q]=l.useState("Notes"),[_,M]=l.useState(null),[O,I]=l.useState(!1),[R,L]=l.useState(""),[U,z]=l.useState(""),[W,X]=l.useState(""),[Y,ue]=l.useState(""),[le,me]=l.useState(""),[oe,xe]=l.useState(""),[B,te]=l.useState(""),[re,Ue]=l.useState(null),[ce,ze]=l.useState(!1),Ne=l.useCallback(async()=>{try{const F=await V().get("/faculty/allocations");u(F.data.allocations||[])}catch(F){console.error("Failed to fetch allocations",F)}},[]);l.useEffect(()=>{Ne()},[Ne]),l.useEffect(()=>{if(!f.length)return;const F=[...new Set(f.map(ne=>ne.degree))];h(F),!w&&F.length&&(g(F[0]),X(F[0]))},[f,w]),l.useEffect(()=>{const F=f.filter(de=>de.degree===(o==="notes"?w:W)),ne=[...new Set(F.map(de=>de.semester))].sort((de,it)=>de-it);b(ne);const ke=o==="notes"?C:Y;if(!ke||!ne.includes(parseInt(ke))){const de=ne.length?String(ne[0]):"";o==="notes"?A(de):ue(de)}},[f,w,W,o,C,Y]),l.useEffect(()=>{const F=f.filter(we=>we.degree===(o==="notes"?w:W)&&we.semester==(o==="notes"?C:Y)),ne=[...new Set(F.map(we=>we.section))].sort();j(ne),o==="notes"?(!k||!ne.includes(k))&&T(ne[0]||""):(!le||!ne.includes(le))&&me(ne[0]||"");const ke=o==="notes"?k:le,de=o==="notes"?w:W,it=o==="notes"?C:Y,yt=f.filter(we=>we.degree===de&&we.semester==it&&we.section===ke),st=[...new Set(yt.map(we=>we.subject))];v(st),o==="notes"?(!y||!st.includes(y))&&$(st[0]||""):(!oe||!st.includes(oe))&&xe(st[0]||"")},[f,o,w,C,k,W,Y,le,y,oe]);const Ke=l.useRef(null),Je=l.useRef(null),Ge=l.useRef(null);l.useEffect(()=>{if(Ke.current&&Je.current){const F=Ke.current.querySelector(`button[data-key="${o}"]`);F&&ae.to(Je.current,{y:F.offsetTop,height:F.offsetHeight,opacity:1,duration:.5,ease:"elastic.out(1, 0.6)"})}Ge.current&&ae.fromTo(Ge.current,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power2.out"})},[o]);const J=async()=>{var ne,ke;if(!S||!_||!w||!C||!k||!y)return s("All fields and file are required.","error");I(!0);const F=new FormData;F.append("title",S),F.append("degree",w),F.append("semester",C),F.append("section",k),F.append("subject",y),F.append("document_type",D),F.append("file",_);try{await V().post("/upload-note",F),s("Note uploaded successfully!","success"),N(""),M(null),document.getElementById("noteFile")&&(document.getElementById("noteFile").value="")}catch(de){de.response&&de.response.status!==401&&s(((ke=(ne=de.response)==null?void 0:ne.data)==null?void 0:ke.message)||"Upload failed","error")}finally{I(!1)}},fe=async()=>{var ne,ke;if(!R||!U||!le||!W||!Y||!oe)return s("All fields are required.","error");ze(!0);const F=new FormData;F.append("title",R),F.append("message",U),F.append("degree",W),F.append("semester",Y),F.append("section",le),F.append("subject",oe),B&&F.append("deadline",B),re&&F.append("attachment",re);try{await V().post("/create-notice",F),s("Notice posted successfully!","success"),L(""),z(""),te(""),Ue(null),me(a.sections[0])}catch(de){de.response&&de.response.status!==401&&s(((ke=(ne=de.response)==null?void 0:ne.data)==null?void 0:ke.message)||"Notice failed","error")}finally{ze(!1)}},je=()=>{switch(o){case"notes":return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-green-500/20 space-y-3",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-green-400 flex items-center",children:[e.jsx(pe,{className:"w-6 h-6 mr-2"})," Upload Study Material"]}),e.jsx(Q,{placeholder:"Title (e.g., Module 1 PPT)",value:S,onChange:F=>N(F.target.value),disabled:O}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(K,{value:w,onChange:F=>g(F.target.value),disabled:O,children:d.map(F=>e.jsx("option",{value:F,className:"text-slate-900",children:F},F))}),e.jsx(K,{value:C,onChange:F=>A(F.target.value),disabled:O,children:m.map(F=>e.jsxs("option",{value:F,className:"text-slate-900",children:["Sem ",F]},F))}),e.jsx(K,{value:k,onChange:F=>T(F.target.value),disabled:O||!x.length,children:x.map(F=>e.jsxs("option",{value:F,className:"text-slate-900",children:["Sec ",F]},F))})]}),e.jsxs(K,{value:y,onChange:F=>$(F.target.value),icon:pe,disabled:O||!p.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Subject"}),(p||[]).map(F=>e.jsx("option",{value:F,className:"text-slate-900",children:F},F))]}),e.jsxs(K,{value:D,onChange:F=>q(F.target.value),disabled:O,children:[e.jsx("option",{value:"Notes",className:"text-slate-900",children:"Notes"}),e.jsx("option",{value:"Question Bank",className:"text-slate-900",children:"Question Bank"}),e.jsx("option",{value:"Reference Book",className:"text-slate-900",children:"Reference Book"})]}),e.jsx("label",{className:"block text-sm text-slate-300 font-medium pt-2",children:"Select File (PDF, DOCX, PPTX):"}),e.jsx("input",{id:"noteFile",type:"file",onChange:F=>M(F.target.files[0]),className:"w-full text-slate-300 bg-slate-800/50 rounded-lg p-3 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-600 file:text-white hover:file:bg-green-700 transition duration-200",disabled:O}),e.jsxs("button",{className:`${r} ${n} w-full`,onClick:J,disabled:O||!S||!_||!y,children:[" ",O?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Be,{className:"w-5 h-5 mr-2"})," ",O?"Uploading...":"Upload Note"," "]})]});case"notices":return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-red-500/20 space-y-3",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-red-500 flex items-center",children:[e.jsx(At,{className:"w-6 h-6 mr-2"})," Create Notice"]}),e.jsx(Q,{placeholder:"Title (e.g., Assignment 1 Due)",value:R,onChange:F=>L(F.target.value),disabled:ce}),e.jsx("textarea",{className:"w-full bg-slate-800/50 backdrop-blur-xl text-white placeholder-slate-500 border border-white/10 rounded-xl py-3 px-4 focus:ring-2 focus:ring-red-500/50 outline-none transition duration-200 h-24",placeholder:"Message details...",value:U,onChange:F=>z(F.target.value),disabled:ce}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(K,{value:W,onChange:F=>X(F.target.value),disabled:ce,children:d.map(F=>e.jsx("option",{value:F,className:"text-slate-900",children:F},F))}),e.jsx(K,{value:Y,onChange:F=>ue(F.target.value),disabled:ce,children:m.map(F=>e.jsxs("option",{value:F,className:"text-slate-900",children:["Sem ",F]},F))}),e.jsx(K,{value:le,onChange:F=>me(F.target.value),disabled:ce||!x.length,children:x.map(F=>e.jsxs("option",{value:F,className:"text-slate-900",children:["Sec ",F]},F))})]}),e.jsxs(K,{value:oe,onChange:F=>xe(F.target.value),icon:pe,disabled:ce||!p.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Subject"}),(p||[]).map(F=>e.jsx("option",{value:F,className:"text-slate-900",children:F},F))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:B,onChange:F=>te(F.target.value),className:"bg-slate-800/50 text-white border border-white/10 rounded-lg px-4",disabled:ce}),e.jsx("input",{type:"file",onChange:F=>Ue(F.target.files[0]),className:"text-xs text-slate-400 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-red-600 file:text-white hover:file:bg-red-700",disabled:ce})]}),e.jsxs("button",{className:`${r} ${i} w-full`,onClick:fe,disabled:ce||!R||!U||!le||!oe,children:[" ",ce?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(At,{className:"w-5 h-5 mr-2"})," ",ce?"Posting...":"Post Notice"," "]})]});case"messages":return e.jsx(vn,{showMessage:s});case"marks":return e.jsx(Nn,{showMessage:s,primaryButtonClass:n,buttonClass:r,catalogs:a,user:t});case"feedback":return e.jsx(wn,{showMessage:s,primaryButtonClass:n,buttonClass:r,catalogs:a,user:t});case"books":return e.jsx(ya,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"attendance":return e.jsx(Cn,{showMessage:s,buttonClass:r,catalogs:a});case"chat":return e.jsx(Sa,{showMessage:s,primaryButtonClass:n,buttonClass:r});default:return e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Welcome to the Faculty Portal. Select a tool from the sidebar."})}},Ee=[{key:"notes",label:"Upload Notes",icon:pe},{key:"notices",label:"Create Notices",icon:At},{key:"marks",label:"Upload Marks",icon:Ye},{key:"feedback",label:"Send Feedback",icon:tt},{key:"messages",label:"Parent Messages",icon:Ce},{key:"attendance",label:"Attendance",icon:ye},{key:"books",label:"Search Library",icon:Ve},{key:"chat",label:"Orbit Bot",icon:Oe}];return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-56 bg-slate-900/60 backdrop-blur-xl p-4 rounded-xl shadow-lg border border-white/10 flex-shrink-0 animate-in slide-in-from-left-4 duration-500",children:[e.jsx("h5",{className:"text-lg font-bold text-emerald-400 mb-4 ml-2",children:"Faculty Tools"}),e.jsxs("nav",{className:"space-y-1 relative hidden md:block",ref:Ke,children:[e.jsx("div",{ref:Je,className:"absolute left-0 top-0 w-full bg-emerald-600/20 border border-emerald-500/30 rounded-xl shadow-[0_0_15px_rgba(16,185,129,0.2)] pointer-events-none opacity-0 z-0",style:{height:0}}),Ee.map(F=>e.jsxs("button",{"data-key":F.key,onClick:()=>c(F.key),className:`w-full flex items-center p-3 rounded-xl font-semibold transition-colors duration-200 relative z-10 ${o===F.key?"text-emerald-300":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(F.icon,{className:"w-5 h-5 mr-3"}),F.label]},F.key))]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-400 pointer-events-none"}),e.jsx("select",{value:o,onChange:F=>c(F.target.value),className:"w-full bg-slate-800/80 border border-emerald-500/30 rounded-xl py-3 pl-10 pr-4 text-white appearance-none outline-none focus:ring-2 focus:ring-emerald-500/50 shadow-lg font-semibold",children:Ee.map(F=>e.jsx("option",{value:F.key,className:"bg-slate-900 text-white py-2",children:F.label},F.key))}),e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})})]}),e.jsxs("div",{ref:Ge,className:"flex-1 min-h-[600px] bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-2xl border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"}),je()]})]})}function Sn({showMessage:t,buttonClass:s,primaryButtonClass:a,catalogs:r}){const{degrees:n,fetchSubjects:i,fetchSections:o}=r,[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState("1"),[b,x]=l.useState(""),[j,p]=l.useState(""),[v,S]=l.useState("Notes"),[N,w]=l.useState(null),[g,C]=l.useState(!1),[A,k]=l.useState(!1),[T,y]=l.useState([]),[$,D]=l.useState([]),[q,_]=l.useState([]);l.useEffect(()=>{n.length&&!u&&d(n[0])},[n,u]),l.useEffect(()=>{u&&h?(i(u,h).then(D),o(u,h).then(_)):(D([]),_([]))},[u,h,i,o]),l.useEffect(()=>{$.length&&!$.includes(j)?p($[0]):$.length||p("")},[$,j]);const M=async()=>{var L,U;if(!c||!N||!u||!h||!b||!j)return t("All fields are required.","error");C(!0);const R=new FormData;R.append("title",c),R.append("degree",u),R.append("semester",h),R.append("section",b),R.append("subject",j),R.append("document_type",v),R.append("file",N);try{await V().post("/upload-note",R),t("Study material uploaded successfully!","success"),f(""),w(null),document.getElementById("adminNoteFile")&&(document.getElementById("adminNoteFile").value="")}catch(z){z.response&&z.response.status!==401&&t(((U=(L=z.response)==null?void 0:L.data)==null?void 0:U.message)||"Upload failed","error")}finally{C(!1)}},O=l.useCallback(async()=>{var R,L;if(!u||!h){y([]);return}k(!0);try{const U={degree:u,semester:h};j&&(U.subject=j),b&&(U.section=b),v&&(U.document_type=v);const z=await V().get("/notes",{params:U});y(z.data.notes||[])}catch(U){U.response&&U.response.status!==401&&t(((L=(R=U.response)==null?void 0:R.data)==null?void 0:L.message)||"Failed to load uploaded materials.","error"),y([])}finally{k(!1)}},[u,h,j,b,v,t]);l.useEffect(()=>{O()},[O]);const I=async R=>{var U,z;if(window.confirm("Delete this uploaded material? This cannot be undone."))try{await V().delete(`/admin/notes/${R}`),t("Deleted successfully.","success"),O()}catch(W){W.response&&W.response.status!==401&&t(((z=(U=W.response)==null?void 0:U.data)==null?void 0:z.message)||"Delete failed.","error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-green-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-green-400 flex items-center",children:[e.jsx(pe,{className:"w-6 h-6 mr-2"})," Upload Study Material (Admin)"]}),e.jsx(Q,{placeholder:"Title (e.g., Module 1 PPT)",value:c,onChange:R=>f(R.target.value),disabled:g}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(K,{value:u,onChange:R=>d(R.target.value),disabled:g,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Degree"}),(n||[]).map(R=>e.jsx("option",{value:R,className:"text-slate-900",children:R},R))]}),e.jsx(K,{value:h,onChange:R=>m(R.target.value),disabled:g,children:Array.from({length:8},(R,L)=>L+1).map(R=>e.jsxs("option",{value:R,className:"text-slate-900",children:["Sem ",R]},R))}),e.jsxs(K,{value:b,onChange:R=>x(R.target.value),disabled:g,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"All Sections (Manage)"}),e.jsx("option",{value:"ALL",className:"text-amber-400 font-bold",children:"All Sections"}),(q||[]).map(R=>e.jsxs("option",{value:R,className:"text-slate-900",children:["Sec ",R]},R))]})]}),e.jsxs(K,{value:j,onChange:R=>p(R.target.value),icon:pe,disabled:g||!$.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Subject"}),($||[]).map(R=>e.jsx("option",{value:R,className:"text-slate-900",children:R},R))]}),e.jsxs(K,{value:v,onChange:R=>S(R.target.value),disabled:g,children:[e.jsx("option",{value:"Notes",className:"text-slate-900",children:"Notes"}),e.jsx("option",{value:"Question Bank",className:"text-slate-900",children:"Question Bank"}),e.jsx("option",{value:"Reference Book",className:"text-slate-900",children:"Reference Book"})]}),e.jsx("label",{className:"block text-sm text-slate-300 font-medium pt-2",children:"Select File (PDF, DOCX, PPTX):"}),e.jsx("input",{id:"adminNoteFile",type:"file",onChange:R=>w(R.target.files[0]),className:"w-full text-slate-300 bg-slate-800/50 rounded-lg p-3 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-600 file:text-white hover:file:bg-green-700 transition duration-200",disabled:g}),e.jsxs("button",{className:`${s} ${a} w-full`,onClick:M,disabled:g||!c||!N||!u||!j,children:[g?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Be,{className:"w-5 h-5 mr-2"}),g?"Uploading...":"Upload Material"]})]}),e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[e.jsxs("h5",{className:"text-xl font-bold text-slate-100 flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5 text-slate-400"})," Manage Uploaded Materials"]}),e.jsxs("button",{className:`${s} bg-slate-700 hover:bg-slate-600 text-white text-sm`,onClick:O,disabled:A||!u||!h,children:[A?e.jsx(H,{className:"animate-spin w-4 h-4 mr-2"}):e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),!u&&e.jsx("div",{className:"text-sm text-slate-400",children:"Select Degree/Semester to view uploaded materials."}),u&&h&&!A&&T.length===0&&e.jsx("div",{className:"p-4 bg-slate-900/40 border border-white/10 rounded-xl text-slate-500 text-sm",children:"No uploaded materials found for the selected filters."}),A&&e.jsx("div",{className:"text-center py-8",children:e.jsx(H,{className:"animate-spin w-6 h-6 mx-auto text-slate-300"})}),e.jsx("div",{className:"space-y-3",children:T.map(R=>e.jsxs("div",{className:"p-4 rounded-xl border border-white/10 bg-slate-800/50 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-bold text-white truncate",children:R.title}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[R.degree,"  Sem ",R.semester,"  Sec ",R.section,"  ",R.subject,"  ",e.jsx("span",{className:"text-blue-300",children:R.document_type})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[R.file_url&&e.jsx("a",{className:`py-2 px-4 text-sm font-semibold rounded-full inline-flex items-center ${a}`,href:R.file_url,target:"_blank",rel:"noopener noreferrer",children:"Download"}),e.jsxs("button",{className:`${s} bg-red-600 hover:bg-red-700 text-white text-sm`,onClick:()=>I(R.id),children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]},R.id))})]})]})}function kn({showMessage:t,buttonClass:s,primaryButtonClass:a,catalogs:r}){const{degrees:n}=r,[i,o]=l.useState(""),[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState(null),[b,x]=l.useState(n[0]||""),[j,p]=l.useState("1"),[v,S]=l.useState(!1);l.useEffect(()=>{n.length&&!b&&x(n[0])},[n,b]);const N=async()=>{var g,C;if(!i||!c||!b||!j||!h)return t("Title, Author, Degree, Semester, and File are required.","error");S(!0);const w=new FormData;w.append("title",i),w.append("author",c),w.append("isbn",u),w.append("degree",b),w.append("semester",j),w.append("file",h);try{const A=await V().post("/api/admin/library/book",w);t(A.data.message,"success"),o(""),f(""),d(""),m(null),document.getElementById("bookFile")&&(document.getElementById("bookFile").value="")}catch(A){A.response&&A.response.status!==401&&t(((C=(g=A.response)==null?void 0:g.data)==null?void 0:C.message)||"Book upload failed.","error")}finally{S(!1)}};return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-blue-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-blue-400 flex items-center",children:[e.jsx(Be,{className:"w-6 h-6 mr-2"})," Upload Internal E-Book / Resource"]}),e.jsx(Q,{placeholder:"Book Title",value:i,onChange:w=>o(w.target.value),disabled:v}),e.jsx(Q,{placeholder:"Author Name",value:c,onChange:w=>f(w.target.value),disabled:v}),e.jsx(Q,{placeholder:"ISBN (Optional)",value:u,onChange:w=>d(w.target.value),disabled:v}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(K,{value:b,onChange:w=>x(w.target.value),disabled:v,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Degree"}),(n||[]).map(w=>e.jsx("option",{value:w,className:"text-slate-900",children:w},w))]}),e.jsx(K,{value:j,onChange:w=>p(w.target.value),disabled:v,children:Array.from({length:8},(w,g)=>g+1).map(w=>e.jsx("option",{value:w,className:"text-slate-900",children:w},w))})]}),e.jsx("label",{className:"block text-sm text-slate-300 font-medium pt-2",children:"Select Book File (PDF, EPUB, DOCX):"}),e.jsx("input",{id:"bookFile",type:"file",onChange:w=>m(w.target.files[0]),className:"w-full text-slate-300 bg-slate-800/50 rounded-lg p-3 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 transition duration-200",disabled:v}),e.jsxs("button",{className:`${s} ${a} w-full`,onClick:N,disabled:v||!i||!c||!b||!j||!h,children:[v?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"}),v?"Uploading Book...":"Upload Book"]})]})}function Cn({showMessage:t,buttonClass:s,catalogs:a}){const[r,n]=l.useState([]),[i,o]=l.useState(null),[c,f]=l.useState([]),[u,d]=l.useState(new Date().toISOString().split("T")[0]),[h,m]=l.useState(!1),[b,x]=l.useState(!1),[j,p]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const g=await V().get("/faculty/allocations");n(g.data.allocations||[])}catch{}})()},[]);const v=l.useCallback(async()=>{if(i){m(!0),p(!1);try{const g=(await V().get("/faculty/students",{params:{degree:i.degree,semester:i.semester,section:i.section,subject:i.subject,date:u}})).data.students||[],C=g.map(k=>({...k,currentStatus:k.status||"Present"}));f(C);const A=g.find(k=>k.marked_at);if(A){const k=new Date(A.marked_at).getTime(),T=new Date().getTime(),y=A.marked_at.endsWith("Z")?A.marked_at:A.marked_at+"Z",$=new Date(y).getTime();T-$>30*60*1e3&&p(!0)}}catch{t("Failed to load class list.","error")}finally{m(!1)}}},[i,u,t]);l.useEffect(()=>{i&&v()},[v]);const S=w=>{j||f(g=>g.map(C=>C.id===w?{...C,currentStatus:C.currentStatus==="Present"?"Absent":"Present"}:C))},N=async()=>{var w,g;if(j)return t("Attendance is locked (30 mins passed).","error");if(i){x(!0);try{const C={degree:i.degree,semester:i.semester,section:i.section,subject:i.subject,date:u,data:c.map(A=>({student_id:A.id,status:A.currentStatus}))};await V().post("/faculty/attendance",C),t("Attendance saved successfully!","success"),v()}catch(C){t(((g=(w=C.response)==null?void 0:w.data)==null?void 0:g.message)||"Failed to save.","error")}finally{x(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-emerald-400 flex items-center",children:[e.jsx(ye,{className:"w-6 h-6 mr-2"})," Attendance Register"]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-4 rounded-xl shadow-lg border border-emerald-500/20 grid grid-cols-1 md:grid-cols-3 gap-4 mx-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 font-bold uppercase",children:"Select Class"}),e.jsxs(K,{value:i?i.id:"",onChange:w=>{const g=r.find(C=>C.id===parseInt(w.target.value));o(g||null)},disabled:!r.length,children:[e.jsx("option",{value:"",children:"-- Choose Class --"}),r.map(w=>e.jsxs("option",{value:w.id,children:[w.subject," (",w.degree," ",w.semester," ",w.section,")"]},w.id))]}),!r.length&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:"No classes allocated. Contact Admin."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 font-bold uppercase",children:"Date"}),e.jsx(Q,{type:"date",value:u,onChange:w=>d(w.target.value),className:"text-slate-300"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:`${s} bg-emerald-600 hover:bg-emerald-700 w-full disabled:opacity-50 disabled:cursor-not-allowed`,onClick:N,disabled:!i||h||b||j,children:b?"Saving...":j?"Locked (Time limit)":"Mark Attendance"})})]}),h?e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-emerald-500"})}):i?c.length===0?e.jsx("div",{className:"text-center text-slate-500",children:"No students found in this class."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:c.map(w=>e.jsxs("div",{onClick:()=>S(w.id),className:`cursor-pointer p-4 rounded-xl border transition-all duration-200 flex justify-between items-center ${w.currentStatus==="Present"?"bg-emerald-900/20 border-emerald-500/30 hover:bg-emerald-900/40":"bg-red-900/20 border-red-500/30 hover:bg-red-900/40"} ${j?"opacity-70 pointer-events-none":""}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:`font-bold ${w.currentStatus==="Present"?"text-emerald-300":"text-red-300"}`,children:w.name}),e.jsx("div",{className:"text-xs text-slate-400",children:w.srn})]}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w.currentStatus==="Present"?"bg-emerald-500 text-black":"bg-red-500 text-white"}`,children:w.currentStatus==="Present"?e.jsx($t,{className:"w-5 h-5"}):e.jsx(Ie,{className:"w-5 h-5"})})]},w.id))}):e.jsx("div",{className:"text-center text-slate-500 mt-10",children:"Select a class to load students."})]})}function An({showMessage:t,buttonClass:s,primaryButtonClass:a,catalogs:r}){const{degrees:n,sections:i,fetchBasics:o}=r,[c,f]=l.useState([]),[u,d]=l.useState([]),[h,m]=l.useState(!1),[b,x]=l.useState(""),[j,p]=l.useState(""),[v,S]=l.useState(""),[N,w]=l.useState(""),[g,C]=l.useState(1),[A,k]=l.useState(""),[T,y]=l.useState(""),[$,D]=l.useState([]),q=l.useCallback(async()=>{var R,L;m(!0);try{const[U,z,W]=await Promise.all([V().get("/admin/hostel/hostels"),V().get("/admin/hostel/rooms"),V().get("/admin/hostel/hostels")]);f(U.data.hostels||[]),d(z.data.rooms||[]),D(W.data.hostels||[]),U.data.hostels.length>0&&S(U.data.hostels[0].id),z.data.rooms.length>0?y(z.data.rooms[0].id):(S(""),y(""))}catch(U){U.response&&U.response.status!==401&&t(((L=(R=U.response)==null?void 0:R.data)==null?void 0:L.message)||"Failed to fetch hostel data.","error"),f([]),d([]),D([])}finally{m(!1)}},[t]);l.useEffect(()=>{q()},[q]);const _=async()=>{var R,L;if(!b.trim())return t("Hostel Name is required.","error");try{await V().post("/admin/hostel/hostels",{name:b,address:j}),t(`Hostel **${b}** added!`,"success"),x(""),p(""),q()}catch(U){t(((L=(R=U.response)==null?void 0:R.data)==null?void 0:L.message)||"Failed to add hostel.","error")}},M=async()=>{var R,L;if(!v||!N.trim()||g<1)return t("All room fields are required and capacity must be > 0.","error");try{await V().post("/admin/hostel/rooms",{hostel_id:v,room_number:N,capacity:parseInt(g)}),t(`Room **${N}** added!`,"success"),w(""),C(1),q()}catch(U){t(((L=(R=U.response)==null?void 0:R.data)==null?void 0:L.message)||"Failed to add room.","error")}},O=async()=>{var R,L;if(!A.trim()||!T)return t("Student SRN and Room must be selected.","error");try{await V().post("/admin/hostel/assign-room",{srn:A,room_id:T}),t(`Room assigned successfully to SRN ${A}!`,"success"),k(""),q()}catch(U){t(((L=(R=U.response)==null?void 0:R.data)==null?void 0:L.message)||"Failed to assign room.","error")}},I=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xl font-bold text-blue-400",children:"Hostel Overview (One Go)"}),h?e.jsx("div",{className:"text-center p-4",children:e.jsx(H,{className:"animate-spin w-5 h-5 mx-auto text-blue-500"})}):$.length===0?e.jsx("div",{className:"text-slate-500",children:"No hostels defined."}):e.jsx("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:e.jsxs("table",{className:"min-w-full divide-y divide-white/10 shadow-md bg-slate-900/60 backdrop-blur-xl",children:[e.jsx("thead",{className:"bg-slate-800/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Hostel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Rooms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Occupancy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Vacant Beds"})]})}),e.jsx("tbody",{className:"bg-slate-900/40 divide-y divide-white/10",children:$.map(R=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-200",children:R.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-400",children:R.total_rooms}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-400",children:R.total_capacity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-400",children:R.current_occupancy}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-semibold ${R.vacant_beds>0?"text-green-400":"text-red-400"}`,children:R.vacant_beds})]},R.id))})]})})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-blue-400 flex items-center",children:[e.jsx(et,{className:"w-6 h-6 mr-2"})," Hostel Management"]}),I(),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-5 rounded-xl shadow-lg border border-yellow-500/20 space-y-3",children:[e.jsx("h5",{className:"text-xl font-bold text-yellow-400",children:"Add New Hostel"}),e.jsx(Q,{placeholder:"Hostel Name",value:b,onChange:R=>x(R.target.value)}),e.jsx(Q,{placeholder:"Address (Optional)",value:j,onChange:R=>p(R.target.value)}),e.jsx("button",{className:`${s} ${a}`,onClick:_,children:"Create Hostel"})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-5 rounded-xl shadow-lg border border-yellow-500/20 space-y-3",children:[e.jsx("h5",{className:"text-xl font-bold text-yellow-400",children:"Add Room to Hostel"}),e.jsxs(K,{value:v,onChange:R=>S(parseInt(R.target.value)||""),disabled:!c.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Hostel"}),(c||[]).map(R=>e.jsx("option",{value:R.id,className:"text-slate-900",children:R.name},R.id))]}),e.jsx(Q,{placeholder:"Room Number (e.g., 101A)",value:N,onChange:R=>w(R.target.value)}),e.jsx(Q,{type:"number",placeholder:"Capacity (e.g., 2)",value:g,onChange:R=>C(parseInt(R.target.value)||1),min:"1"}),e.jsx("button",{className:`${s} ${a}`,onClick:M,disabled:!v||!N,children:"Add Room"})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-5 rounded-xl shadow-lg border border-yellow-500/20 space-y-3",children:[e.jsx("h5",{className:"text-xl font-bold text-yellow-400",children:"Assign Room to Student"}),e.jsx(Q,{placeholder:"Student SRN (e.g., SRN001)",value:A,onChange:R=>k(R.target.value)})," ",e.jsxs(K,{value:T,onChange:R=>y(parseInt(R.target.value)||""),disabled:!u.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Room (Hostel - Room # - Occupancy)"}),(u||[]).map(R=>e.jsxs("option",{value:R.id,disabled:R.occupancy>=R.capacity,className:"text-slate-900",children:[R.hostel_name," - ",R.room_number," (",R.occupancy,"/",R.capacity,")"]},R.id))]}),e.jsx("button",{className:`${s} ${a}`,onClick:O,disabled:!A||!T,children:"Assign Room"}),e.jsx("p",{className:"text-xs text-red-400",children:"Note: Must use Student **SRN**."})," "]})]})]})}function _n({showMessage:t,catalogs:s,buttonClass:a,primaryButtonClass:r}){const{degrees:n,loaded:i,fetchSections:o}=s,[c,f]=l.useState([]),[u,d]=l.useState(!1),[h,m]=l.useState(""),[b,x]=l.useState(""),[j,p]=l.useState(""),[v,S]=l.useState(null),[N,w]=l.useState(!1),[g,C]=l.useState(null);l.useEffect(()=>{i&&n.length&&!h&&m(n[0])},[i,n,h]);const[A,k]=l.useState([]);l.useEffect(()=>{h&&b?o(h,b).then(k):k([])},[h,b,o]);const[T,y]=l.useState([]);l.useEffect(()=>{v!=null&&v.degree&&(v!=null&&v.semester)?o(v.degree,v.semester).then(y):y([])},[v==null?void 0:v.degree,v==null?void 0:v.semester,o]);const $=l.useCallback(async()=>{var _,M;d(!0);try{const O=await V().get("/admin/students",{params:{degree:h,semester:b,section:j}});f(O.data.students||[])}catch(O){O.response&&O.response.status!==401&&t(((M=(_=O.response)==null?void 0:_.data)==null?void 0:M.message)||"Failed to fetch student list.","error"),f([])}finally{d(!1)}},[h,b,j,t]),D=async()=>{var _,M;if(v){w(!0);try{await V().post("/admin/update-student",{student_id:v.id,name:v.name,srn:v.srn,degree:v.degree,semester:v.semester,section:v.section,parent_email:v.parent_email}),t("Student details updated.","success"),S(null),$()}catch(O){t(((M=(_=O.response)==null?void 0:_.data)==null?void 0:M.message)||"Update failed","error")}finally{w(!1)}}},q=async()=>{var _,M;if(v!=null&&v.id){w(!0);try{const O=await V().post("/admin/generate-parent-password",{student_id:v.id});C(O.data.password),t(O.data.message,"success")}catch(O){t(((M=(_=O.response)==null?void 0:_.data)==null?void 0:M.message)||"Generation failed","error")}finally{w(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-yellow-400 flex items-center",children:[e.jsx(Ot,{className:"w-6 h-6 mr-2"})," Student Directory"]}),e.jsxs("div",{className:"bg-slate-900/40 border border-white/10 p-4 rounded-xl shadow-inner grid grid-cols-4 gap-3 items-end",children:[e.jsxs(K,{value:h,onChange:_=>m(_.target.value),disabled:!n.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"All Degrees"}),(n||[]).map(_=>e.jsx("option",{value:_,className:"text-slate-900",children:_},_))]}),e.jsxs(K,{value:b,onChange:_=>x(_.target.value),children:[e.jsx("option",{value:"",className:"text-slate-900",children:"All Sems"}),Array.from({length:8},(_,M)=>M+1).map(_=>e.jsx("option",{value:_,className:"text-slate-900",children:_},_))]}),e.jsxs(K,{value:j,onChange:_=>p(_.target.value),disabled:!A.length,children:[e.jsx("option",{value:"",className:"text-slate-900",children:"All Sections"}),(A||[]).map(_=>e.jsx("option",{value:_,className:"text-slate-900",children:_},_))]}),e.jsxs("button",{onClick:$,className:`${a} ${r} bg-yellow-600 hover:bg-yellow-700`,disabled:u||!h&&!b&&!j,children:[u?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Search"]})]}),u?e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-yellow-500"})}):c.length===0?e.jsx("div",{className:"p-4 text-slate-500 text-center bg-slate-900/60 rounded-xl shadow-md border border-white/10",children:"No students found matching filters."}):e.jsxs("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:[e.jsxs("div",{className:"bg-slate-800/80 px-6 py-2 border-b border-white/10 text-xs font-bold text-yellow-500 uppercase tracking-widest text-right",children:["Total Students: ",c.length]}),e.jsxs("table",{className:"min-w-full divide-y divide-white/10 shadow-md bg-slate-900/60 backdrop-blur-xl",children:[e.jsx("thead",{className:"bg-slate-800/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"SRN / Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Academics"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Hostel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-slate-900/40 divide-y divide-white/10",children:c.map(_=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-slate-200",children:_.name}),e.jsx("div",{className:"text-xs text-slate-500",children:_.srn})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-slate-300",children:[_.degree," Sem ",_.semester]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Section ",_.section]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-300",children:_.hostel_info||e.jsx("span",{className:"text-xs text-red-400",children:"Not Assigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${_.status==="APPROVED"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsx("button",{onClick:()=>{S(_),C(null)},className:"text-yellow-400 hover:text-yellow-300 p-2 hover:bg-yellow-500/10 rounded-full transition-colors",children:e.jsx(is,{className:"w-4 h-4"})})})]},_.id))})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 p-6 rounded-xl w-full max-w-lg shadow-2xl space-y-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h5",{className:"text-xl font-bold text-yellow-400",children:"Edit Student Details"}),e.jsx("button",{onClick:()=>S(null),className:"text-slate-500 hover:text-white",children:e.jsx(Ie,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Full Name"}),e.jsx(Q,{value:v.name,onChange:_=>S({...v,name:_.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"SRN"}),e.jsx(Q,{value:v.srn,onChange:_=>S({...v,srn:_.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Degree"}),e.jsx(K,{value:v.degree,onChange:_=>S({...v,degree:_.target.value}),children:(n||[]).map(_=>e.jsx("option",{value:_,className:"text-slate-900",children:_},_))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Semester"}),e.jsx(K,{value:v.semester,onChange:_=>S({...v,semester:_.target.value}),children:Array.from({length:8},(_,M)=>M+1).map(_=>e.jsx("option",{value:_,className:"text-slate-900",children:_},_))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Section"}),e.jsx(K,{value:v.section,onChange:_=>S({...v,section:_.target.value}),children:(T||[]).map(_=>e.jsx("option",{value:_,className:"text-slate-900",children:_},_))})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 space-y-2",children:[e.jsx("h6",{className:"text-sm font-bold text-slate-300",children:"Parent Portal (Read Only Access)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Parent Email (Required for Login)"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(Q,{type:"email",placeholder:"parent@example.com",value:v.parent_email||"",onChange:_=>S({...v,parent_email:_.target.value})})}),e.jsxs("button",{className:`${a} w-full border border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10`,onClick:q,disabled:!v.parent_email||N,children:[N?e.jsx(H,{className:"animate-spin w-4 h-4 mr-2 inline"}):e.jsx(pt,{className:"w-4 h-4 mr-2 inline"}),"Generate & Email Password"]}),g&&e.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-500/30 rounded-lg text-green-300 text-sm break-all",children:[e.jsx("strong",{children:"Generated Password:"})," ",g," ",e.jsx("br",{}),e.jsxs("span",{className:"text-xs opacity-70",children:["(Sent to ",v.parent_email,")"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[e.jsx("button",{className:`${a} bg-slate-700 text-white flex-1 hover:bg-slate-600`,onClick:()=>S(null),children:"Cancel"}),e.jsxs("button",{className:`${a} ${r} bg-green-600 flex-1`,onClick:D,disabled:N,children:[N?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"})," Save Changes"]})]})]})})]})}function Rn({showMessage:t,buttonClass:s,primaryButtonClass:a}){const[r,n]=l.useState(""),[i,o]=l.useState(""),[c,f]=l.useState(""),[u,d]=l.useState(""),[h,m]=l.useState(!1),b=async()=>{var x,j;if(!r||!i||!c||!u)return t("Full Name, Email, Password, and Employee ID are required.","error");m(!0);try{const p={name:r,email:i,password:c,emp_id:u},v=await V().post("/admin/add-faculty",p);t(v.data.message,"success"),n(""),o(""),f(""),d("")}catch(p){p.response&&p.response.status!==401&&t(((j=(x=p.response)==null?void 0:x.data)==null?void 0:j.message)||"Failed to add faculty account.","error")}finally{m(!1)}};return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-yellow-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-yellow-400 flex items-center",children:[e.jsx(cs,{className:"w-6 h-6 mr-2"})," Onboard New Faculty Member"]}),e.jsx(Q,{placeholder:"Full Name",value:r,onChange:x=>n(x.target.value),disabled:h}),e.jsx(Q,{type:"email",placeholder:"Email",value:i,onChange:x=>o(x.target.value),disabled:h}),e.jsx(Q,{type:"password",placeholder:"Temporary Password",value:c,onChange:x=>f(x.target.value),disabled:h}),e.jsx(Q,{placeholder:"Employee ID (e.g., FCLT001)",value:u,onChange:x=>d(x.target.value),disabled:h}),e.jsxs("button",{className:`${s} ${a} w-full`,onClick:b,disabled:h||!r||!i||!c||!u,children:[h?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"}),h?"Processing...":"Create Professor Account"]})]})}function En({showMessage:t,buttonClass:s,primaryButtonClass:a,catalogs:r}){const{degrees:n,loaded:i}=r,[o,c]=l.useState(""),[f,u]=l.useState(""),[d,h]=l.useState(""),[m,b]=l.useState("tuition"),[x,j]=l.useState(""),[p,v]=l.useState("batch"),[S,N]=l.useState(n[0]||""),[w,g]=l.useState("1"),[C,A]=l.useState(""),[k,T]=l.useState(""),[y,$]=l.useState(""),[D,q]=l.useState(!1);l.useEffect(()=>{i&&Array.isArray(n)&&n.length>0&&(S||N(n[0]))},[i,n,S]);const _=async()=>{var z,W;if(!o||!d||parseFloat(d)<=0||!p)return t("Title and a valid Amount are required.","error");const L=Math.round(parseFloat(d)*100);let U={title:o,description:f,amount_cents:L,category:m,due_date:x||void 0,target:p};if(p==="sem"){if(!S||!w)return t("Degree and Semester are required for sem targeting.","error");U.degree=S,U.semester=parseInt(w)}else if(p==="custom"){const X=k.split(",").map(Y=>Y.trim()).filter(Y=>Y);if(X.length===0)return t("Enter at least one SRN for custom targeting.","error");U.srns=X}else if(p==="single"){if(!y.trim())return t("Enter a single SRN for targeted fee.","error");U.single_srn=y.trim()}C&&(p==="batch"||p==="sem")&&(U.sections=C),q(!0);try{const X=await V().post("/admin/fees/create",U);t(`Fee Notification created. Targets created: **${X.data.targets_created}**`,"success"),c(""),u(""),h(""),j(""),A(""),T(""),$("")}catch(X){X.response&&X.response.status!==401&&t(((W=(z=X.response)==null?void 0:z.data)==null?void 0:W.message)||"Fee creation failed. Check input data or backend logs.","error")}finally{q(!1)}},M=p==="sem",O=p==="custom",I=p==="single",R=p==="batch"||p==="sem";return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-yellow-500/20 space-y-4",children:[e.jsxs("h4",{className:"text-2xl font-bold mb-4 text-yellow-400 flex items-center",children:[e.jsx(We,{className:"w-6 h-6 mr-2"})," Create New Fee Notification"]}),e.jsx(Q,{placeholder:"Fee Title (e.g., Tuition Fee Sem 4)",value:o,onChange:L=>c(L.target.value),disabled:D}),e.jsx(Q,{type:"number",placeholder:"Amount in Rupees (e.g., 5000.00)",value:d,onChange:L=>h(L.target.value),disabled:D}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(K,{value:m,onChange:L=>b(L.target.value),disabled:D,children:[e.jsx("option",{value:"tuition",className:"text-slate-900",children:"Tuition Fee"}),e.jsx("option",{value:"hostel",className:"text-slate-900",children:"Hostel Fee"}),e.jsx("option",{value:"transport",className:"text-slate-900",children:"Transport Fee"}),e.jsx("option",{value:"exam",className:"text-slate-900",children:"Exam Fee"}),e.jsx("option",{value:"misc",className:"text-slate-900",children:"Miscellaneous"})]}),e.jsx(Q,{type:"date",placeholder:"Due Date (Optional)",value:x,onChange:L=>j(L.target.value),disabled:D,className:"text-slate-300"})]}),e.jsx("h5",{className:"text-lg font-bold text-slate-300 pt-4 border-t border-white/10",children:"Target Students:"}),e.jsxs(K,{value:p,onChange:L=>v(L.target.value),disabled:D,children:[e.jsx("option",{value:"batch",className:"text-slate-900",children:"Whole Student Body (All Degrees/Sems)"}),e.jsx("option",{value:"sem",className:"text-slate-900",children:"Specific Degree & Semester"}),e.jsx("option",{value:"custom",className:"text-slate-900",children:"Custom List of SRNs (Bulk)"}),e.jsx("option",{value:"single",className:"text-slate-900",children:"Single SRN"})]}),M&&e.jsx("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-300",children:i&&Array.isArray(n)&&n.length>0?e.jsxs(e.Fragment,{children:[e.jsx(K,{value:S,onChange:L=>N(L.target.value),disabled:D,children:n.map(L=>e.jsx("option",{value:L,className:"text-slate-900",children:L},L))}),e.jsx(K,{value:w,onChange:L=>g(L.target.value),disabled:D,children:Array.from({length:8},(L,U)=>U+1).map(L=>e.jsx("option",{value:L,className:"text-slate-900",children:L},L))})]}):e.jsx("div",{className:"col-span-2 text-center text-sm text-slate-500",children:"Loading degree list..."})}),R&&e.jsx(Q,{placeholder:"Sections (Optional, Comma-separated: A, B, C)",value:C,onChange:L=>A(L.target.value),disabled:D,className:"animate-in fade-in duration-300"}),O&&e.jsx("textarea",{className:"w-full bg-slate-800/50 backdrop-blur-xl text-white border border-white/10 rounded-xl py-3 px-4 h-24 placeholder-slate-500 focus:ring-2 focus:ring-yellow-500/50 outline-none",placeholder:"Enter SRNs separated by commas (e.g., SRN001, SRN005, SRN010)",value:k,onChange:L=>T(L.target.value),disabled:D}),I&&e.jsx(Q,{placeholder:"Enter Single SRN",value:y,onChange:L=>$(L.target.value),disabled:D}),e.jsxs("button",{className:`${s} ${a} w-full mt-4`,onClick:_,disabled:D,children:[D?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"}),D?"Creating Notification...":"Create Fee Notification"]})]})}function Dn({showMessage:t,buttonClass:s,primaryButtonClass:a}){const[r,n]=l.useState([]),[i,o]=l.useState(!0),[c,f]=l.useState({id:null,status:"Open",note:""}),u=l.useCallback(async()=>{o(!0);try{const m=await V().get("/admin/hostel/complaints");n(m.data.complaints||[])}catch(m){m.response&&m.response.status!==401&&t("Failed to fetch hostel complaints.","error"),n([])}finally{o(!1)}},[t]),d=async()=>{var m,b;if(!(!c.id||!c.status)){o(!0);try{const x=await V().patch(`/admin/hostel/complaints/${c.id}/status`,{status:c.status,note:c.note});t(`Complaint status updated to **${x.data.new_status}**`,"success"),f({id:null,status:"Open",note:""}),u()}catch(x){t(((b=(m=x.response)==null?void 0:m.data)==null?void 0:b.message)||"Failed to update status.","error")}finally{o(!1)}}};l.useEffect(()=>{u()},[u]);const h=["Open","Under Review","Under Progress","Resolved","Closed"];return i&&c.id===null?e.jsx("div",{className:"text-center p-10",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-yellow-500"})}):e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-red-500/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-2xl font-bold text-red-400 flex items-center",children:[e.jsx(et,{className:"w-6 h-6 mr-2"})," Active Hostel Complaints"]}),e.jsx("button",{onClick:u,className:"p-2 bg-slate-700 rounded-full hover:bg-slate-600 transition",disabled:i,children:e.jsx(bt,{className:"w-5 h-5 text-slate-300"})})]}),c.id&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 p-6 rounded-xl w-full max-w-md shadow-2xl space-y-4",children:[e.jsx("h5",{className:"text-xl font-bold text-red-400",children:"Update Complaint Status"}),e.jsx(K,{value:c.status,onChange:m=>f(b=>({...b,status:m.target.value})),children:h.map(m=>e.jsx("option",{value:m,className:"text-slate-900",children:m},m))}),e.jsx("textarea",{className:"w-full bg-slate-800/50 backdrop-blur-xl text-white placeholder-slate-500 border border-white/10 rounded-xl py-3 px-4 h-20 focus:ring-2 focus:ring-red-500/50 outline-none",placeholder:"Internal Note (Optional)",value:c.note,onChange:m=>f(b=>({...b,note:m.target.value}))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:`${s} bg-slate-700 text-white flex-1 hover:bg-slate-600`,onClick:()=>f({id:null,status:"Open",note:""}),children:"Cancel"}),e.jsxs("button",{className:`${s} ${a} bg-green-600 flex-1`,onClick:d,disabled:i,children:[i?e.jsx(H,{className:"animate-spin w-5 h-5 mr-2"}):e.jsx(Se,{className:"w-5 h-5 mr-2"})," Save Status"]})]})]})}),r.length===0&&!i&&e.jsx("div",{className:"text-slate-500 text-center py-4",children:"No complaints recorded."}),e.jsx("div",{className:"space-y-4",children:r.map(m=>e.jsxs("div",{className:`p-4 rounded-xl shadow-md ${m.status==="Closed"?"bg-slate-800/50 border-l-4 border-slate-500":"bg-slate-800 border-l-4 border-red-500"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-lg text-red-400",children:m.title}),e.jsx("div",{className:"text-sm text-slate-300 mt-1",children:m.description}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["From: ",e.jsxs("strong",{className:"text-slate-400",children:[m.hostel_name," (Room ",m.room_number,")"]})," | Student: ",e.jsx("strong",{className:"text-slate-400",children:m.student_name})]})]}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full flex-shrink-0 font-semibold ${m.status.includes("Progress")?"bg-orange-900/40 text-orange-300":m.status==="Open"?"bg-red-900/40 text-red-300":"bg-green-900/40 text-green-300"}`,children:m.status})]}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-slate-500 font-semibold mb-1",children:"Audit Trail:"}),e.jsx("div",{className:"flex items-center space-x-2 text-xs overflow-x-auto pb-1",children:m.audit_trail&&m.audit_trail.map((b,x)=>e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full ${b.status.includes("Progress")?"bg-orange-900/40 text-orange-300":b.status==="Open"?"bg-red-900/40 text-red-300":"bg-green-900/40 text-green-300"}`,children:b.status}),x<m.audit_trail.length-1&&e.jsx("span",{className:"text-slate-600 ml-2",children:">"})]},x))})]}),e.jsx("div",{className:"flex justify-end items-center mt-3 pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex space-x-2",children:[m.file_url&&e.jsx("a",{href:m.file_url,className:"py-1 px-3 text-xs font-semibold rounded-full inline-flex items-center bg-red-600 hover:bg-red-700 text-white",target:"_blank",rel:"noopener noreferrer",children:"Attachment"}),e.jsxs("button",{className:`${s} bg-yellow-600 hover:bg-yellow-700 text-white text-xs py-1.5 w-32`,onClick:()=>f({id:m.id,status:m.status,note:""}),children:[e.jsx(bt,{className:"w-4 h-4 mr-1"})," Update Status"]})]})})]},m.id))})]})}function Pn({showMessage:t,catalogs:s,buttonClass:a,primaryButtonClass:r}){const{degrees:n,loaded:i,fetchBasics:o,subjects:c,fetchSubjects:f,fetchSections:u}=s,[d,h]=l.useState([]),[m,b]=l.useState(!1),[x,j]=l.useState(null),[p,v]=l.useState(""),[S,N]=l.useState("1"),[w,g]=l.useState(""),[C,A]=l.useState(""),[k,T]=l.useState(""),[y,$]=l.useState(!1),[D,q]=l.useState(""),[_,M]=l.useState(""),[O,I]=l.useState(""),[R,L]=l.useState([]);l.useEffect(()=>{D&&_?u(D,_).then(L):L([])},[D,_,u]);const[U,z]=l.useState([]);l.useEffect(()=>{p&&S?(f(p,S),u(p,S).then(z)):z([])},[p,S,f,u]);const W=l.useCallback(async()=>{var B,te;b(!0);try{const re=await V().get("/admin/faculty");h(re.data.faculty||[])}catch(re){re.response&&re.response.status!==401&&t(((te=(B=re.response)==null?void 0:B.data)==null?void 0:te.message)||"Failed to fetch faculty list.","error")}finally{b(!1)}},[t]);l.useEffect(()=>{W()},[W]),l.useEffect(()=>{i&&n.length&&!p&&v(n[0])},[i,n,p]);const X=D||_||O,[Y,ue]=l.useState(!1),le=l.useRef(null);l.useEffect(()=>{function B(te){le.current&&!le.current.contains(te.target)&&ue(!1)}return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[le]);const me=d.filter(B=>X?B.allocations.some(re=>{const Ue=D?re.degree===D:!0,ce=_?re.semester===parseInt(_):!0,ze=O?re.section===O:!0;return Ue&&ce&&ze}):!1),oe=async()=>{var B,te;if(!x||!p||!S||!w||!C)return t("All fields are required.","error");$(!0);try{await V().post("/admin/faculty/allocate",{faculty_id:x.id,degree:p,semester:parseInt(S),section:w,subject:C}),t(`Success: Assigned **${C}** to **${x.name}**`,"success"),A(""),W()}catch(re){t(((te=(B=re.response)==null?void 0:B.data)==null?void 0:te.message)||"Allocation failed.","error")}finally{$(!1)}},xe=async B=>{if(confirm("Are you sure you want to remove this subject assignment?"))try{await V().post("/admin/faculty/deallocate",{allocation_id:B}),t("Allocation removed.","success"),W()}catch{t("Failed to remove.","error")}};return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-3xl font-bold text-yellow-500 flex items-center tracking-tight",children:[e.jsx(ye,{className:"w-8 h-8 mr-3 opacity-80"}),"Faculty & Allocations"]}),e.jsx("p",{className:"text-slate-400 mt-1 pl-11",children:"Manage professors and their subject allotments."})]}),e.jsxs("div",{className:"bg-yellow-500/10 px-4 py-2 rounded-lg border border-yellow-500/20 text-yellow-500 font-mono text-xs uppercase tracking-widest",children:[d.length," Faculty Members"]})]}),e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl p-6 rounded-2xl shadow-xl border border-yellow-500/10",style:{minHeight:"400px"},children:[e.jsxs("h5",{className:"text-sm font-bold text-slate-300 uppercase tracking-widest mb-6 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 mr-2"})," New Allocation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider pl-1",children:"Select Professor"}),e.jsxs("div",{className:"relative",ref:le,children:[e.jsxs("div",{onClick:()=>ue(!Y),className:`w-full bg-slate-800/50 border ${Y?"border-yellow-500 ring-1 ring-yellow-500/50":"border-white/10"} rounded-xl px-4 py-3 text-white flex justify-between items-center cursor-pointer transition-all hover:bg-slate-800/80`,children:[e.jsx("span",{className:x?"text-white font-medium":"text-slate-500",children:x?`${x.name} (${x.emp_id})`:"-- Choose Faculty Member --"}),e.jsx(Ze,{className:`w-4 h-4 text-slate-400 transition-transform ${Y?"rotate-180":""}`})]}),Y&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full bg-slate-900 border border-white/10 rounded-xl shadow-2xl max-h-80 flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-2 border-b border-white/5 bg-slate-900 sticky top-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500"}),e.jsx("input",{autoFocus:!0,className:"w-full bg-slate-800 rounded-lg pl-9 pr-3 py-2 text-xs text-white placeholder-slate-500 outline-none focus:ring-1 focus:ring-yellow-500",placeholder:"Search faculty...",value:k,onChange:B=>T(B.target.value),onClick:B=>B.stopPropagation()})]})}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 p-1",children:d.filter(B=>B.name.toLowerCase().includes(k.toLowerCase())).length===0?e.jsx("div",{className:"p-3 text-xs text-slate-500 text-center italic",children:"No faculty found."}):d.filter(B=>B.name.toLowerCase().includes(k.toLowerCase())).map(B=>e.jsxs("div",{onClick:()=>{j(B),ue(!1),T("")},className:`p-2.5 rounded-lg text-sm cursor-pointer flex items-center justify-between group transition-colors ${(x==null?void 0:x.id)===B.id?"bg-yellow-500/20 text-yellow-400":"hover:bg-slate-800 text-slate-300 hover:text-white"}`,children:[e.jsx("span",{className:"font-medium",children:B.name}),e.jsx("span",{className:`text-[10px] uppercase tracking-wider ${(x==null?void 0:x.id)===B.id?"text-yellow-500/70":"text-slate-600 group-hover:text-slate-500"}`,children:B.emp_id})]},B.id))})]})]}),x&&e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/5 flex items-center animate-in fade-in slide-in-from-top-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-500/20 text-yellow-500 flex items-center justify-center font-bold mr-3",children:x.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:x.name}),e.jsx("div",{className:"text-xs text-slate-500",children:x.email})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider pl-1",children:"Class Details"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(K,{value:p,onChange:B=>v(B.target.value),children:n.map(B=>e.jsx("option",{value:B,children:B},B))}),e.jsx(K,{value:S,onChange:B=>N(B.target.value),children:Array.from({length:8},(B,te)=>te+1).map(B=>e.jsxs("option",{value:B,children:["Sem ",B]},B))}),e.jsxs(K,{value:w,onChange:B=>g(B.target.value),children:[e.jsx("option",{value:"",children:"Select Section"}),(U||[]).map(B=>e.jsxs("option",{value:B,children:["Sec ",B]},B))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(K,{value:C,onChange:B=>A(B.target.value),icon:pe,disabled:!c.length,children:[e.jsx("option",{value:"",children:"-- Select Subject --"}),c.length>0?c.map(B=>e.jsx("option",{value:B,children:B},B)):e.jsx("option",{value:"",disabled:!0,children:"No subjects found for this class"})]}),e.jsx("button",{className:`${a} bg-yellow-600 hover:bg-yellow-500 text-white w-auto px-6`,onClick:oe,disabled:!x||y||!C,children:y?e.jsx(H,{className:"animate-spin w-5 h-5"}):e.jsx(Le,{className:"w-5 h-5"})})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("h5",{className:"text-sm font-bold text-slate-300 uppercase tracking-widest pl-1",children:"Directory & Allocations"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"bg-slate-900 border border-white/10 text-xs rounded px-2 py-1 text-slate-300 outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 cursor-pointer",value:D,onChange:B=>q(B.target.value),children:[e.jsx("option",{value:"",children:"Degree"}),(n||[]).map(B=>e.jsx("option",{value:B,children:B},B))]}),e.jsxs("select",{className:"bg-slate-900 border border-white/10 text-xs rounded px-2 py-1 text-slate-300 outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 cursor-pointer",value:_,onChange:B=>M(B.target.value),children:[e.jsx("option",{value:"",children:"Semester"}),Array.from({length:8},(B,te)=>te+1).map(B=>e.jsxs("option",{value:B,children:["Sem ",B]},B))]}),e.jsxs("select",{className:"bg-slate-900 border border-white/10 text-xs rounded px-2 py-1 text-slate-300 outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 cursor-pointer",value:O,onChange:B=>I(B.target.value),children:[e.jsx("option",{value:"",children:"Section"}),(R||[]).map(B=>e.jsxs("option",{value:B,children:["Sec ",B]},B))]})]})]}),X?m?e.jsx("div",{className:"text-center p-20",children:e.jsx(H,{className:"animate-spin w-10 h-10 mx-auto text-yellow-500 opacity-50"})}):me.length===0?e.jsx("div",{className:"text-center py-20 bg-slate-900/20 rounded-2xl border border-white/5 text-slate-600",children:"No faculty members found matching criteria."}):e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:me.map(B=>e.jsxs("div",{className:"bg-slate-800/20 rounded-xl border border-white/5 p-5 hover:bg-slate-800/40 hover:border-white/10 transition-all duration-300 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-slate-700 to-slate-800 border border-white/10 flex items-center justify-center text-slate-300 font-bold text-lg mr-3 shadow-inner",children:B.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white group-hover:text-yellow-400 transition-colors",children:B.name}),e.jsxs("div",{className:"text-xs text-slate-500 font-mono mt-0.5",children:[B.email,"  ",B.emp_id]})]})]}),B.allocations.length>0&&e.jsxs("span",{className:"bg-yellow-500/10 text-yellow-500 text-[10px] font-bold px-2 py-1 rounded border border-yellow-500/20 uppercase tracking-widest",children:[B.allocations.length," SUB"]})]}),e.jsx("div",{className:"space-y-2",children:B.allocations.length===0?e.jsx("div",{className:"text-xs text-slate-600 italic pl-1",children:"No subjects allocated yet."}):B.allocations.map(te=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-900/60 p-2.5 rounded-lg border border-white/5 text-sm group/item hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500/50 mr-3"}),e.jsx("span",{className:"text-slate-200 font-medium mr-2",children:te.subject}),e.jsxs("span",{className:"text-xs text-slate-500",children:[te.degree,"  ",te.semester,"-",te.section]})]}),e.jsx("button",{onClick:()=>xe(te.id),className:"text-slate-600 hover:text-red-400 p-1 opacity-0 group-hover/item:opacity-100 transition-all",children:e.jsx(Ae,{className:"w-3.5 h-3.5"})})]},te.id))})]},B.id))}):e.jsxs("div",{className:"text-center py-20 bg-slate-900/20 rounded-2xl border border-white/5 text-slate-600 animate-in fade-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Zt,{className:"w-8 h-8 text-slate-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-400 mb-1",children:"Directory Filtered"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Please select a Degree, Semester, or Section to view faculty."})]})]})]})}function Tn({showMessage:t,catalogs:s,buttonClass:a,primaryButtonClass:r,dangerButtonClass:n,user:i}){const{degrees:o,sections:c,loaded:f,fetchBasics:u,fetchSections:d,fetchSubjects:h}=s,[m,b]=l.useState([]),[x,j]=l.useState(""),[p,v]=l.useState(""),[S,N]=l.useState(""),[w,g]=l.useState("1"),[C,A]=l.useState(""),[k,T]=l.useState(""),[y,$]=l.useState([]),[D,q]=l.useState(!1),[_,M]=l.useState(""),[O,I]=l.useState(""),[R,L]=l.useState([]),[U,z]=l.useState(!1),W=l.useCallback(async(P,ee)=>{if(!P||!ee){$([]);return}q(!0);try{const se=await d(P,ee);$(se||[])}catch(se){console.error("Failed to fetch sections",se),$([])}finally{q(!1)}},[d]),X=l.useCallback(async(P,ee)=>{if(!P||!ee){L([]);return}z(!0);try{const se=await h(P,ee);L(se||[])}catch(se){console.error("Failed to fetch subjects",se),L([])}finally{z(!1)}},[h]),Y=l.useRef(""),ue=l.useRef(""),le=l.useRef(""),me=l.useRef("");l.useEffect(()=>{C&&k?(Y.current!==C||ue.current!==k)&&(Y.current=C,ue.current=k,W(C,k)):($([]),Y.current="",ue.current="")},[C,k,W]),l.useEffect(()=>{_&&O?(le.current!==_||me.current!==O)&&(le.current=_,me.current=O,X(_,O)):(L([]),le.current="",me.current="")},[_,O,X]);const oe=async()=>{var P,ee;if(!S||!w||!p.trim())return t("Select Degree, Sem and enter Name.","error");try{await V().post("/admin/sections",{name:p,degree:S,semester:w}),t("Section added!","success"),v(""),C===S&&k===w&&await W(S,w)}catch(se){t(((ee=(P=se.response)==null?void 0:P.data)==null?void 0:ee.message)||"Failed to add section","error")}},xe=async P=>{var ee,se;if(!(!C||!k)&&confirm(`Delete Section ${P} from ${C} Sem ${k}?`))try{await V().delete("/admin/sections",{data:{name:P,degree:C,semester:k}}),t("Section deleted!","success"),await W(C,k)}catch(ve){t(((se=(ee=ve.response)==null?void 0:ee.data)==null?void 0:se.message)||"Failed to delete section","error")}},[B,te]=l.useState(""),[re,Ue]=l.useState("1"),[ce,ze]=l.useState(""),[Ne,Ke]=l.useState("approvals"),[Je,Ge]=l.useState(!1),[J,fe]=l.useState(null),[je,Ee]=l.useState(null),[F,ne]=l.useState(!1),[ke,de]=l.useState(null),it=l.useCallback(async()=>{Ge(!0);try{const P=await V().get("/admin/pending-students");b(P.data.students||[])}catch(P){P.response&&P.response.status!==401&&t("Failed to fetch pending students.","error"),b([])}finally{Ge(!1)}},[t]),yt=async(P,ee)=>{var se,ve;if(!J){fe(P);try{const De=await V().post("/admin/approve-student",{student_id:P,action:ee});t(De.data.message,"success"),b(xt=>xt.filter(Ea=>Ea.id!==P))}catch(De){De.response&&De.response.status!==401&&t(((ve=(se=De.response)==null?void 0:se.data)==null?void 0:ve.message)||"Action failed.","error")}finally{fe(null)}}},st=async(P,ee,se)=>{var ve,De;if(!ee.trim())return t("Please enter a valid value.","error");try{await V().post(`/admin/${P}`,{name:ee}),t(se,"success"),await u()}catch(xt){xt.response&&xt.response.status!==401&&t(((De=(ve=xt.response)==null?void 0:ve.data)==null?void 0:De.message)||"Operation failed.","error")}},we=async(P,ee)=>{var se,ve;if(confirm(`Delete ${ee}? This might affect data linked to it.`))try{await V().delete(`/admin/${P}`,{data:{name:ee}}),t("Deleted successfully","success"),await u()}catch(De){t(((ve=(se=De.response)==null?void 0:se.data)==null?void 0:ve.message)||"Deletion failed","error")}},Aa=async P=>{var ee,se;if(confirm(`Delete subject ${P}?`))try{await V().delete("/admin/subjects",{data:{degree:_,semester:parseInt(O),name:P}}),t("Subject deleted","success"),X(_,O)}catch(ve){t(((se=(ee=ve.response)==null?void 0:ee.data)==null?void 0:se.message)||"Deletion failed","error")}},_a=async()=>{var P,ee;if(!ce.trim())return t("Subject cannot be empty","error");try{await V().post("/admin/subjects",{degree:B,semester:parseInt(re),name:ce}),t("Subject added successfully!","success"),ze("")}catch(se){se.response&&se.response.status!==401&&t(((ee=(P=se.response)==null?void 0:P.data)==null?void 0:ee.message)||"Failed to add subject.","error")}};l.useEffect(()=>{f&&Array.isArray(o)&&o.length>0&&!B&&te(o[0])},[f,o,B]),l.useEffect(()=>{Ne==="approvals"&&i&&i.role==="admin"&&it()},[Ne,it,i]);const Vt=l.useRef(null),Mt=l.useRef(null),Wt=l.useRef(null);l.useEffect(()=>{if(Vt.current&&Mt.current){const P=Vt.current.querySelector(`button[data-key="${Ne}"]`);P&&ae.to(Mt.current,{y:P.offsetTop,height:P.offsetHeight,opacity:1,duration:.5,ease:"elastic.out(1, 0.6)"})}Wt.current&&ae.fromTo(Wt.current,{opacity:0,scale:.99},{opacity:1,scale:1,duration:.3,ease:"power2.out"})},[Ne]);const Ra=()=>{switch(Ne){case"approvals":return e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-yellow-500/20",children:[e.jsx("h4",{className:"text-2xl font-bold text-yellow-500 mb-4",children:"Pending Student Approvals"}),Je&&e.jsx("div",{className:"text-center p-5",children:e.jsx(H,{className:"animate-spin w-6 h-6 text-yellow-500 mx-auto"})}),!Je&&m.length===0&&e.jsx("div",{className:"p-4 text-slate-500 text-center",children:"No pending students."}),e.jsx("div",{className:"space-y-4",children:m.map(P=>e.jsxs("div",{className:"p-4 bg-yellow-900/20 border-l-4 border-yellow-500 rounded-xl shadow backdrop-blur-sm",children:[e.jsx("div",{className:"font-bold text-lg text-white",children:P.name}),e.jsxs("div",{className:"text-sm text-slate-300",children:[P.srn,"  ",P.email,"  ",P.degree,"  Sem ",P.semester]}),e.jsxs("div",{className:"flex gap-3 mt-3",children:[e.jsx("button",{disabled:J===P.id,className:`${a} bg-green-600 text-white disabled:opacity-50 disabled:cursor-not-allowed min-w-[100px] flex justify-center`,onClick:()=>yt(P.id,"approve"),children:J===P.id?e.jsx(H,{className:"w-5 h-5 animate-spin"}):"Approve"}),e.jsx("button",{disabled:J===P.id,className:`${a} bg-red-600 text-white disabled:opacity-50 disabled:cursor-not-allowed min-w-[100px] flex justify-center`,onClick:()=>yt(P.id,"reject"),children:J===P.id?e.jsx(H,{className:"w-5 h-5 animate-spin"}):"Reject"})]})]},P.id))})]});case"faculty_mgmt":return e.jsx(Pn,{showMessage:t,catalogs:s,buttonClass:a,primaryButtonClass:r});case"faculty-onboard":return e.jsx(Rn,{showMessage:t,buttonClass:a,primaryButtonClass:r,catalogs:s});case"note-upload":return e.jsx(Sn,{showMessage:t,buttonClass:a,primaryButtonClass:r,catalogs:s});case"library-upload":return e.jsx(kn,{showMessage:t,buttonClass:a,primaryButtonClass:r,catalogs:s});case"catalogs":return e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10 space-y-3",children:[e.jsx("h4",{className:"text-xl font-bold text-yellow-400",children:"Manage Degrees"}),e.jsx(Q,{placeholder:"New degree",value:x,onChange:P=>j(P.target.value)}),e.jsx("button",{className:`${a} ${r}`,onClick:()=>st("degrees",x,"Degree added!"),children:"Add Degree"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-300 uppercase tracking-widest mb-2",children:"Current Degrees"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:(o||[]).map(P=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-800/40 rounded border border-white/5 group",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:P}),e.jsx("button",{onClick:()=>we("degrees",P),className:"p-1 text-slate-500 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",title:"Delete Degree",children:e.jsx(Ae,{className:"w-4 h-4"})})]},P))})]})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10 space-y-4",children:[e.jsx("h4",{className:"text-xl font-bold text-yellow-400",children:"Manage Sections"}),e.jsxs("div",{className:"bg-slate-800/40 p-4 rounded-lg border border-white/5 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-2 gap-2",children:[e.jsxs(K,{value:S,onChange:P=>N(P.target.value),disabled:!o.length,className:"w-full",children:[e.jsx("option",{value:"",children:"Select Degree"}),(o||[]).map(P=>e.jsx("option",{value:P,className:"text-slate-900",children:P},P))]}),e.jsx(K,{value:w,onChange:P=>g(P.target.value),className:"w-full",children:Array.from({length:8},(P,ee)=>ee+1).map(P=>e.jsxs("option",{value:P,className:"text-slate-900",children:["Sem ",P]},P))})]}),e.jsx(Q,{placeholder:"New section name (e.g. A)",value:p,onChange:P=>v(P.target.value)}),e.jsx("button",{className:`${a} ${r} w-full`,onClick:oe,children:"Add Section"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-300 uppercase tracking-widest mb-2",children:"View & Delete Sections"}),e.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-2 gap-2 mb-3",children:[e.jsxs(K,{value:C,onChange:P=>{A(P.target.value),T("")},disabled:!o.length,className:"w-full",children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Degree"}),(o||[]).map(P=>e.jsx("option",{value:P,className:"text-slate-900",children:P},P))]}),e.jsxs(K,{value:k,onChange:P=>T(P.target.value),disabled:!C,className:"w-full",children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Semester"}),Array.from({length:8},(P,ee)=>ee+1).map(P=>e.jsxs("option",{value:P,className:"text-slate-900",children:["Sem ",P]},P))]})]}),C&&k?D?e.jsx("div",{className:"text-center p-4",children:e.jsx(H,{className:"animate-spin w-5 h-5 mx-auto text-yellow-500"})}):y.length===0?e.jsxs("div",{className:"text-center p-4 bg-slate-800/20 rounded-lg border border-white/5 text-slate-500 text-sm",children:["No sections found for ",C," Sem ",k,"."]}):e.jsxs(e.Fragment,{children:[e.jsxs(K,{className:"w-full bg-slate-800/50 border border-white/10 text-white py-2.5 text-base",onChange:P=>{const ee=P.target.value;ee&&ee!==""&&(xe(ee),P.target.value="")},children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select a section to delete..."}),y.map(P=>e.jsxs("option",{value:P,className:"text-slate-900",children:["Section ",P]},P))]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400 text-center",children:[y.length," ",y.length===1?"section":"sections"," for ",C," Sem ",k]})]}):e.jsx("div",{className:"text-center p-4 bg-slate-800/20 rounded-lg border border-white/5 text-slate-400 text-sm",children:"Select a degree and semester above to view sections."})]})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10 space-y-4",children:[e.jsx("h4",{className:"text-xl font-bold text-yellow-400",children:"Manage Subjects"}),e.jsxs("div",{className:"bg-slate-800/40 p-4 rounded-lg border border-white/5 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-2 gap-2",children:[e.jsxs(K,{value:B,onChange:P=>te(P.target.value),disabled:!o.length,className:"w-full",children:[e.jsx("option",{value:"",children:"Select Degree"}),(o||[]).map(P=>e.jsx("option",{value:P,className:"text-slate-900",children:P},P))]}),e.jsx(K,{value:re,onChange:P=>Ue(P.target.value),className:"w-full",children:Array.from({length:8},(P,ee)=>ee+1).map(P=>e.jsxs("option",{value:P,className:"text-slate-900",children:["Sem ",P]},P))})]}),e.jsx(Q,{placeholder:"Subject name",value:ce,onChange:P=>ze(P.target.value)}),e.jsx("button",{className:`${a} ${r} w-full`,onClick:_a,children:"Add Subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-300 uppercase tracking-widest mb-2",children:"View & Delete Subjects"}),e.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-2 gap-2 mb-3",children:[e.jsxs(K,{value:_,onChange:P=>{M(P.target.value),I("")},disabled:!o.length,className:"w-full",children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Degree"}),(o||[]).map(P=>e.jsx("option",{value:P,className:"text-slate-900",children:P},P))]}),e.jsxs(K,{value:O,onChange:P=>I(P.target.value),disabled:!_,className:"w-full",children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select Semester"}),Array.from({length:8},(P,ee)=>ee+1).map(P=>e.jsxs("option",{value:P,className:"text-slate-900",children:["Sem ",P]},P))]})]}),_&&O?U?e.jsx("div",{className:"text-center p-4",children:e.jsx(H,{className:"animate-spin w-5 h-5 mx-auto text-yellow-500"})}):R.length===0?e.jsx("div",{className:"text-center p-4 bg-slate-800/20 rounded-lg border border-white/5 text-slate-500 text-sm",children:"No subjects found."}):e.jsxs(e.Fragment,{children:[e.jsxs(K,{className:"w-full bg-slate-800/50 border border-white/10 text-white py-2.5 text-base",onChange:P=>{const ee=P.target.value;ee&&(Aa(ee),P.target.value="")},children:[e.jsx("option",{value:"",className:"text-slate-900",children:"Select a subject to delete..."}),R.map(P=>e.jsx("option",{value:P,className:"text-slate-900",children:P},P))]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400 text-center",children:[R.length," subjects found."]})]}):e.jsx("div",{className:"text-center p-4 bg-slate-800/20 rounded-lg border border-white/5 text-slate-400 text-sm",children:"Select context to view subjects."})]})]})]});case"fees-admin":return e.jsx(En,{showMessage:t,buttonClass:a,primaryButtonClass:r,catalogs:s});case"complaints-admin":return e.jsx(Dn,{showMessage:t,buttonClass:a,primaryButtonClass:r});case"student-list":return e.jsx(_n,{showMessage:t,catalogs:s,buttonClass:a,primaryButtonClass:r});case"hostel-config":return e.jsx(An,{showMessage:t,buttonClass:a,primaryButtonClass:r,catalogs:s});default:return e.jsx("div",{className:"text-center p-6 text-gray-500",children:"Select an option"})}};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-64 bg-slate-900/60 backdrop-blur-xl p-4 rounded-xl shadow-lg border border-white/10 flex-shrink-0",children:[e.jsx("h5",{className:"text-lg font-bold text-amber-400 mb-4 ml-2",children:"Admin Tools"}),e.jsxs("nav",{className:"space-y-1 relative hidden md:block",ref:Vt,children:[e.jsx("div",{ref:Mt,className:"absolute left-0 top-0 w-full bg-amber-600/20 border border-amber-500/30 rounded-xl shadow-[0_0_15px_rgba(245,158,11,0.2)] pointer-events-none opacity-0 z-0",style:{height:0}}),[{key:"approvals",label:"Student Approvals",icon:lt},{key:"student-list",label:"Student Directory",icon:Ot},{key:"faculty_mgmt",label:"Faculty Allocations",icon:ye},{key:"hostel-config",label:"Hostel Config",icon:et},{key:"complaints-admin",label:"Hostel Complaints",icon:Ce},{key:"note-upload",label:"Upload Study Material",icon:pe},{key:"library-upload",label:"Book Upload",icon:Be},{key:"faculty-onboard",label:"Add Faculty",icon:cs},{key:"catalogs",label:"Degrees/Subjects",icon:es},{key:"fees-admin",label:"Manage Fees",icon:We}].map(P=>e.jsxs("button",{"data-key":P.key,onClick:()=>Ke(P.key),className:`w-full flex items-center p-3 rounded-xl font-semibold transition-colors duration-200 relative z-10 whitespace-nowrap ${Ne===P.key?"text-amber-300":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(P.icon,{className:"w-5 h-5 mr-3"}),P.label]},P.key))]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-amber-400 pointer-events-none"}),e.jsx("select",{value:Ne,onChange:P=>Ke(P.target.value),className:"w-full bg-slate-800/80 border border-amber-500/30 rounded-xl py-3 pl-10 pr-4 text-white appearance-none outline-none focus:ring-2 focus:ring-amber-500/50 shadow-lg font-semibold",children:[{key:"approvals",label:"Student Approvals"},{key:"student-list",label:"Student Directory"},{key:"faculty_mgmt",label:"Faculty Allocations"},{key:"hostel-config",label:"Hostel Config"},{key:"complaints-admin",label:"Hostel Complaints"},{key:"note-upload",label:"Upload Study Material"},{key:"library-upload",label:"Book Upload"},{key:"faculty-onboard",label:"Add Faculty"},{key:"catalogs",label:"Degrees/Subjects"},{key:"fees-admin",label:"Manage Fees"}].map(P=>e.jsx("option",{value:P.key,className:"bg-slate-900 text-white py-2",children:P.label},P.key))}),e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})})]}),e.jsx("div",{ref:Wt,className:"flex-1 min-h-[600px] bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-2xl border border-white/10 relative",children:Ra()})]})}function ka({showMessage:t,buttonClass:s,primaryButtonClass:a}){const[r,n]=l.useState([]),[i,o]=l.useState(new Date),[c,f]=l.useState(!1),[u,d]=l.useState(null);l.useEffect(()=>{(async()=>{f(!0);try{const w=await V().get("/student/attendance");n(w.data.attendance||[])}catch{}finally{f(!1)}})()},[]);const h=(N,w)=>new Date(N,w+1,0).getDate(),m=(N,w)=>new Date(N,w,1).getDay(),b=i.getFullYear(),x=i.getMonth(),j=h(b,x),p=m(b,x),v=N=>{const w=`${b}-${String(x+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`,g=r.filter(A=>A.date===w);return g.length?g.some(A=>A.status==="Absent")?"Absent":"Present":null},S=N=>{const w=`${b}-${String(x+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`;return r.filter(g=>g.date===w)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"text-2xl font-bold text-blue-400 flex items-center",children:[e.jsx(ye,{className:"w-6 h-6 mr-2"})," My Attendance"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-blue-500/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>o(new Date(b,x-1,1)),className:"text-slate-400 hover:text-white",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("h5",{className:"text-lg font-bold text-white uppercase tracking-wider",children:i.toLocaleString("default",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>o(new Date(b,x+1,1)),className:"text-slate-400 hover:text-white rotate-180",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 text-center mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(N=>e.jsx("div",{className:"text-xs font-bold text-slate-500",children:N},N))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:p}).map((N,w)=>e.jsx("div",{},`empty-${w}`)),Array.from({length:j}).map((N,w)=>{const g=w+1,C=v(g),A=u===g;let k="bg-slate-800/50 border-white/5 text-slate-300";return C==="Present"&&(k="bg-green-900/40 border-green-500/30 text-green-300"),C==="Absent"&&(k="bg-red-900/40 border-red-500/30 text-red-300"),A&&(k+=" ring-2 ring-blue-500"),e.jsx("div",{onClick:()=>d(g),className:`aspect-square rounded-lg flex items-center justify-center font-bold text-sm border cursor-pointer hover:opacity-80 transition-all ${k}`,children:g},g)})]}),e.jsxs("div",{className:"flex gap-4 mt-4 text-xs text-slate-400 justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})," Present"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"})," Absent"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-700"})," No Data"]})]})]}),e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10",children:[e.jsx("h5",{className:"text-xl font-bold text-slate-300 mb-4",children:u?`Details for ${i.toLocaleString("default",{month:"long"})} ${u}`:"Select a date to view details"}),u?e.jsx("div",{className:"space-y-3",children:S(u).length>0?S(u).map((N,w)=>e.jsxs("div",{className:`p-3 rounded-lg border flex justify-between items-center ${N.status==="Present"?"bg-green-900/10 border-green-500/20":"bg-red-900/10 border-red-500/20"}`,children:[e.jsx("span",{className:"font-medium text-slate-200",children:N.subject}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${N.status==="Present"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:N.status})]},w)):e.jsx("div",{className:"text-slate-500 italic",children:"No classes recorded for this day."})}):e.jsxs("div",{className:"text-center py-10 text-slate-600",children:[e.jsx(ye,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),"Click on a calendar date"]})]})]})]})}function Fn({showMessage:t,buttonClass:s,primaryButtonClass:a}){const[r,n]=l.useState("loading"),[i,o]=l.useState(null),[c,f]=l.useState(null),[u,d]=l.useState(""),[h,m]=l.useState(null),[b,x]=l.useState({}),[j,p]=l.useState(!1),v=l.useCallback(async()=>{p(!0);try{const q=(await V().get(`/attendance/today?t=${new Date().getTime()}`)).data;if(o(q),q.status==="holiday")n("holiday");else if(q.status==="marked"||q.status==="marked_no_class")n("marked");else if(q.status==="pending")if(q.message&&q.message.includes("Add one first"))n("upload");else{n("checkin");const _={};(q.subjects||[]).forEach(M=>_[M]="Present"),x(_)}}catch(D){console.error(D),t("Failed to load attendance status.","error")}finally{p(!1)}},[t]);l.useEffect(()=>{v()},[v]);const S=async()=>{var D,q;if(!u.trim()&&!h)return t("Please paste text or upload a file.","error");p(!0);try{const _=new FormData;_.append("routine_text",u),h&&_.append("file",h),await V().post("/attendance/routine/upload",_,{headers:{"Content-Type":"multipart/form-data"}}),t("Routine parsed and saved!","success"),v()}catch(_){t(((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||"Parsing failed. Try again.","error")}finally{p(!1)}},N=async D=>{var q,_;p(!0);try{const M={type:D};D==="classes"&&(M.data=b);const O=await V().post("/attendance/mark",M);t(O.data.message||"Attendance saved.","success"),v()}catch(M){t(((_=(q=M.response)==null?void 0:q.data)==null?void 0:_.message)||"Failed to mark.","error")}finally{p(!1)}},w=async()=>{if(window.confirm("Are you sure you want to delete your routine? You will need to re-upload it.")){p(!0);try{await V().delete("/attendance/routine"),t("Routine deleted.","success"),n("upload"),d(""),m(null),o(null),x({})}catch{t("Failed to delete routine.","error")}finally{p(!1)}}},g=async()=>{p(!0);try{const D=await V().get("/attendance/stats");f(D.data),n("stats")}catch{t("Failed to load stats.","error")}finally{p(!1)}},C=()=>e.jsxs("div",{className:"space-y-4 max-w-xl mx-auto text-center animate-in fade-in zoom-in duration-300",children:[e.jsx("div",{className:"p-4 bg-blue-500/10 rounded-full w-fit mx-auto mb-4",children:e.jsx(Be,{className:"w-8 h-8 text-blue-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Setup Your Routine"}),e.jsx("p",{className:"text-slate-400",children:"Paste your routine text or upload an image/PDF."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:u,onChange:D=>d(D.target.value),placeholder:"Ex: Monday: Math 10am, Physics 12pm...",className:"w-full h-32 bg-slate-800/50 border border-white/10 rounded-xl p-4 text-white focus:ring-2 focus:ring-blue-500/50 outline-none"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-white/10"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-900 px-2 text-slate-500",children:"Or Upload File"})})]}),e.jsx("input",{type:"file",accept:".txt,.pdf,.png,.jpg,.jpeg,.webp",onChange:D=>m(D.target.files[0]),className:`block w-full text-sm text-slate-400\r
                        file:mr-4 file:py-2 file:px-4\r
                        file:rounded-full file:border-0\r
                        file:text-sm file:font-semibold\r
                        file:bg-blue-500/10 file:text-blue-400\r
                        hover:file:bg-blue-500/20\r
                        cursor-pointer`})]}),e.jsx("button",{onClick:S,disabled:j,className:`${s} ${a} w-full`,children:j?e.jsx(H,{className:"animate-spin w-5 h-5"}):"Process Routine with AI"}),e.jsx("div",{className:"pt-4 border-t border-white/5 mt-4",children:e.jsx("button",{onClick:()=>n("checkin"),className:"text-sm text-slate-500 hover:text-white underline",children:"Cancel / Go Back"})})]}),A=()=>e.jsx("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Today's Classes"}),e.jsx("div",{className:"space-y-4 mb-6",children:Object.keys(b).length===0?e.jsx("div",{className:"p-4 bg-slate-800/50 rounded-xl text-slate-400 text-sm",children:"No classes found for today in your routine."}):Object.keys(b).map((D,q)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/40 border border-white/5 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-slate-200",children:D}),e.jsxs("div",{className:"flex bg-slate-900 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x({...b,[D]:"Present"}),className:`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${b[D]==="Present"?"bg-green-500 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:"P"}),e.jsx("button",{onClick:()=>x({...b,[D]:"Absent"}),className:`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${b[D]==="Absent"?"bg-red-500 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:"A"})]})]},q))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>N("classes"),disabled:j||Object.keys(b).length===0,className:`${s} ${a} w-full flex justify-center items-center gap-2`,children:[e.jsx(Se,{className:"w-4 h-4"})," Save Attendance"]}),e.jsx("button",{onClick:()=>N("no_class"),disabled:j,className:`${s} border border-slate-600 hover:bg-slate-800 w-full text-slate-300`,children:"No Classes Today"})]}),e.jsxs("div",{className:"mt-6 flex justify-between items-center text-xs text-slate-500 border-t border-white/5 pt-4",children:[e.jsxs("button",{onClick:g,className:"hover:text-blue-400 flex items-center gap-1",children:[e.jsx(za,{className:"w-3 h-3"})," View Stats"]}),e.jsxs("button",{onClick:w,className:"hover:text-red-400 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"})," Reset Routine"]})]})]})}),k=async()=>{if(window.confirm("Want to change today's attendance? This will reset today's entry.")){p(!0);try{await V().delete("/attendance/today"),t("Ready to update.","success"),v()}catch{t("Failed to reset.","error"),p(!1)}}},T=()=>e.jsxs("div",{className:"text-center py-10 space-y-6 animate-in zoom-in duration-300",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto ring-4 ring-emerald-500/10",children:e.jsx(Qe,{className:"w-10 h-10 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"You're All Set!"}),e.jsx("p",{className:"text-slate-400 max-w-sm mx-auto",children:(i==null?void 0:i.status)==="marked_no_class"?"Enjoy your day off! ":"Attendance for today has been recorded."}),(i==null?void 0:i.fun_message)&&e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border border-indigo-500/20 rounded-xl",children:e.jsxs("p",{className:"text-indigo-300 italic",children:['" ',i.fun_message,' "']})})]}),e.jsxs("div",{className:"flex justify-center gap-4 text-sm font-medium",children:[e.jsx("button",{onClick:g,className:"text-blue-400 hover:text-blue-300 underline",children:"View My Statistics"}),e.jsx("span",{className:"text-slate-600",children:"|"}),e.jsxs("button",{onClick:k,className:"text-slate-400 hover:text-white flex items-center gap-1",children:[e.jsx(is,{className:"w-3 h-3"})," Edit / Reset"]})]})]}),y=()=>e.jsxs("div",{className:"text-center py-10 space-y-6 animate-in zoom-in duration-300",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto ring-4 ring-amber-500/10",children:e.jsx(He,{className:"w-10 h-10 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Happy Sunday!"}),e.jsxs("div",{className:"mt-4 p-6 bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/20 rounded-xl max-w-md mx-auto relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(He,{className:"w-20 h-20"})}),e.jsx("p",{className:"text-amber-200 text-lg font-medium leading-relaxed",children:(i==null?void 0:i.message)||"Take a break and recharge for the week ahead!"})]})]}),e.jsx("button",{onClick:g,className:"text-blue-400 hover:text-blue-300 underline font-medium",children:"View Statistics"})]}),$=()=>{var D;return e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:v,className:"p-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-300 transition-colors",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Attendance Analytics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 bg-gradient-to-br from-blue-600 to-indigo-600 p-6 rounded-2xl shadow-xl text-white relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-blue-200 text-sm font-bold uppercase tracking-wider mb-1",children:"Overall Attendance"}),e.jsxs("div",{className:"text-5xl font-bold",children:[(c==null?void 0:c.overall)||0,"%"]}),e.jsx("div",{className:"text-xs text-blue-200 mt-2 opacity-80",children:"Accumulated Average"})]}),e.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-2xl"})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-3",children:[(D=c==null?void 0:c.subject_wise)==null?void 0:D.map((q,_)=>e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-200",children:q.subject}),e.jsxs("div",{className:"text-xs text-slate-500",children:[q.present,"/",q.total," Classes Attended"]})]}),e.jsxs("div",{className:`text-xl font-bold ${q.percentage>=75?"text-emerald-400":"text-red-400"}`,children:[q.percentage,"%"]})]},_)),(!(c!=null&&c.subject_wise)||c.subject_wise.length===0)&&e.jsx("div",{className:"text-center text-slate-500 py-4",children:"No data available yet."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:w,className:"text-xs text-slate-500 hover:text-red-400 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"})," Reset Routine"]})})]})};return e.jsx("div",{className:"bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-lg border border-white/10 min-h-[400px]",children:j&&r==="loading"?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-20 text-blue-400",children:[e.jsx(H,{className:"w-10 h-10 animate-spin mb-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Syncing with Orbit..."})]}):e.jsxs(e.Fragment,{children:[r==="upload"&&C(),r==="checkin"&&A(),r==="marked"&&T(),r==="holiday"&&y(),r==="stats"&&$()]})})}function Ca({user:t,showMessage:s}){const[a,r]=l.useState(null),[n,i]=l.useState(!0);return l.useEffect(()=>{(async()=>{try{const c=await V().get("/api/academic-insights");r(c.data.insights)}catch(c){console.error(c),s("Failed to load insights.","error")}finally{i(!1)}})()},[]),n?e.jsx("div",{className:"text-center py-20 text-slate-400 animate-pulse",children:"Consulting AI Counselor..."}):a?e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 rounded-full bg-gradient-to-r from-violet-500 to-fuchsia-500 shadow-lg shadow-fuchsia-500/20",children:e.jsx(He,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"AI Academic Insights"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Personalized analysis powered by Groq AI"})]})]}),e.jsxs("div",{className:"bg-slate-800/60 backdrop-blur-xl border border-violet-500/30 rounded-2xl p-6 relative overflow-hidden group hover:border-violet-500/50 transition-all",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-violet-600/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs("h3",{className:"text-lg font-semibold text-violet-300 mb-3 flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5"}),"Counselor's Note"]}),e.jsxs("p",{className:"text-slate-200 leading-relaxed text-lg italic opacity-90",children:['"',a.counselor_message,'"']})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/50 border border-red-500/20 rounded-xl p-5 hover:bg-slate-900/80 transition-all",children:[e.jsxs("h4",{className:"text-red-400 font-bold mb-4 flex items-center gap-2 border-b border-red-500/10 pb-2",children:[e.jsx(Ia,{className:"w-5 h-5"})," Attendance Risks"]}),a.attendance_risks&&a.attendance_risks.length>0?e.jsx("ul",{className:"space-y-2",children:a.attendance_risks.map((o,c)=>e.jsxs("li",{className:"flex items-center gap-2 text-red-200 bg-red-500/10 px-3 py-2 rounded-lg text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"})," ",o]},c))}):e.jsx("div",{className:"text-slate-500 text-sm italic",children:"No attendance risks detected. Great job!"})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-amber-500/20 rounded-xl p-5 hover:bg-slate-900/80 transition-all",children:[e.jsxs("h4",{className:"text-amber-400 font-bold mb-4 flex items-center gap-2 border-b border-amber-500/10 pb-2",children:[e.jsx(Ba,{className:"w-5 h-5"})," Focus Priorities"]}),a.priorities&&a.priorities.length>0?e.jsx("ul",{className:"space-y-2",children:a.priorities.map((o,c)=>e.jsxs("li",{className:"flex items-center gap-2 text-amber-200 bg-amber-500/10 px-3 py-2 rounded-lg text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"})," ",o]},c))}):e.jsx("div",{className:"text-slate-500 text-sm italic",children:"No urgent priorities. Keep maintaining your scores!"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-emerald-500/20 rounded-xl p-6 hover:bg-slate-900/80 transition-all",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold mb-4 flex items-center gap-2 border-b border-emerald-500/10 pb-2",children:[e.jsx(Ua,{className:"w-5 h-5"})," Improvement Plan"]}),e.jsx("div",{className:"grid gap-3",children:a.suggestions.map((o,c)=>e.jsxs("div",{className:"flex gap-3 text-slate-300 text-sm bg-emerald-500/5 p-3 rounded-lg border border-emerald-500/10 hover:border-emerald-500/30 transition-all",children:[e.jsxs("span",{className:"text-emerald-500 font-bold font-mono",children:[c+1,"."]}),e.jsx("span",{children:o})]},c))})]})]}):e.jsx("div",{className:"text-center py-20 text-slate-500",children:"No insights available."})}function $n({user:t,showMessage:s,catalogs:a,buttonClass:r,primaryButtonClass:n}){const[i,o]=l.useState("notes"),c=[{key:"notes",label:"Notes & Notices",icon:pe},{key:"books",label:"Internal Library",icon:Ve},{key:"placement",label:"Placement Assist",icon:Oe},{key:"fees",label:"Fees & Payments",icon:We},{key:"marks",label:"Marks & Grades",icon:Ye},{key:"feedback",label:"Feedback",icon:tt},{key:"attendance",label:"Attendance",icon:ye},{key:"attendify",label:"Attendify",icon:Qe},{key:"complaints",label:"Hostel Complaints",icon:et},{key:"insights",label:"Academic Insights",icon:us},{key:"chat",label:"Orbit Bot",icon:Oe}],f=l.useRef(null),u=l.useRef(null),d=l.useRef(null);l.useEffect(()=>{if(f.current&&u.current){const m=f.current.querySelector(`button[data-key="${i}"]`);m&&ae.to(u.current,{y:m.offsetTop,height:m.offsetHeight,opacity:1,duration:.5,ease:"elastic.out(1, 0.6)"})}d.current&&ae.fromTo(d.current,{opacity:0,x:20},{opacity:1,x:0,duration:.4,ease:"power2.out"})},[i]);const h=()=>{switch(i){case"notes":return e.jsx(gn,{user:t,showMessage:s,catalogs:a,primaryButtonClass:n,buttonClass:r});case"books":return e.jsx(ya,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"placement":return e.jsx(on,{token:localStorage.getItem("noteorbit_token"),user:t});case"fees":return e.jsx(Na,{user:t,showMessage:s,primaryButtonClass:n,buttonClass:r});case"marks":return e.jsx(wa,{user:t,showMessage:s,primaryButtonClass:n,buttonClass:r});case"feedback":return e.jsx(ja,{showMessage:s});case"attendance":return e.jsx(ka,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"attendify":return e.jsx(Fn,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"complaints":return e.jsx(va,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"insights":return e.jsx(Ca,{user:t,showMessage:s});case"chat":return e.jsx(Sa,{showMessage:s,primaryButtonClass:n,buttonClass:r});default:return e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Welcome to NoteOrbit! Select a module to begin."})}};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-56 bg-slate-900/60 backdrop-blur-xl p-4 rounded-xl shadow-lg border border-white/10 flex-shrink-0 animate-in slide-in-from-left-4 duration-500",children:[e.jsx("h5",{className:"text-lg font-bold text-blue-400 mb-4 ml-2",children:"Student Hub"}),e.jsxs("nav",{className:"space-y-1 relative hidden md:block",ref:f,children:[e.jsx("div",{ref:u,className:"absolute left-0 top-0 w-full bg-blue-600/20 border border-blue-500/30 rounded-xl shadow-[0_0_15px_rgba(59,130,246,0.2)] pointer-events-none opacity-0 z-0",style:{height:0}}),c.map(m=>e.jsxs("button",{"data-key":m.key,onClick:()=>o(m.key),className:`w-full flex items-center p-3 rounded-xl font-semibold transition-colors duration-200 relative z-10 ${i===m.key?"text-blue-300":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(m.icon,{className:"w-5 h-5 mr-3"}),m.label]},m.key))]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-400 pointer-events-none"}),e.jsx("select",{value:i,onChange:m=>o(m.target.value),className:"w-full bg-slate-800/80 border border-blue-500/30 rounded-xl py-3 pl-10 pr-4 text-white appearance-none outline-none focus:ring-2 focus:ring-blue-500/50 shadow-lg font-semibold",children:c.map(m=>e.jsx("option",{value:m.key,className:"bg-slate-900 text-white py-2",children:m.label},m.key))}),e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})})]}),e.jsxs("div",{ref:d,className:"flex-1 min-h-[600px] bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-2xl border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl pointer-events-none"}),h()]})]})}function Ln({user:t,showMessage:s,primaryButtonClass:a,buttonClass:r}){const[n,i]=l.useState([]),[o,c]=l.useState([]),[f,u]=l.useState([]),[d,h]=l.useState(null),[m,b]=l.useState(""),[x,j]=l.useState(!0),[p,v]=l.useState(!1),[S,N]=l.useState(window.innerWidth>=768),w=l.useRef(null),g=()=>{var y;(y=w.current)==null||y.scrollIntoView({behavior:"smooth"})};l.useEffect(g,[f]);const C=l.useCallback(async()=>{j(!0);try{const[y,$]=await Promise.all([V().get("/parent/professors"),V().get("/parent/conversations")]);i(y.data.professors||[]),c($.data.conversations||[])}catch(y){console.error(y),s("Failed to load data.","error")}finally{j(!1)}},[s]);l.useEffect(()=>{C()},[C]);const A=async y=>{h(y),N(!1);try{const $=await V().get(`/parent/messages/${y.id}`);u($.data.messages||[]),c(D=>D.map(q=>q.faculty_id===y.id?{...q,unread_count:0}:q))}catch{u([])}},k=async()=>{if(m.trim()){v(!0);try{if(f.length===0){const $=Array.isArray(d.allocations)?d.allocations:[],D=$.length>0?$[0]:"Parent Inquiry";await V().post("/parent/contact-professor",{professor_id:d.id,subject:D,message:m})}else await V().post("/parent/messages/reply",{faculty_id:d.id,reply_body:m});const y={id:Date.now(),sender:"parent",body:m,timestamp:new Date().toISOString()};u($=>[...$,y]),b("")}catch(y){console.error(y),s("Failed to send message.","error")}finally{v(!1)}}};if(x)return e.jsx("div",{className:"p-10 text-center",children:e.jsx(H,{className:"animate-spin w-8 h-8 mx-auto text-blue-500"})});const T=n.map(y=>{const $=o.find(D=>D.faculty_id===y.id);return{...y,...$}});return e.jsxs("div",{className:"flex h-[600px] gap-4 relative isolate overflow-hidden",children:[e.jsxs("div",{className:`
                absolute inset-y-0 left-0 z-50 h-full w-3/4 max-w-xs bg-slate-900/95 backdrop-blur-2xl border-r border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] transition-transform duration-300 ease-out
                md:static md:w-1/3 md:bg-slate-900/60 md:backdrop-blur-xl md:border md:rounded-xl md:flex md:flex-col md:shadow-none md:translate-x-0
                ${S?"translate-x-0":"-translate-x-full md:w-0 md:border-0 md:p-0"}
            `,children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[e.jsxs("h5",{className:"font-bold text-lg text-white flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-blue-400"})," Contacts"]}),e.jsx("button",{onClick:()=>N(!1),className:"md:hidden p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:T.map(y=>e.jsxs("div",{onClick:()=>A(y),className:`p-4 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors ${(d==null?void 0:d.id)===y.id?"bg-blue-900/20 border-l-4 border-l-blue-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"font-semibold text-slate-200",children:["Prof. ",y.name]}),y.unread_count>0&&e.jsxs("span",{className:"bg-blue-500 text-white text-[10px] px-2 py-0.5 rounded-full",children:[y.unread_count," new"]})]}),e.jsx("div",{className:"text-xs text-blue-400 mb-1",children:y.allocations&&y.allocations.length>0?y.allocations.join(", "):"General Faculty"}),y.last_message&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:y.last_message}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:new Date(y.last_timestamp).toLocaleDateString()})]})]},y.id))})]}),S&&e.jsx("div",{className:"absolute inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden animate-in fade-in duration-200",onClick:()=>N(!1)}),e.jsx("div",{className:`flex-1 flex flex-col bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden relative transition-all duration-300 ${S?"md:w-2/3":"w-full"}`,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-white/10 bg-slate-800/50 flex items-center shadow-sm z-10",children:[e.jsx("button",{onClick:()=>N(!S),className:"mr-3 p-1 rounded-lg hover:bg-white/5 transition-colors text-white",children:e.jsx(_e,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-white",children:["Prof. ",d.name]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Subject: ",d.allocations&&d.allocations.length>0?d.allocations.join(", "):"N/A"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-950/30",children:[f.length===0?e.jsxs("div",{className:"text-center text-slate-500 py-10 opacity-70",children:[e.jsxs("p",{children:["Start a new conversation with Prof. ",d.name,"."]}),e.jsxs("p",{className:"text-sm",children:['Subject will default to: "',d.allocations&&d.allocations[0]?d.allocations[0]:"Parent Inquiry",'"']})]}):f.map((y,$)=>{const D=y.sender==="parent";return e.jsx("div",{className:`flex ${D?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] p-3 rounded-2xl text-sm leading-relaxed shadow-sm relative ${D?"bg-blue-600 text-white rounded-br-none":"bg-slate-700 text-slate-200 rounded-bl-none"}`,children:[!D&&e.jsxs("div",{className:"text-[10px] text-slate-400 mb-1 font-bold uppercase tracking-wider",children:["Prof. ",d.name]}),y.body,e.jsx("div",{className:`text-[9px] mt-1 opacity-70 ${D?"text-blue-100 text-right":"text-slate-400"}`,children:new Date(y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$)}),e.jsx("div",{ref:w})]}),e.jsxs("div",{className:"p-4 bg-slate-800/80 border-t border-white/10",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{className:"flex-1 bg-slate-900 text-white rounded-xl border border-white/10 p-3 text-sm focus:ring-2 focus:ring-blue-500/50 outline-none resize-none h-12",placeholder:`Message Prof. ${d.name}...`,value:m,onChange:y=>b(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),k())}}),e.jsx("button",{onClick:k,disabled:p||!m.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-xl disabled:opacity-50 transition-all active:scale-95",children:p?e.jsx(H,{className:"animate-spin w-5 h-5"}):e.jsx(Lt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-[10px] text-center text-slate-500 mt-2",children:"Message sent securely via email & portal."})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 relative",children:[e.jsx("button",{onClick:()=>N(!S),className:"absolute top-4 left-4 p-2 rounded-lg hover:bg-white/5 transition-colors text-slate-400",children:e.jsx(_e,{className:"w-6 h-6"})}),e.jsx(Ce,{className:"w-16 h-16 opacity-20 mb-4"}),e.jsx("p",{children:"Select a professor to start messaging."})]})}),e.jsxs("p",{className:"text-xs text-center text-slate-500",children:["Check your email (",t.email,") for notifications."]})]})}function On({user:t,showMessage:s,catalogs:a,buttonClass:r,primaryButtonClass:n}){const[i,o]=l.useState("attendance"),c=[{key:"attendance",label:"Ward Attendance",icon:ye},{key:"contact",label:"Contact Faculty",icon:Ce},{key:"marks",label:"Academic Performance",icon:Ye},{key:"fees",label:"Fee Payments",icon:We},{key:"feedback",label:"Feedback",icon:tt},{key:"complaints",label:"Hostel Complaints",icon:et},{key:"insights",label:"Academic Insights",icon:us}],f=l.useRef(null),u=l.useRef(null),d=l.useRef(null);l.useEffect(()=>{if(f.current&&u.current){const m=f.current.querySelector(`button[data-key="${i}"]`);m&&ae.to(u.current,{y:m.offsetTop,height:m.offsetHeight,opacity:1,duration:.5,ease:"elastic.out(1, 0.6)"})}d.current&&ae.fromTo(d.current,{opacity:0,x:20},{opacity:1,x:0,duration:.4,ease:"power2.out"})},[i]);const h=()=>{switch(i){case"attendance":return e.jsx(ka,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"contact":return e.jsx(Ln,{user:t,showMessage:s,primaryButtonClass:n,buttonClass:r});case"marks":return e.jsx(wa,{user:t,showMessage:s,primaryButtonClass:n,buttonClass:r});case"fees":return e.jsx(Na,{user:t,showMessage:s,primaryButtonClass:n,buttonClass:r});case"feedback":return e.jsx(ja,{showMessage:s});case"complaints":return e.jsx(va,{showMessage:s,primaryButtonClass:n,buttonClass:r});case"insights":return e.jsx(Ca,{user:t,showMessage:s});default:return e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Welcome, Parent! Select a module to begin."})}};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-64 bg-slate-900/60 backdrop-blur-xl p-4 rounded-xl shadow-lg border border-white/10 flex-shrink-0 animate-in slide-in-from-left-4 duration-500",children:[e.jsxs("div",{className:"mb-6 ml-2",children:[e.jsx("h5",{className:"text-lg font-bold text-rose-400",children:"Parent Portal"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Viewing data for: ",e.jsx("span",{className:"text-white font-medium",children:t.name.replace("'s Parent","")})]})]}),e.jsxs("nav",{className:"space-y-1 relative hidden md:block",ref:f,children:[e.jsx("div",{ref:u,className:"absolute left-0 top-0 w-full bg-rose-600/20 border border-rose-500/30 rounded-xl shadow-[0_0_15px_rgba(225,29,72,0.2)] pointer-events-none opacity-0 z-0",style:{height:0}}),c.map(m=>e.jsxs("button",{"data-key":m.key,onClick:()=>o(m.key),className:`w-full flex items-center p-3 rounded-xl font-semibold text-sm whitespace-nowrap transition-colors duration-200 relative z-10 ${i===m.key?"text-rose-300":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(m.icon,{className:"w-5 h-5 mr-3"}),m.label]},m.key))]}),e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-rose-400 pointer-events-none"}),e.jsx("select",{value:i,onChange:m=>o(m.target.value),className:"w-full bg-slate-800/80 border border-rose-500/30 rounded-xl py-3 pl-10 pr-4 text-white appearance-none outline-none focus:ring-2 focus:ring-rose-500/50 shadow-lg font-semibold",children:c.map(m=>e.jsx("option",{value:m.key,className:"bg-slate-900 text-white py-2",children:m.label},m.key))}),e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})})]}),e.jsxs("div",{ref:d,className:"flex-1 min-h-[600px] bg-slate-900/60 backdrop-blur-xl p-6 rounded-xl shadow-2xl border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-rose-500/5 rounded-full blur-3xl pointer-events-none"}),h()]})]})}function In(){const[t,s,a]=dn(),[r,n]=l.useState(null),[i,o]=l.useState(null),[c,f]=l.useState("login"),[u,d]=l.useState({text:null,type:null}),[h,m]=l.useState(!1),b=cn();l.useEffect(()=>{if(!a)if(t){const T=t.role;T==="chro"||T==="trainer"||T==="hrd_trainer"||T==="hrd"?(o("HRD"),n("hrd-dashboard")):n("dashboard")}else n("user_type")},[t,a]),l.useEffect(()=>{r==="credentials"&&(window.scrollTo({top:0,behavior:"auto"}),setTimeout(()=>{const T=document.getElementById("credentials-form");T?T.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):window.scrollTo({top:0,behavior:"smooth"})},150))},[r]);const x=(T,y="error")=>d({text:T,type:y}),j=()=>d({text:null,type:null});l.useEffect(()=>{if(u.text){const T=setTimeout(()=>{j()},3e3);return()=>clearTimeout(T)}},[u]);const p=T=>T==="Faculty"?"professor":T?T.toLowerCase():null,v=async(T,y)=>{var D,q;j();const $=p(i);if(!$)return x("Please select a valid role first.","error");try{let _={password:y,role:$};_.email=T;const M=await ht().post("/login",_);console.log("BACKEND ROLE SAYS ",M.data.user.role);let{token:O,user:I}=M.data;if(I.degree=I.degree||"",I.semester=I.semester||1,I.section=I.section||"",I.role!==$)throw ot(null),localStorage.removeItem("noteorbit_user"),new Error(`Access denied. You are logging in as a ${I.role}, not a ${$}.`);if(I.role==="student"&&I.status!=="APPROVED")throw ot(null),localStorage.removeItem("noteorbit_user"),new Error(`Account status: ${I.status}. Wait for admin approval.`);m(!0),setTimeout(()=>{ot(O),localStorage.setItem("noteorbit_user",JSON.stringify(I)),s(I),x("Logged in successfully.","success"),n("dashboard"),m(!1)},2e3)}catch(_){throw x(((q=(D=_.response)==null?void 0:D.data)==null?void 0:q.message)||_.message||"Login failed"),_}},S=async T=>{var y,$;j();try{const D=await ht().post("/register",T);x(D.data.message,"success"),f("login")}catch(D){x((($=(y=D.response)==null?void 0:y.data)==null?void 0:$.message)||"Registration failed")}},N=()=>{localStorage.removeItem("noteorbit_user"),ot(null),s(null),n("user_type"),j()},w="w-full flex items-center justify-center px-4 py-3 font-semibold rounded-full shadow-md transition duration-200",g="bg-blue-600 hover:bg-blue-700 text-white",C="bg-green-600 hover:bg-green-700 text-white",A="bg-red-600 hover:bg-red-700 text-white";l.useEffect(()=>{r==="credentials"&&setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"});const T=document.querySelector(".min-h-screen");T&&T.scrollIntoView({behavior:"smooth",block:"start"})},100)},[r]);const k=()=>{if(a||r===null)return e.jsxs("div",{className:"text-center p-10 text-gray-500 flex justify-center items-center h-48",children:[e.jsx(H,{className:"animate-spin w-8 h-8 mr-3 text-blue-500"}),e.jsx("span",{className:"text-lg",children:"Loading Session..."})]});if(r==="dashboard"&&!t)return n("user_type"),e.jsx("div",{className:"text-center p-10 text-gray-500",children:"Redirecting..."});const T=localStorage.getItem("noteorbit_token");if(i&&(i==="HRD"||i==="Trainer")||i&&i.ui==="HRD")return r==="hrd-dashboard"&&T?e.jsx("div",{className:"w-full max-w-5xl mx-auto animate-in fade-in duration-700",children:e.jsx(en,{userRole:i,token:T,setPage:n,setToken:()=>{},catalogs:b})}):e.jsx(Ol,{setToken:()=>{},setPage:n,setUserRole:o});switch(r){case"user_type":return e.jsx(pn,{setUserRole:o,setPage:n,buttonClass:w,primaryButtonClass:g});case"credentials":return e.jsx("div",{className:"animate-in fade-in slide-in-from-right-10 duration-500 w-full max-w-lg mx-auto",id:"credentials-form",children:e.jsx(bn,{showMessage:x,userRole:i,authMode:c,setAuthMode:f,setPage:n,onLogin:v,onRegister:S,catalogs:b,primaryButtonClass:g,successButtonClass:C,buttonClass:w})},c);case"dashboard":return e.jsx("div",{className:"w-full max-w-5xl mx-auto animate-in fade-in duration-700",children:t.role==="admin"?e.jsx(Tn,{user:t,showMessage:x,catalogs:b,buttonClass:w,primaryButtonClass:g,dangerButtonClass:A}):t.role==="professor"?e.jsx(yn,{user:t,showMessage:x,catalogs:b,buttonClass:w,successButtonClass:C,dangerButtonClass:A}):t.role==="student"?e.jsx($n,{user:t,showMessage:x,catalogs:b,buttonClass:w,primaryButtonClass:g}):t.role==="parent"?e.jsx(On,{user:t,showMessage:x,catalogs:b,buttonClass:w,primaryButtonClass:g}):e.jsx("div",{className:"card",children:"Unknown role"})});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-transparent font-sans p-4 sm:p-8 text-white selection:bg-blue-500/30 selection:text-blue-200 relative overflow-x-hidden",children:[e.jsx($l,{}),e.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none",children:e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[120px] opacity-20"})}),e.jsxs("div",{className:"max-w-6xl mx-auto w-full relative z-10",children:[e.jsxs("div",{className:"header flex justify-between items-center p-6 bg-slate-900/60 backdrop-blur-xl rounded-2xl border border-white/10 mb-8 sticky top-2 z-50 shadow-2xl",children:[e.jsx("div",{className:"flex flex-col",children:e.jsx(un,{})}),e.jsx("div",{className:"flex items-center space-x-3",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm font-medium text-slate-300 mr-4 hidden sm:inline",children:[t.name," ",e.jsxs("span",{className:"text-blue-400 uppercase",children:["(",t.role,")"]})]}),e.jsxs("button",{className:`${w} bg-red-500/10 hover:bg-red-500/90 text-red-400 hover:text-white border border-red-500/50 w-28 py-2.5 backdrop-blur-sm transition-all`,onClick:N,children:[e.jsx(ds,{className:"w-4 h-4 mr-2"})," Logout"]})]}):null})]}),h&&e.jsx(hn,{}),e.jsx(mn,{message:u.text,type:u.type,onClose:j}),e.jsx("div",{className:"mt-6",children:k()}),!t&&r!=="hrd-dashboard"&&e.jsx("footer",{className:"mt-12 mb-8 pt-8 border-t border-white/10",children:e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl rounded-2xl border border-white/10 p-6 sm:p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-3 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2"}),"About NoteOrbit"]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"A comprehensive academic management system designed to streamline student-faculty interactions, manage academic resources, and enhance the learning experience."})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-emerald-400 mb-3 flex items-center",children:[e.jsx(lt,{className:"w-5 h-5 mr-2"}),"Core Development Team"]}),e.jsxs("div",{className:"space-y-3 text-xs text-slate-300",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-300 mb-1",children:"Sumit Kumar Sinha (3CSE37)"}),e.jsx("div",{className:"text-slate-400 pl-2",children:"SRN: 24SUUBECS2175   Fullstack Developer, Database Designer"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-300 mb-1",children:"Satyam Kumar (3CSE32)"}),e.jsx("div",{className:"text-slate-400 pl-2",children:"SRN: 24SUUBECS1906  Backend Developer"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-300 mb-1",children:"Santosh Kumar Sah (3CSE32)"}),e.jsx("div",{className:"text-slate-400 pl-2",children:"SRN: 24SUUBECS1895  Frontend Developer, Bugs Analyst"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-300 mb-1",children:"Raushan Kumar (3CSE29)"}),e.jsx("div",{className:"text-slate-400 pl-2",children:"SRN: 24SUUBECS1711  UI/UX Designer, Developer"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-300 mb-1",children:"Satyam Kumar Thakur (3CSE32)"}),e.jsx("div",{className:"text-slate-400 pl-2",children:"SRN: 24SUUBECS1908  Bugs Analyst, UI/UX Tester"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-emerald-300 mb-1",children:"Abhishek H (1AIML01)"}),e.jsx("div",{className:"text-slate-400 pl-2",children:"SRN: 25SUUBEAML009  UI/UX Developer , Tester (Android Application)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-yellow-400 mb-3 flex items-center",children:[e.jsx(Ot,{className:"w-5 h-5 mr-2"}),"Institution & Contact"]}),e.jsxs("div",{className:"space-y-3 text-sm text-slate-300",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-300 mb-1",children:"Sapthagiri NPS University"}),e.jsx("div",{className:"text-slate-400 text-xs mb-2",children:"Academic Year 2024-2028"}),e.jsxs("div",{className:"flex items-start text-xs text-slate-400",children:[e.jsx(et,{className:"w-4 h-4 mr-2 mt-0.5 text-yellow-400 flex-shrink-0"}),e.jsx("span",{children:"#14/5, Chikkasandra, Hesarghatta Main Road, Bengaluru  560057"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-start mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2 mt-0.5 text-yellow-400 flex-shrink-0"}),e.jsx("a",{href:"mailto:info.noteorbit@gmail.com",className:"text-blue-400 hover:text-blue-300 transition-colors break-all",children:"info.noteorbit@gmail.com"})]}),e.jsxs("div",{className:"flex items-center text-xs text-slate-400",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"9771719891, 7033688853"})]})]}),e.jsx("div",{className:"pt-2 mt-2 border-t border-white/5",children:e.jsxs("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSc4V44detvlfsLSphLF3-QsGM_zw0MQ4vYt4LVzMmhwBp1s5A/viewform",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm font-bold text-pink-400 hover:text-pink-300 transition-colors bg-pink-500/10 px-3 py-2 rounded-lg border border-pink-500/20 hover:bg-pink-500/20",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Share Feedback"]})})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-white/10 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-xs text-slate-400 text-center sm:text-left",children:[e.jsx("p",{children:" 2026 NoteOrbit Academic Management System"}),e.jsxs("p",{className:"mt-1",children:["Powered by ",e.jsx("span",{className:"text-blue-400 font-semibold",children:"LeafCore Labs"})]})]}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:e.jsx("span",{children:"Where Imagination is Redefined!"})})]})]})})]})]})}ss.createRoot(document.getElementById("root")).render(e.jsx(qs.StrictMode,{children:e.jsx(In,{})}));
